(function(){try{
"use strict";(()=>{var f=window.IntentProperties?window.IntentProperties.namespace||"intent":"blackcrow",a=window.blackcrow||window.intent||{},p=[];Array.isArray(a)&&(p=a,a={});a.BUNDLE_NAME="el-eat.js";a.BUILD_NUMBER="15344";a.TAG_SRC=window.blackcrowTagSrc||"JS";window.blackcrow=a;window.intent=a;var d=a.SITE_NAME||"eleatcereal",Gi="init.blackcrow.ai";if(document.currentScript&&document.currentScript instanceof HTMLElement){let e=document.currentScript.src.split("/")[2];if(!e)throw new Error("Failed to extract CDN host from tag");Gi=e}else a.TAG_SRC==="ShopifyAppExtension"&&(Gi="shopify-init.blackcrow.ai");var l=`https://${Gi}/`;var hn=`
`;function ne(t,e){if(typeof t=="string"){let r=t.split(hn);return r.splice(1,e),r.join(hn)}return""}function ou(t){return typeof t=="string"?t.split(hn).filter(o=>{o=o.toLowerCase();let n=l.toLowerCase(),i="el-eat.js".toLowerCase();return!(o.includes(n)&&o.includes(i))}).join(hn):t}function ji(){return a.TAG_SRC||"JS"}function y(){return ji()==="ShopifyAppExtension"}function J(t,e,r,o){function n(i){typeof o=="function"&&o(i)}try{fetch(t,e).then(i=>{if(i.ok)typeof r=="function"&&r(i);else if(e?.mode!=="no-cors"){let c=`${i.status} ${i.statusText}`;try{i.json().then(s=>{let u=s.errors[0];c=`${u.error_type}: ${u.error_message}`,n(new Error(c))}).catch(()=>{n(new Error(c))})}catch{n(new Error(c))}}}).catch(n)}catch(i){n(i)}}function Zp(){try{return window.location!==window.top.location}catch{return!0}}function So(){return y()?window.location.hostname:window.top.location.hostname}function nu(){return y()?window.location:Zp()?window.top.location:window.location}function ke(){return nu()?.pathname}function k(){return nu().href}function ye(){return window?.navigator?.userAgent}function Ut(t){return performance&&typeof performance.getEntriesByType=="function"&&performance.getEntriesByType(t)||[]}function yn(){return performance&&typeof performance.now=="function"&&performance.now()||0}function Br(t,e){let r=globalThis.browser;if(y()&&r){J(t,{method:"POST",keepalive:!0,mode:"no-cors",body:e},()=>{},o=>{o.message=`${o.message} - ${t}`,o.status="warn",a.error(o)});return}window?.navigator?.sendBeacon(t,e)}var Kp=["clicktripz","example","partner"],Yp=[".shopifypreview.","localhost.","demo.","staging.","development-","development.","dev-","dev.","devstore-","devstore.","development2","sandbox-","sandbox.","-sandbox"],Xp=["localhost","127.0.0.1"];function Qp(){let t=So();return t===""||Xp.includes(t)}function em(){let t=So().toLocaleLowerCase();return Yp.some(e=>t.indexOf(e.toLocaleLowerCase())!==-1)}function St(t){return Kp.indexOf(t.toLowerCase())!==-1||Qp()||em()}function ce(t,e={},r="info"){if(St(d))return;let o="https://monitor-api.blackcrow.ai/",n=!1,i=parseInt("15344",10)||0,c=JSON.stringify({message:t,status:r,service:"javascript-api",version:i,ddsource:"browser",ddtags:`env:${n?"dev":"production"},version:${i}`,"logger.name":"monitor-api","http.useragent":ye(),"view.site":d,...e});Br(o,c)}function iu(t){let e=Math.random();(t.overrideSampling||e>=.3&&e<.4)&&ce(t.message,{status:t.status||"error","error.kind":t.name,"error.message":t.message,"error.stack":t.stack,"view.url":k(),"view.referrer":document.referrer})}function tm(t){let e=!0;return t.skipNotify&&(e=!1),t.message.indexOf("com.gargoylesoftware.htmlunit")!==-1&&(e=!1),e}function rm(t,e){let o=`BlackCrow${e?` ${e}`:""} ${t.stack}`;globalThis.console&&(globalThis.console.error?globalThis.console.error(o):globalThis.console.log(o))}function om(t){let e=new Error(t);return ne(e.stack,1)}function vn(t,e={}){if(!t)return;t.stack||(t.stack=om(t.msg)),!1&&rm(t,e.appName),tm(t)&&typeof vn.sendErrorToServer=="function"&&vn.sendErrorToServer(t)}vn.sendErrorToServer=iu;a.error=vn;function _n(t,e){let r=document.createElement("link");r.rel=e,r.href=t,document.head.appendChild(r)}a.TAG_SRC!=="ShopifyAppExtension"&&!window.blackcrowpreconnected&&(_n("https://api.blackcrow.ai/","preconnect"),_n("https://api.blackcrow.ai/","dns-prefetch"),_n(l,"preconnect"),_n(l,"dns-prefetch"),window.blackcrowpreconnected=1);function S(t,e,r){if(t)if(typeof t.length<"u"){for(let o=0,n=t.length;o<n;o+=1)if(e.call(r,t[o],o,t)===!1)return}else{let o=Object.keys(t);for(let n=0,i=o.length;n<i;n+=1)if(e.call(r,t[o[n]],o[n],t)===!1)return}}var nm="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";var au=(t=21)=>{let e="",r=t;for(;r--;)e+=nm[Math.random()*64|0];return e};var su=au;function dt(t,e){if(y())return window.blackcrow.cookie.get(t);e=e||document.cookie;let r={};return S(e.split(/\s?;\s?/),o=>{let n=o.split(/\s?=\s?/);r[n.shift().trim()]=n.join("=").trim()}),r[t]}async function T(t,e){try{return y()?await globalThis.browser.cookie.get(t):dt(t,e)}catch{}return null}var Hi="_bcai_h",Po="_bcai_i",zi="_bcai_e",wn="_bcai_t",cu="_bcai_up",Ji="_bcai_lpi",Zi="_bcai_vn",Ki="_bcai_vs",En="_bcai_v",xo="_bcai_pu",Yi="_bcai_lpv",Xi="_bcai_spv",bn="_bcai_em",Qi="_bcai_fn",ea="_bcai_ln",Sn="_bcai_ph",uu="_bcai_koc",fu="_bcai_khs",du="_bcai_kps",ta="_bcai_kid",lu="_bcai_pwo_ebc",To="_bcai_isn",ra="_bcai_fcpes",Pn="_bcai_fbcapi",oa="_bcai_aos_pes",Ur="_bcai_urr",pu="fbclid",Vt="_fbc",lt="_fbp",xn="__kla_id";var Ao;function na(){if(Ao)return Ao;let t=document.location.hostname.split("."),e,r=t.length;if(r===1)Ao="";else{for(;r>2;){r-=1,e=t.slice(1).join("."),document.cookie=`${wn}=1; domain=${e}`;let o=dt(wn);if(document.cookie=`${wn}=1; expires=Thu, 01 Jan 1970 00:00:00 GMT; domain=${e}`,!o)break;t.shift()}Ao=t.join(".")}return Ao}function K(t,e,r){try{let o;if(r){let i=new Date;i.setTime(i.getTime()+r*60*1e3),o=`;expires=${i.toUTCString()}`}else o="";let n=`${t}=${e}${o};domain=${na()};path=/`;y()?(browser.cookie.set(n),window.blackcrow.cookie.set(t,e)):document.cookie=n}catch{}}var sr;function Pt(){return sr||(sr=dt(Po),sr||(sr=su(),K(Po,sr,1051200)),sr)}function im(t,e){var r,o,n,i,c,s,u,m,g,b;for(r=t.length&3,o=t.length-r,n=e,c=3432918353,u=461845907,b=0;b<o;)g=t.charCodeAt(b)&255|(t.charCodeAt(++b)&255)<<8|(t.charCodeAt(++b)&255)<<16|(t.charCodeAt(++b)&255)<<24,++b,g=(g&65535)*c+(((g>>>16)*c&65535)<<16)&4294967295,g=g<<15|g>>>17,g=(g&65535)*u+(((g>>>16)*u&65535)<<16)&4294967295,n^=g,n=n<<13|n>>>19,i=(n&65535)*5+(((n>>>16)*5&65535)<<16)&4294967295,n=(i&65535)+27492+(((i>>>16)+58964&65535)<<16);switch(g=0,r){case 3:g^=(t.charCodeAt(b+2)&255)<<16;case 2:g^=(t.charCodeAt(b+1)&255)<<8;case 1:g^=t.charCodeAt(b)&255,g=(g&65535)*c+(((g>>>16)*c&65535)<<16)&4294967295,g=g<<15|g>>>17,g=(g&65535)*u+(((g>>>16)*u&65535)<<16)&4294967295,n^=g}return n^=t.length,n^=n>>>16,n=(n&65535)*2246822507+(((n>>>16)*2246822507&65535)<<16)&4294967295,n^=n>>>13,n=(n&65535)*3266489909+(((n>>>16)*3266489909&65535)<<16)&4294967295,n^=n>>>16,n>>>0}var am=4294967295,sm=108;function ia(t){return im(t||"",sm)/am}function re(t={}){let e=dt("_shopify_y")||Pt(),r=t.name||"",{force:o,allocations:n}=t,i=ia(`${e}${r}`);if(o)return n.find(m=>m.name===o)?.value;let c=0,s=[];S(t.allocations,m=>{if(s.push({min:c,max:c+m.percent,value:m.value}),c+=m.percent,c>1)throw new Error("Bucket allocation exceeds 100%")});let u;return S(s,m=>i>=m.min&&i<m.max?(u=m.value,!1):!0),u}function xe(){return document.referrer}function Vr(){return document.title}function cm(t,e){let r=e.split("[");return r.length>1?t&&t[r[0]]&&t[r[0]][parseInt(r[1],10)]:t&&t[e]}function w(t,e){if(!(!t||!e||typeof e!="string"))return e.split(".").reduce(cm,t)}function cr(t,e,r,o,n){!t||!e||typeof e!="string"||(e.indexOf(".")!==-1?(e=e.split("."),cr(t,e.shift(),r,e,n)):!o||o.length===0?(!n||!Object.prototype.hasOwnProperty.call(t,e))&&(t[e]=r):((!n||!Object.prototype.hasOwnProperty.call(t,e))&&(t[e]=t[e]||{}),cr(t[e],o.shift(),r,o,n)))}a.storage=a.storage||{};function um(t,e){let r=a.storage[t].audience;typeof r=="object"&&e?.audience===!1?a.storage[t]={audience:r}:a.storage[t]={}}function ie(t){t&&(a.storage[t]=a.storage[t]||{});function e(){return a.storage[t]}return{clear:r=>{t==="bound_events"&&r?um(t,r):a.storage[t]={}},getAll:()=>e()||{},get:r=>w(e(),r),set:(r,o)=>{let n=e();typeof r=="string"?cr(n,r,o):S(r,(i,c)=>{cr(n,c,i)})},push:(r,o)=>{let n=e(),i=w(n,r);Array.isArray(i)?i.push(o):cr(n,r,[o])}}}var aa=ie("page"),sa="history";function fm(t,e){return typeof e=="function"?e.toString().replace(/\s+/g," "):e}function mu(){return console.group(`${f} history`),S(aa.get(sa),t=>{console.groupCollapsed(t.name),console.log("data",JSON.stringify(t.data,fm,4)),console.log(t.source),console.groupEnd()}),console.groupEnd(),""}function gu(){return aa.get(sa)}function ae(t,e){let r=new Error("");r.name="source",r.stack=ne(r.stack,1),aa.push(sa,{name:t,data:e,source:r})}var dm=Object.prototype.toString,ca=Array.prototype.slice;function E(t,...e){return t=t||{},S(e,r=>{S(r,(o,n)=>{let i=dm.call(o).split(" ").pop();if(i!=="Undefined]"){if(!o||o===o.window||o.nodeType||o._isVue){t[n]=o;return}if(i==="Object]"){t[n]=t[n]||{},E(t[n],o);return}if(i==="Array]"){t[n]=t[n]||[],t[n]=ca.call(t[n]).concat(o);return}if(i==="NodeList]"||i==="HTMLCollection]"){t[n]=t[n]||[],t[n]=ca.call(t[n]).concat(ca.call(o));return}t[n]=o}})},this),t}window.blackcrow.pushedData=window.blackcrow.pushedData||{};function ua(){let t=window.blackcrow.pushedData;t&&t.winLocation!==k()&&(window.blackcrow.pushedData={})}function Tn(t){E(window.blackcrow.pushedData,t,{winLocation:k()})}function An(t){window.blackcrow.pushedData={...t,winLocation:k()}}function N(t){return w(window.blackcrow.pushedData,t)}var fa=ie("events_api_response"),da=ie("api_config");function Wr(t){let e=new Error(t);return e.name="SequencingError",e.status="warn",e.stack=ne(e.stack,1),e}var hu=!1,yu=!1;function vu(t,e){if(t){let r=e.get(`data.${t}`);if(typeof r=="string"){let o=r.toLowerCase();return o==="off"||o==="false"?!1:r}return r}return e.get("data")}function la(t){da.set("data",t),yu=!0}function M(t){return yu===!1&&a.error(new Wr("Attempting to access apiConfig before it has been set!")),vu(t,da)}function Io(t){fa.set("data",t),hu=!0}function pa(t){return hu===!1&&a.error(new Wr("Attempting to access events api response before it has been set!")),vu(t,fa)}function ma(){return!!pa("history_id")}function lm(t){let e=new Error(t);return e.name="URIDecodingError",e.status="warn",e.stack=ne(e.stack,1),e}function Ge(t){let e={};if(typeof t=="string"&&t.length){let r=t.split("?");r.shift(),r=r.join("?"),r=r.split("#")[0],S(r.split("&"),o=>{let n=o;try{n=decodeURIComponent(n)}catch{a.error(new lm(`Unable to decode URI component: ${n}`))}let i=n.indexOf("="),c=i>0?[n.slice(0,i),n.slice(i+1)]:[n];typeof c[1]<"u"&&(e[c[0]]=c[1])})}return e}function le(t,e){let r=e?Ge(e):Ge(k()),o=Object.keys(r).find(n=>n?.toLowerCase()===t?.toLowerCase());return r[o]}var _u="config.visitor.query_string";function pm(t){let e=t?w(t,_u):M(_u);return e?{param:e.param,separator:e.separator,index:e.index}:{}}function mm(t){let e=t.param;if(e)return le(e)}function gm(t,e){let r=e.separator,o=e.index;return r&&o?t.split(r)[o]||void 0:t}function wu(t){let e=pm(t),r=mm(e);if(r)return gm(r,e)}var ga,ha;function hm(){let t,e=window.GoogleAnalyticsObject?window[window.GoogleAnalyticsObject]:window.ga;return e&&typeof e.getAll=="function"&&S(e.getAll(),r=>{try{let o=r.get("clientId");if(o)return t=o,!1}catch{}}),t}async function ym(){try{if(typeof ha<"u")return ha;let t,e=await T("_ga");if(e){let r=e.split(".");r.shift(),r.shift(),t=r.join(".")}return ha=t,t}catch(t){a.error(t);return}}async function Wt(t){try{if(ga)return ga;let e=N("google_id")||wu(t)||window.gaGlobal&&window.gaGlobal.vid||hm()||await ym();return ga=e,e}catch(e){a.error(e);return}}var Eu="blackcrow",bu="cookie",Su="global",Pu="google",ya="pushed_data";var ur,je=Eu.toUpperCase(),He=En,In=!1;function xu(t,e,r){K(En,t,1051200),K(Ki,e,1051200),K(Zi,r,1051200)}async function ze(){if(ur)return{id:ur,source:je,name:He,fallback:In};if(ur=await T(En),ur)return je=await T(Ki)||je,He=await T(Zi)||He,xu(ur,je,He),{id:ur,source:je,name:He,fallback:In};let t=M("config.visitor.id_source"),e=M("config.visitor.id_name"),r=N("visitor_id");if(r&&(je=ya.toUpperCase(),He="visitor_id"),t===bu){let o=await T(e);o&&(r=o,je=t.toUpperCase(),He=e)}else if(t===Su){let o=w(window,e);o&&(r=o,je=t.toUpperCase(),He=e)}else if(t===ya){let o=N(e);o&&(r=o,je=t.toUpperCase(),He=e)}else if(t===Pu){let o=await Wt();o&&(r=o,je=t.toUpperCase(),He=e)}return r||(r=Pt(),In=!0),ur=r,xu(r,je,He),{id:r,source:je,name:He,fallback:In}}async function vm(t){try{if(t.overrideSampling||re({name:"error_sampling",allocations:[{percent:.1,value:!0}]})){let r=await ze();ce(t.message,{status:t.status||"error","error.kind":t.name,"error.message":t.message,"error.stack":t.stack,"usr.id":r.id,"view.url":N("page_url")||k(),"view.referrer":N("page_referrer_url")||xe()})}ae(t.name,t)}catch{}}function Tu(){a.error.sendErrorToServer=vm}function _m(t){let e={name:"other",major:0,minor:0};if(/googlebot/.test(t)||/adsbot/.test(t)||/bingbot/.test(t)||/bingpreview/.test(t)||/slurp/.test(t)||/storebot/.test(t)||/spider/.test(t)||/crawler/.test(t)||/yandexbot/.test(t)||/ptst[ \/]/.test(t)||/externalhit/.test(t))return e.name="bot",e;let o=/(msie) ([\w.]+)/.exec(t)||/(ucbrowser)[ \/]([\w.]+)/.exec(t)||/(miuibrowser)[ \/]([\w.]+)/.exec(t)||/(opera mini)[ \/]([\w.]+)/.exec(t)||/(opr)[ \/]([\w.]+)/.exec(t)||/(opera)(?:.*version)?[ \/]([\w.]+)/.exec(t)||/(firefox)[ \/]([\w.]+)/.exec(t)||/(trident)(?:.*? rv:([\w.]+))?/.exec(t)||/(edg)[ \/]([\w.]+)/.exec(t)||/(edge)[ \/]([\w.]+)/.exec(t);if(o){o[1]==="opr"?o[1]="opera":o[1]==="trident"?o[1]="msie":o[1]==="edg"&&(o[1]="edge"),e.name=o[1].replace(/\s+/,"");let n=(o[2]||"").split(/\.|-|_/);e.major=parseInt(n[0],10)||0,e.minor=parseInt(n[1],10)||0}return e}function wm(t){return!!(t.match(/ipad/)||t.match(/android/)&&!t.match(/mobi|mini|fennec/)||t.match(/macintosh/)&&window.navigator.maxTouchPoints>1)}function Em(t){return!!t.match(/ip(hone|od)|android.+mobile|windows (ce|phone)|blackberry|bb10|symbian|webos|firefox.+fennec|opera m(ob|in)i|tizen.+mobile|polaris|iemobile|lgtelecom|nokia|sonyericsson|dolfin|uzard|natebrowser|ktf;|skt;/)}function bm(t){return Em(t)?"mobile":wm(t)?"tablet":"desktop"}function fr(t){t=t||"";let e=t.toLowerCase();return{browser:_m(e),deviceType:bm(e)}}function pt(t){let e=new Error(t);return e.name="NotSupportedError",e.status="warn",e.stack=ne(e.stack,1),e}function Ce(){return!!w(window,"Shopify")}function va(){return Ce()&&ke()?.includes("products")}function Au(){return Ce()&&ke()?.includes("/search")}function Sm(){return Ce()&&ke()==="/"}function Iu(){return Ce()&&ke()?.includes("/cart")}function ku(){return!!w(window,"Shopify.Checkout")}function _a(){let t=k();return t&&t.includes("/checkouts")}function wa(){let t=k();return t&&(t.includes("/thank_you")||t.includes("/purchase/thanks")||t.includes("/thank-you"))}function Pm(){let t=w(window,"Shopify.Checkout.isOrderStatusPage"),e=w(window,"Shopify.checkout");return t!==void 0||e!==void 0}function qr(){return w(window,"Shopify.Checkout.currency")||w(window,"cart_json.currency")||w(window,"Shopify.currency.active")||w(window,"afterpay_shop_currency")}function kn(){return w(window,"Shopify.Checkout.totalPrice")?.toString()}function Cn(){if(!Ce())return;let t=w(window,"Shopify.Checkout.step");if(t)switch(t){case"payment_method":return"payment";case"shipping_method":return"shipping";case"contact_information":return"contact";case"thank_you":return"confirmation";default:return t}return Pm()?"order_status":va()?"products":Sm()?"index":ke()}function ko(){return globalThis?.Shopify?.routes?.root}function Ea(){return y()&&w(window,"shopifyEvent.name")==="checkout_completed"}function ba(){return y()&&w(window,"shopifyEvent.name")==="payment_info_submitted"}function Cu(){return y()&&w(window,"shopifyEvent.name")==="page_viewed"}function On(){return Ea()||ba()?window?.shopifyCheckout:{}}function Q(t,e){try{window.sessionStorage.setItem(t,JSON.stringify(e))}catch{}}async function j(t){try{if(y()){let e=await globalThis.browser.sessionStorage.getItem(t);return JSON.parse(e)}return JSON.parse(window.sessionStorage.getItem(t))}catch{}return null}function xm(){try{return!new Error("")}catch(t){return t}}function Tm(){let t=xm();if(t)throw t.name="NotSupportedError",t.status="warn",t.message="Missing feature: errorConstructor",t}function Am(){let{browser:t}=fr(ye());if(typeof t=="object"){let e=t.name,r=t.major;if(e==="bot"||e==="msie"||e==="edge"&&r<15||e==="firefox"&&r<54||e==="chrome"&&r<42||e==="safari"&&r<10||e==="ucbrowser"||e==="miuibrowser"||e==="opera"&&r<38||e==="operamini")return!1}return!0}async function Ou(){try{if(!y())return wa()&&Q("loadBundleWithShopifyWebPixelOnThankYouPage",!1),_a()&&Q("loadBundleWithShopifyWebPixel",!1),Promise.resolve(!0);let t=w(window,"shopifyEvent.name")==="checkout_completed";if(wa()||t){let e=j("loadBundleWithShopifyWebPixelOnThankYouPage");return Promise.resolve(e!==!1)}if(_a()){let e=await j("loadBundleWithShopifyWebPixel");return Promise.resolve(e!==!1)}return Promise.resolve(!1)}catch(t){return a.error(t),Promise.resolve(!0)}}function Nu(){return le("bcai-bypass")==="true"}function Ru(){if(!Am())throw new pt("Browser not supported");Tm()}function A(t){let e=new Error(t);return e.name="GlobalInterfaceError",e.status="warn",e.stack=ne(e.stack,1),e}var Im="https://init.blackcrow.ai/",km="https://shopify-init.blackcrow.ai/";function Sa(){let t="el-eat.js"?.replace(".js",""),e=l;return e?.includes("init.blackcrow.ai")||(e=Ce()?km:Im,a.error(A(`el-eat.js is not hosted on the blackcrow CDN but on ${l}.`))),`${e}config/${t}.json`}async function Lu(){let t=await fetch(Sa(),{method:"GET"});if(!t.ok)throw new Error(`${t.status} ${t.statusText}`);let e=await t.json(),r=atob(e.data);return JSON.parse(r)}function Co(t,e,r){if(t){let n=(t.options||{}).origEvent||{};if(clearTimeout(n.timeout),typeof t.callback=="function"&&!n.timeoutReached){try{t.callback(e)}catch(i){a.error(i)}typeof r=="function"&&r()}}}var Cm=ie("bound_events"),Om=ie("triggered_events");function V(t,e,r,o={}){let n={appName:t,eventName:e,callback:r,options:o};Cm.push(`${t}.${e}`,n),S(Om.get(`${t}.${e}`),i=>{Co(n,i.data,i.onExec)})}function Oe(t,e,r=!0,o="error"){let n=new Error(t);return n.name=`${e||""}RequestError`,n.status=o,n.skipNotify=r,n.stack=ne(n.stack,1),n}function pe(t,...e){return new Promise(r=>{setTimeout(r,t,[...e])}).catch(r=>a.error(r))}function Nn(t,e,r){return function(...n){try{return t.apply({},n)}catch(i){r&&r.interval&&clearInterval(r.interval),a.error(i,{appName:e})}}}function Nm(t,e,...r){return setTimeout.apply(globalThis,[Nn(t,this.appName),e].concat(r))}function Rm(t,e,...r){let o={},n=setInterval.apply(globalThis,[Nn(t,this.appName,o),e].concat(r));return o.interval=n,n}var Pa=class{constructor(e,r){this.asyncFn=e,this.interval=r,this.running=!1}start(){this.running||(this.running=!0,this.cycle())}stop(){this.running&&(this.running=!1)}async cycle(){try{await this.asyncFn()}catch{}try{await pe(this.interval),this.running&&this.cycle()}catch(e){a.error(e),this.stop()}}};function Lm(t,e,r,o){let n=r.wrapped||Nn(r,this.appName);r.wrapped=n,t.addEventListener?t.addEventListener(e,n,o):t.attachEvent&&t.attachEvent(e,n)}function Dm(t,e,r,o){r?t.removeEventListener(e,r.wrapped,o):t.removeEventListener(e)}var v={fn:Nn,addListener:Lm,removeListener:Dm,setInterval:Rm,SafeAsyncInterval:Pa,setTimeout:Nm};function Me(t,e,r,o){function n(s){let u=new Oe(s.message,e.servletName);a.error(u,{customDimensions:{url:t}}),typeof o=="function"&&v.fn(o)(u)}function i(s){if(typeof s!="object"){n(new Error("JSON is not an object"));return}typeof r=="function"&&v.fn(r)(s||{})}function c(s){s.json().then(v.fn(i)).catch(u=>{n(new Error(`Invalid JSON ${u.message}`))})}J(t,e,c,n)}function xa(){let t=Math.round(yn());if(!t||t<1)return"0";if(t<10)return"10";let e="0";return S(`${t}`,(r,o)=>{o===0?e=r:e+="0"}),e}var Ta=document.documentElement,Du=window.screen,Fu=Math.max;function Mu(){let t=window?.innerHeight+window?.scrollY||0;return Fu(Ta?.offsetHeight,Ta?.scrollHeight,t)}function $u(){return y()?window.outerHeight:Du?.height}function Bu(){return y()?window.outerWidth:Du?.width}function Rn(){return Fu(window.pageYOffset,Ta?.scrollTop)}async function ue(t){try{let e=y()?await globalThis.browser.localStorage.get(t):window.localStorage.getItem(t);return e?JSON.parse(e):null}catch{}return null}var Aa,Ia;async function Fm(){try{if(typeof Ia<"u")return Ia;let t,e=await T(lt);if(e){let r=e.split(".");r.shift(),r.shift(),t=r.join(".")}return Ia=t,t}catch(t){a.error(t);return}}async function Uu(){try{if(Aa)return Aa;let t=N("facebook_id")||await Fm();return Aa=t,t}catch(t){a.error(t);return}}var ka;function Mm(){let t=w(window,"Shopify.checkout.customer_id")||w(window,"ShopifyAnalytics.meta.page.customerId")||w(window,"__st.cid");if(t)return t.toString()}function Vu(){if(ka)return ka;let t=Mm();return ka=t,t}var Ca;async function $m(){try{return JSON.parse(window.atob(await T(xn))).$exchange_id}catch{return}}async function Gr(){try{if(Ca)return Ca;let t=await $m();return Ca=t,t}catch(t){a.error(t);return}}function Wu(){return window?.ju_config?.ju_vid}function qu(){return window?.bouncex?.cookie?.hardID}function Gu(){return window?.bouncex?.cookie?.softID}function ju(){return window?.edgemesh?.id}function Ne(t,e){try{e&&(y()?(window.blackcrow.localStorage.set(t,JSON.stringify(e)),browser.localStorage.setItem(t,JSON.stringify(e))):window.localStorage.setItem(t,JSON.stringify(e)))}catch{}}function qt(t){return`${Math.random().toString(36).substring(2,3)}${btoa(t)}`}function dr(t){return t?atob(t.substring(1)):void 0}function Oo(t){try{return document.querySelectorAll(`:is(${t})`)}catch{}try{return document.querySelectorAll(`:matches(${t})`)}catch{}try{return document.querySelectorAll(`:-webkit-any(${t})`)}catch{}try{return document.querySelectorAll(`:-moz-any(${t})`)}catch{return[]}}function Hu(t){v.addListener(window,"message",e=>{if(e.origin&&e.origin.indexOf(".attn.tv")>0){let r=e.data.__attentive||{};r&&r.email&&t(r.email)}})}function zu(t){v.addListener(window,"postscriptPopup",e=>{if(e.detail.type==="formSubmit"){let{email:r}=e.detail.values;r&&t(r)}})}function Bm(t=()=>{}){v.addListener(window,"click",e=>{let r=e.target;if(r.classList.contains("amped-wrapper")&&r.shadowRoot){let o=r.shadowRoot.querySelector('input[type="email"]');o&&(o.hasAttribute("data-listener-attached")||(v.addListener(o,"focusout",n=>{let i=n.target.value;i&&t(i)}),o.setAttribute("data-listener-attached","true")))}})}function Ju(t){let e=document.getElementById("continue_button"),r=document.querySelectorAll("input[type=email]");e&&r&&v.addListener(e,"click",()=>{t(r[0]&&r[0].value)})}function Ln(){return w(window,"ShopifyCustomer.email")||w(window,"Shopify.checkout.email")||w(window,"Shopify.Checkout.customer.email")}function Zu(){return w(window,"userProperties.email")}function Ku(){let t=w(window,"_learnq");if(t&&typeof t.identify=="function")return t.identify().$email}function Na(t){if(t)return t.trim()}function Ra(t){return new RegExp(/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/).test(t)}function No(t){let e=Na(t);return e&&Ra(e)?e:void 0}function lr(t){let e=No(t);return e?qt(e):void 0}function Y(t){let e=lr(t);e&&Ne(bn,e)}function Um(t,e=()=>{}){t.value&&e(t.value)}function Vm(t,e){let r=t.textContent||t.innerText;return r&&(r=r.toLowerCase()),r&&r.indexOf(e.toLowerCase())!==-1}function Oa(t){return Vm(t,"email")}function Wm(t){if(t.labels){if(Array.from(t.labels).some(r=>Oa(r)))return!0}else if(t.id&&Array.from(document.getElementsByTagName("label")).some(r=>r.htmlFor===t.id&&Oa(r)))return!0;if(t.parentNode){let e=t.parentNode;return e.tagName.toLowerCase()==="label"&&Oa(e)}return!1}function qm(t){return Array.from(t).filter(r=>Wm(r))}var Yu='input[type="email"], input[autocomplete~="email"], input[placeholder~="email" i], input[type="text"][id*="email" i], input[type="text"][name*="email" i]';function La(){let t=Oo(Yu);if(!t.length){let e=document.querySelectorAll('input[type="text"]');e.length&&(t=qm(e))}return t}function Dn(t=e=>{}){let e=La();S(e,r=>{Um(r,t)}),v.addListener(window,"focusout",r=>{let o=r.target;if(o.matches(Yu)||Array.isArray(e)&&e.includes(o)){let n=o.value;n&&t(n)}})}function Xu(t){let e=Ln()||Zu()||Ku();e&&t(e),Hu(r=>{t(r)}),zu(r=>{t(r)}),Bm(r=>{t(r)}),Ju(r=>{t(r)}),Dn(r=>{t(r)})}function Qu(t=()=>{}){let e=Ln()||Zu()||Ku();return e?(Y(e),t()):(Hu(r=>{Y(r)}),Ju(r=>{Y(r)}),Dn(r=>{Y(r),t()}),zu(r=>{Y(r)})),e}async function me(){try{let t=await ue(bn)||await T(bn);return t?dr(t):void 0}catch(t){a.error(t);return}}function Gt(t,e){var r=(t&65535)+(e&65535),o=(t>>16)+(e>>16)+(r>>16);return o<<16|r&65535}function Gm(t,e){return t<<e|t>>>32-e}function Fn(t,e,r,o,n,i){return Gt(Gm(Gt(Gt(e,t),Gt(o,i)),n),r)}function ve(t,e,r,o,n,i,c){return Fn(e&r|~e&o,t,e,n,i,c)}function _e(t,e,r,o,n,i,c){return Fn(e&o|r&~o,t,e,n,i,c)}function we(t,e,r,o,n,i,c){return Fn(e^r^o,t,e,n,i,c)}function Ee(t,e,r,o,n,i,c){return Fn(r^(e|~o),t,e,n,i,c)}function jm(t,e){t[e>>5]|=128<<e%32,t[(e+64>>>9<<4)+14]=e;var r,o,n,i,c,s=1732584193,u=-271733879,m=-1732584194,g=271733878;for(r=0;r<t.length;r+=16)o=s,n=u,i=m,c=g,s=ve(s,u,m,g,t[r],7,-680876936),g=ve(g,s,u,m,t[r+1],12,-389564586),m=ve(m,g,s,u,t[r+2],17,606105819),u=ve(u,m,g,s,t[r+3],22,-1044525330),s=ve(s,u,m,g,t[r+4],7,-176418897),g=ve(g,s,u,m,t[r+5],12,1200080426),m=ve(m,g,s,u,t[r+6],17,-1473231341),u=ve(u,m,g,s,t[r+7],22,-45705983),s=ve(s,u,m,g,t[r+8],7,1770035416),g=ve(g,s,u,m,t[r+9],12,-1958414417),m=ve(m,g,s,u,t[r+10],17,-42063),u=ve(u,m,g,s,t[r+11],22,-1990404162),s=ve(s,u,m,g,t[r+12],7,1804603682),g=ve(g,s,u,m,t[r+13],12,-40341101),m=ve(m,g,s,u,t[r+14],17,-1502002290),u=ve(u,m,g,s,t[r+15],22,1236535329),s=_e(s,u,m,g,t[r+1],5,-165796510),g=_e(g,s,u,m,t[r+6],9,-1069501632),m=_e(m,g,s,u,t[r+11],14,643717713),u=_e(u,m,g,s,t[r],20,-373897302),s=_e(s,u,m,g,t[r+5],5,-701558691),g=_e(g,s,u,m,t[r+10],9,38016083),m=_e(m,g,s,u,t[r+15],14,-660478335),u=_e(u,m,g,s,t[r+4],20,-405537848),s=_e(s,u,m,g,t[r+9],5,568446438),g=_e(g,s,u,m,t[r+14],9,-1019803690),m=_e(m,g,s,u,t[r+3],14,-187363961),u=_e(u,m,g,s,t[r+8],20,1163531501),s=_e(s,u,m,g,t[r+13],5,-1444681467),g=_e(g,s,u,m,t[r+2],9,-51403784),m=_e(m,g,s,u,t[r+7],14,1735328473),u=_e(u,m,g,s,t[r+12],20,-1926607734),s=we(s,u,m,g,t[r+5],4,-378558),g=we(g,s,u,m,t[r+8],11,-2022574463),m=we(m,g,s,u,t[r+11],16,1839030562),u=we(u,m,g,s,t[r+14],23,-35309556),s=we(s,u,m,g,t[r+1],4,-1530992060),g=we(g,s,u,m,t[r+4],11,1272893353),m=we(m,g,s,u,t[r+7],16,-155497632),u=we(u,m,g,s,t[r+10],23,-1094730640),s=we(s,u,m,g,t[r+13],4,681279174),g=we(g,s,u,m,t[r],11,-358537222),m=we(m,g,s,u,t[r+3],16,-722521979),u=we(u,m,g,s,t[r+6],23,76029189),s=we(s,u,m,g,t[r+9],4,-640364487),g=we(g,s,u,m,t[r+12],11,-421815835),m=we(m,g,s,u,t[r+15],16,530742520),u=we(u,m,g,s,t[r+2],23,-995338651),s=Ee(s,u,m,g,t[r],6,-198630844),g=Ee(g,s,u,m,t[r+7],10,1126891415),m=Ee(m,g,s,u,t[r+14],15,-1416354905),u=Ee(u,m,g,s,t[r+5],21,-57434055),s=Ee(s,u,m,g,t[r+12],6,1700485571),g=Ee(g,s,u,m,t[r+3],10,-1894986606),m=Ee(m,g,s,u,t[r+10],15,-1051523),u=Ee(u,m,g,s,t[r+1],21,-2054922799),s=Ee(s,u,m,g,t[r+8],6,1873313359),g=Ee(g,s,u,m,t[r+15],10,-30611744),m=Ee(m,g,s,u,t[r+6],15,-1560198380),u=Ee(u,m,g,s,t[r+13],21,1309151649),s=Ee(s,u,m,g,t[r+4],6,-145523070),g=Ee(g,s,u,m,t[r+11],10,-1120210379),m=Ee(m,g,s,u,t[r+2],15,718787259),u=Ee(u,m,g,s,t[r+9],21,-343485551),s=Gt(s,o),u=Gt(u,n),m=Gt(m,i),g=Gt(g,c);return[s,u,m,g]}function Hm(t){var e,r="",o=t.length*32;for(e=0;e<o;e+=8)r+=String.fromCharCode(t[e>>5]>>>e%32&255);return r}function zm(t){var e,r=[];for(r[(t.length>>2)-1]=void 0,e=0;e<r.length;e+=1)r[e]=0;var o=t.length*8;for(e=0;e<o;e+=8)r[e>>5]|=(t.charCodeAt(e/8)&255)<<e%32;return r}function Jm(t){return Hm(jm(zm(t),t.length*8))}function Zm(t){var e="0123456789abcdef",r="",o,n;for(n=0;n<t.length;n+=1)o=t.charCodeAt(n),r+=e.charAt(o>>>4&15)+e.charAt(o&15);return r}function Km(t){return unescape(encodeURIComponent(t))}function Ym(t){return Jm(Km(t))}function Xm(t){return Zm(Ym(t))}function Da(t){return Xm(t)}function Fa(t){return(M("experiments")||[]).find(r=>r.name===t)||{}}function Ma(t){let e=Fa(t);if(!e.name)return e;let r=Ge(k());function o(i,c){let s,u;if(Array.isArray(i)&&i.length&&i[0].value&&typeof i[0].percent=="number")s=`${t}_${c}`,u=i;else if(i.allocations){let m=i.name||c;s=`${t}_${m}`,u=i.allocations}if(s&&u){let m=t,g=i.short_name||c;return re({name:s,allocations:u,force:r[`bcai_${m}_${g}`]})}return i}function n(i,c){if(!i)return i;let s=Array.isArray(i)?[]:{},u;return Object.keys(i).forEach(m=>{let g=c?`${c}_${m}`:m;u=o(i[m],g),s[m]=typeof u=="object"?n(u,g):u}),s}return{name:e.name,active:e.active,data:n(e.data)}}async function $a(){try{if(Ma("pwo_additional_context")?.active){let e=await me();if(e)return Da(`${e}bcai${d}`)}return}catch(t){a.error(t);return}}function ef(){return window?.__fudge__?.deviceId}var tf=t=>async()=>{try{return N(t)||await j(t)||await ue(t)||await T(t)}catch(e){a.error(e);return}},Ro=t=>async()=>{try{return await T(t)}catch(e){a.error(e);return}},fe=(t,e)=>{let r;return async()=>{try{return r=r||await e(),{platform:t,id:r}}catch(o){a.error(o);return}}},Qm=fe("fa",Uu),eg=fe("ga",Wt),tg=fe("cdp",tf("cdp_id")),rg=fe("shop_cid",Vu),og=fe("shop_aid",Ro("_shopify_y")),ng=fe("kl_cid",Gr),ig=fe("attv_cid",Ro("__attentive_id")),ag=fe("ju_cid",Wu),sg=fe("bx_hid",qu),cg=fe("bx_sid",Gu),ug=fe("tab_cid",tf("taboola global:user-id")),fg=fe("bc_cid",Ro(Po)),dg=fe("_bc_i",Pt),lg=fe("_bt_uid",Ro("tag_user_id")),pg=fe("_bc_em",$a),mg=fe("edme_id",ju),gg=fe("fdg_id",ef),hg=fe("_bcai_z",Ro("_bcai_z"));async function Ba(){try{return[await Qm(),await eg(),await tg(),await rg(),await og(),await ng(),await ig(),await ug(),await fg(),await dg(),await ag(),await sg(),await cg(),await lg(),await pg(),await mg(),await gg(),await hg()]}catch(t){return a.error(t),[]}}var Ua;async function Va(){try{return Ua||await T(Hi)||void 0}catch(t){return a.error(t),Ua||void 0}}function rf(t){t&&(Ua=t,K(Hi,t,1051200))}async function of(){try{let e=(await Va())?.split("_",3);if(e)return{page_correlation_id:e[0],session_id:e[1]};throw new Wr("Attempted to parse historyId before it has been set!")}catch(t){a.error(t);return}}var Lo=ie("page"),yg={page:{ignored:!1,log_purchase:!1}};function nf(t){return{page:{ignored:t.ignored,log_purchase:t.log_purchase}}}function af(t={},e){let r=N("page_id"),o=yg;r!==void 0&&t?S(t.filter(s=>s.pageName),s=>{if(s.pageName===r)return o=nf(s),!1}):r===void 0&&t&&S(t.filter(s=>s.pattern),s=>{try{let u=e.match(s.pattern);if(u){if(r=s.pageName,o=nf(s),u.length>1)for(let m=1;m<u.length;m+=1)r=r.replace(`$${m}`,u[m]);return!1}}catch{}}),r||(r="other");let n=Lo.get("lastUrl"),i=Lo.get("lastId"),c=r!==i||e!==n;return Lo.set("lastUrl",e),Lo.set("lastId",r),{id:r,config:o,isNewPage:c,currentUrl:e,lastUrl:n}}function pr(){return Lo.get("lastId")}var Wa={};function sf(t){Wa=t}async function cf(t,e,r){try{let o={},n=Object.keys(Wa||{});for(let i=0;i<n.length;i+=1){let c=n[i],s=Wa[c];typeof s=="function"?o[c]=await s(t[c],e,r):typeof s<"u"&&(o[c]=s)}return o}catch(o){return a.error(o),{}}}function vg(t,e){return e||(t==="_shopify_y"?"aid":t)}async function _g(t){try{let e,r=t.value,o=t.nameOverride,n=await T(r);return r&&n&&(e={name:vg(r,o),value:n}),e}catch(e){a.error(e);return}}async function ee(t){try{let e=[];for(let r=0;r<t.length;r+=1){let o=t[r];if(o.source==="cookie"){let i=await _g(o);i&&e.push(i)}}return e}catch(e){return a.error(e),[]}}function Je(t,e){let r=[];return t&&e&&r.push({name:t,value:e}),r}function uf(){let t=ke(),e=/.*(\/checkouts\/[a-z]{1,3}\/)/gm;if(t?.match(e))return t=t.replace(e,""),t?.replace(/\/$/,"").split("/")[0];if(t?.includes("/checkouts/"))return t=t.replace(/.*checkouts\//,""),t?.replace(/\/$/,"").split("/")[0]}function wg(){let t="0123456789abcdef";return t.charAt(Math.floor(Math.random()*t.length))}function Do(t){return new Array(t).fill(".",0,t).map(()=>wg()).join("")}function Fo(){return`${Do(8)}-${Do(4)}-${Do(4)}-${Do(4)}-${Do(12)}`}function jt(t){return t!==void 0?(t*.01).toLocaleString("en-US",{currency:"USD",minimumFractionDigits:2,useGrouping:!1}):void 0}function Mo(t){return t?typeof t=="string"?jt(t.replace(/\D/g,"")*1):t.toString():"0.00"}async function $o(t){try{let[e]=await ee(t);return e?.value?{external_id:e.value}:void 0}catch(e){a.error(e);return}}function ff(){let t=document.getElementById("shopify-pay-alternate-title");if(w(window,"ShopifyPay")&&t)return{custom_dimensions:{payment_type:"shop-pay"}};if(w(window,"Shopify.checkout")){let e=document.getElementsByClassName("payment-icon");if(e.length&&e[0].textContent)return{custom_dimensions:{payment_type:e[0].textContent.trim()}}}}function qa(){let t={},e=w(window,"Shopify.checkout"),r=w(window,"shopifyEvent.name");if(r&&E(t,{shopify_event_name:r}),e&&(E(t,{event_id:e.order_id,total_price:Mo(e.total_price),currency:e.presentment_currency,shipping_method:e.shipping_rate?.title,shipping_price:Mo(e.shipping_rate?.price),cart:e.line_items&&e.line_items.map(o=>({id:o.product_id,price:Mo(o.price),quantity:o.quantity,categories:[o.title],msrp:Mo(o.line_price),color:o.variant_title,brand:o.vendor}))}),e.discount)){let o=e.discount;E(t,{discounts:[{code:o.code,discount_amount:o.amount,discount_currency:e.currency,discount_percent:o.rate,applicable:o.applicable,reason:o.reason}]})}return t}function Ga(t){return{destination_airport:t.destination_airport,destination_city:t.destination_city,destination_country:t.destination_country,destination_state:t.destination_state,end_date:t.end_date,lodging_id:t.lodging_id,origin_airport:t.origin_airport,rooms:t.rooms,start_date:t.start_date,travelers:t.travelers}}function ja(){return N("partner_controlled_experiments")}var Eg=.1,df=re({name:"performance_sampling",allocations:[{percent:Eg,value:!0}]});function Bo(t=`${l}js/core/`){try{let e=Ut("resource").find(r=>r.name.includes(t));return e&&e.startTime}catch{a.error(new pt("Unable to get start time: Browser does not support PerformanceResourceTiming interface"));return}}function bg(){try{let t=Ut("resource").find(e=>e.name.includes("gtm.js"));return t&&t.startTime}catch{a.error(new pt("Unable to get start time: Browser does not support PerformanceResourceTiming interface"));return}}function lf(){try{let t=Ut("resource").find(e=>e.name.includes(`${l}js/core/`));if(t){let{name:e}=t;if(e.includes("shopify-init"))return"SHOPIFY";if(e.includes("source=gtm"))return"GTM"}return"JS"}catch{a.error(new pt("Unable to get start time: Browser does not support PerformanceResourceTiming interface"));return}}function Sg(){let t=Bo(),e=lf();if(t&&e==="GTM"){let r=bg();if(r)return t-r}}function Pg(){try{let t=Ut("resource").find(e=>e.name.includes("https://api.blackcrow.ai/v1/events/view"));return t&&t.startTime}catch{a.error(new pt("Unable to get time to view request: Browser does not support PerformanceResourceTiming interface"));return}}function pf(){if(df){let t=Bo(),e=lf()||"unknown",r=e==="GTM"?Sg()||"unknown":"N/A";t&&ce(`Initial script load after ${t} ms`,{"script.start_time":t,"script.load_method":e,"script.time_since_gtm_start":r,"view.url":N("page_url")||k(),"view.referrer":N("page_referrer_url")||xe()})}}function mf(){if(df){let t=Pg()-Bo();t&&ce(`Time to initiate view request: ${t} ms`,{"script.time_to_view":t,"view.url":N("page_url")||k(),"view.referrer":N("page_referrer_url")||xe()})}}function gf(){return{nb:{active:!!window.Northbeam},tw:{active:!!window.TriplePixel},bt:{active:!!window.edgetag},rb:{active:!!window.Rebuy},np:{active:!!window.fetchNovelSession},yp:{active:!!window.Yotpo},jm:{active:!!window.judgeme},lx:{active:!!window.LOOX},oke:{active:!!window.okeConnectApi}}}var H={VIEW:"view",PURCHASE:"purchase",DELAYED_PURCHASE:"delayed_purchase",BAD_ACTOR_TIMEOUT:"bad_actor_timeout",BAD_ACTOR_BEFOREUNLOAD:"bad_actor_beforeunload",PWO_IMPR:"pwo_impression",PWO_EMAIL_LEAD:"pwo_email_lead",PWO_SMS_LEAD:"pwo_sms_lead",PWO_CLOSE:"pwo_close",PWO_OPEN_ATTEMPT:"pwo_open_attempt",PWO_DECISION:"pwo_decision",PRED_WELCOME_DECISION:"pred_welcome_decision",EXIT_INTENT:"exit_intent",SITE_SPEED_BUCKETING:"site_speed_bucketing",SITE_SPEED_FID_METRIC:"site_speed_fid_metric",SITE_SPEED_LCP_METRIC:"site_speed_lcp_metric"};function Mn(){return{api_client_type:"JS",api_client_version:"15344",api_client_source:ji()}}function mt(t){let e=N(`custom_${t}`);return typeof e=="object"?Array.isArray(e)?String(e):JSON.stringify(e):e}function xg(t,...e){return t=t||{},S(e,r=>{S(r,(o,n)=>{(o||o===0||o===!1)&&(t[n]=o)})}),t}function Tg(){return{coupon:N("coupon"),shipping_method:N("shipping_method"),shipping_price:N("shipping_price"),total_price:N("total_price"),zip_code:N("zip_code"),custom_1:mt(1),custom_2:mt(2),custom_3:mt(3),custom_4:mt(4),custom_5:mt(5),custom_6:mt(6),custom_7:mt(7),custom_8:mt(8),custom_9:mt(9),custom_10:mt(10),traffic_groups:N("traffic_groups"),partner_controlled_experiments:ja(),referrer_source:N("referrer_source"),referrer_medium:N("referrer_medium"),referrer_campaign:N("referrer_campaign"),referrer_term:N("referrer_term"),cart:N("cart"),currency:N("currency"),is_logged_in_user:N("user_is_logged_in"),user_has_subscription:N("user_has_subscription")}}async function Ag(t){try{let e=await ze();return{metadata:Mn(),build:"15344",site_name:d,custom_dimensions:N("custom_dimensions"),device_info:ye(),device_width:Bu(),device_height:$u(),page_id:t,page_url:N("page_url")||k(),page_referrer_url:N("page_referrer_url")||xe(),page_title:N("page_title")||Vr(),page_time:xa(),visitor_id:e.id,internal_id:Pt(),member_id:N("member_id"),history_id:await Va(),user_identifiers:await Ba(),user_metadata:{visitor_id:{source:e.source,name:e.name,fallback_used:e.fallback}},bundle_load_start:Bo(),attr:gf()}}catch(e){return a.error(e),{}}}function Ig(t){return t?["view","purchase","delayed_purchase"].includes(t):!0}function kg(t){return t?["view","purchase"].includes(t):!0}function Cg(t){return t?t==="purchase":!0}var Og={travel:Ga};function Ng(){let t={};return S(Og,(e,r)=>{let o=N(`${r}`);o&&(t[r]=e(o))}),t}function Rg(t){["custom_dimensions","event_id"].forEach(r=>{t[r]===void 0&&(t[r]="")})}function Lg(t){return[H.PWO_DECISION,H.PWO_OPEN_ATTEMPT,H.PWO_IMPR,H.PWO_EMAIL_LEAD,H.PWO_SMS_LEAD,H.PWO_CLOSE].includes(t)}function Dg(t){return[H.SITE_SPEED_BUCKETING,H.SITE_SPEED_FID_METRIC,H.SITE_SPEED_LCP_METRIC].includes(t)}async function Ha(t,e={}){try{let r=e.page_id||pr(),o=await Ag(r);Ig(t)&&(o={...o,...Tg()},E(o,Ng(),qa())),Cg(t)&&o.purchase_type===void 0&&(o.purchase_type=""),(Lg(t)||Dg(t))&&(o={...o,...e}),Rg(o),S(o,(i,c)=>{typeof e[c]<"u"&&(o[c]=e[c])}),kg(t)||E(o,{custom_dimensions:await of()});let n=await cf(o,t,r);return xg({},o,n)}catch(r){return a.error(r),{}}}var Fg=500,za={},Ja={};function Za(){Ja={},za={}}function hf(t){return Ja[t]||0}function Mg(t){let e=!1,r=t==="view"?1:M(`config.events.${t}.dedupe.limit_per_page`);return r&&(e=hf(t)>=r),e?"limit_per_page":""}function $g(t,e){return t.startsWith("datalayer-")?"":e-(za[t]||0)<Fg?"debounce":""}async function Bg(t,e,r){try{let o="",n=e.event_id,i=M(`config.events.${t}.dedupe.time_threshold`);if(n||i){let c=await ue(zi)||{},s=c[t]||{};i&&r-(s.time||0)<parseInt(i,10)&&(o="time_threshold"),!o&&n&&n===s.id&&(o="repeat_id"),o||(c[t]={time:r,id:n},Ne(zi,c))}return o}catch(o){return a.error(o),""}}async function yf(t,e){try{let r=Date.now(),o=$g(t,r)||Mg(t)||await Bg(t,e,r);return o||(Ja[t]=hf(t)+1,za[t]=r),o}catch(r){a.error(r);return}}var Ka="EventsAPI";async function oe(t,e,r,o){try{let n=`https://api.blackcrow.ai/v1/events/${t}?`;St(d)&&(n=`https://api.sandbox.blackcrow.ai/v1/events/${t}?`);let i=await Ha(t,e),c=await yf(t,i);if(c){a.error(new Oe(`Duplicate ${t}: ${c}`,Ka));return}let s=JSON.stringify(i),u={servletName:Ka,method:"POST",cache:"no-cache",body:s};ae(`request: ${t}`,{body:s}),Me(n,u,r,o)}catch(n){a.error(new Oe(n,Ka))}}function vf(t){let e="https://api.blackcrow.ai/v1/events/platform?";St(d)&&(e="https://api.sandbox.blackcrow.ai/v1/events/platform?");let r=JSON.stringify(t);Br(e,r)}var h={START:"start",SESSION:"session",SET:"set",EXTEND:"extend",REFRESH:"refresh",PARTNER_EVENT:"partner_event",VIEW:"view",VIEW_RESPONSE:"view_response",PURCHASE:"purchase",SCORES_UPDATE:"scores_update",IDENTIFY:"identify",PWO_IMPR:"pwo_impression",PWO_EMAIL_LEAD:"pwo_email_lead",PWO_SMS_LEAD:"pwo_sms_lead",PWO_CLOSE:"pwo_close",PWO_OPEN_ATTEMPT:"pwo_open_attempt",OVERRIDES:"overrides",CLEAR_OVERRIDES:"clear_overrides",EXIT_INTENT:"exit_intent",ADD_TO_CART:"add_to_cart",INITIATE_CHECKOUT:"initiate_checkout"};var Ug=["purchase","referral","call","update_account"],Vg=["purchase","referral","call"];function _f(t){return Ug.indexOf(t)!==-1}function Wg(t){let e=t.trigger,r=t.data||{};e==="call"&&(r.purchase_type="call"),Vg.indexOf(e)!==-1&&(e=H.PURCHASE),oe(e,r)}function wf(){V("platform",h.PARTNER_EVENT,Wg)}function Ya({appName:t,eventName:e,data:r,sendFn:o}){let n={namespace:f,app_name:t,event_name:e,data:r};if(o)o(n,"*");else try{window.top.postMessage(n,"*")}catch(i){if(i instanceof DataCloneError)a.error(new pt("Attempting to post invalid message object"));else throw i}}var qg=ie("bound_events"),Gg=ie("triggered_events");function be(t,e,r,o){o=o||{},o.noCache||Gg.push(`${t}.${e}`,{data:r,onExec:o.onExec});let n=qg.get(`${t}.${e}`);S(n,i=>{Co(i,r,o.onExec)}),o.postMessage&&Ya({appName:t,eventName:e,data:r})}function F(t,e=()=>{},r=9,o=300,n=!1){try{return t()}catch(i){return r?v.setTimeout(()=>F(t,e,r-1,n?o*2:o,n),o):e(i)}}function jg(){y()||(a.postMessageEventListener&&v.removeListener(window,"message",a.postMessageEventListener),a.postMessageEventListener=t=>{let e=t.data||{};e.namespace===f&&(ae(`trigger: ${e.event_name}`,e.data),be(e.app_name||"platform",e.event_name,e.data))},v.addListener(window,"message",a.postMessageEventListener))}function jr(t){if(!t)return;let e=t.app_name||"platform",r=t.data,o=t.trigger;if(o){ae(`trigger: ${o}`,t),o===h.EXTEND?Tn(r):o===h.SET?An(r):_f(o)?be(e,h.PARTNER_EVENT,t):be(e,o,r);return}let n=t.bind;if(n){ae(`bind: ${n}`,t),V(e,n,t.callback,{origEvent:t});return}ae("unrecognized",t)}function Ef(){S(p,t=>{jr(t)})}function bf(){return F(()=>jg(),t=>a.error(t)),jr}function Xa(){bf(),a.push=jr,a.history=mu}var Sf="IntentProperties";function xt(t){return t?w(window[Sf],t):window[Sf]}function Qa(){let t=xt();if(t){let e={page_id:t.page_id,visitor_id:t.visitor_id||t.publisher_user_id,member_id:t.member_id,user_is_logged_in:t.is_logged_in_user,user_has_subscription:t.user_has_subscription,page_url:t.page_url,page_referrer_url:t.page_referrer_url,page_title:t.page_title,referrer_source:t.referrer_source,site_currency:t.site_currency,site_country:t.site_country,site_language:t.site_language,site_name:t.site_name,traffic_groups:t.traffic_groups,custom_1:t.site_custom_1,custom_2:t.site_custom_2,custom_3:t.site_custom_3,custom_4:t.site_custom_4,custom_5:t.site_custom_5,custom_6:t.site_custom_6,custom_7:t.site_custom_7};t.cart&&(e.cart=t.cart),t.travel&&(e.travel=E({},{start_date:t.travel.start_date,end_date:t.travel.end_date,origin_airport:t.travel.origin_airport,destination_airport:t.travel.destination_airport,travelers:t.travel.travelers})),jr({trigger:h.EXTEND,data:e})}}var Hg=ie("bound_events"),zg=ie("triggered_events");function es(){Hg.clear(M("config.clearBindings")),zg.clear()}function Pf(){let t=w(window,"Shopify.checkout.total_tax");if(t)return t;let e=document.querySelectorAll("[data-checkout-total-taxes-target]");return e.length?e[0].textContent.startsWith("$")?e[0].textContent.trim().substring(1):e[0].textContent.trim():"0.00"}function te(t){/complete|interactive|loaded/.test(document.readyState)?t():v.addListener(document,"DOMContentLoaded",()=>{t()})}async function ts(){try{let t=await T("cart"),e=await T(Ji);return t&&K(Ji,t),!t||!e||e!==t}catch{return!0}}function Jg(){return{total_price:xt("total_price"),coupon:xt("coupon"),shipping_method:xt("shipping_method"),shipping_price:xt("shipping_price"),zip_code:xt("zip_code")}}function rs(t){if(!t)return;let e=t.amount??0;return jt(e*100)}function xf(){if(y()){let r=window.shopifyCheckout;return r?{total_price:rs(r.totalPrice),shipping_price:rs(r.shippingLine?.price),custom_dimensions:{tax_amount:rs(r.totalTax)}}:{}}let t=ff(),e={custom_dimensions:{tax_amount:window.Shopify?Pf():void 0},total_price:window.cart_json?.total_price};return E({},t,e)}function Zg(){window.IntentProperties&&Tn(Jg()),K(cu,!0,1051200),oe(H.PURCHASE,xf())}async function os(){M("page.log_purchase")&&await ts()&&(Zg(),te(()=>{oe(H.DELAYED_PURCHASE,xf())}))}var tt="audience";function Ze(t){return pa(`apps.${t}`)}var Tf="o",Af=`${f}_audience|score_update`,ns=`${f}_score`,If=`contextData.${ns}`;function G(t){let e=Number(t);return isNaN(e)?t:e}var $="Integration not available";function X(t,e){return(r,o,n)=>{if(!r)return;function i(c){c.message===$?a.error(new A(`${t} globals not found`),{appName:o}):a.error(c)}F(()=>e(r,o,n),i)}}var is="adobe_analytics";function Yg(t,e,r){let o=w(window,"s.tl");if(typeof o=="function"){let n={contextData:{[ns]:G(t.score)},linkTrackVars:If};o(!0,Tf,Af,n),typeof r=="function"&&r(is,n);return}throw new Error($)}var as={name:is,send:X(is,Yg)};var kf="event";function B(t,e="|"){return t.filter(r=>r!=null&&r!=="").join(e)}var ss="dynamic_yield";function Xg(t){return t==="1"?"low":t==="2"?"medium":"high"}function Qg(t,e,r){let o=w(window,"DY.API"),n;t.threshold_group_count==="3"&&(n=Xg(t.score));let i=B([f,t.comparison_group.toLowerCase(),n||`score_${t.score}`]);if(typeof o=="function"){let c=G(t.score);o(kf,{name:i,properties:{}}),typeof r=="function"&&r(ss,{EVENT_PREFIX:`${f}_${e}`,score:c})}else throw new Error($)}var cs={name:ss,send:X(ss,Qg)};function Uo(t){let e=new Error(t);return e.name="ConfigDataError",e.status="warn",e.stack=ne(e.stack,1),e}function Cf(t,e){let r=encodeURIComponent(t);return e&&(r=r.replace(/%2C/g,",")),r}function Se(t,e=!0){let r=[];return S(t,(o,n)=>{if(o!=null&&o!==""){let i=typeof o;i==="function"?o=o.name:i==="object"&&(Array.isArray(o)?o=o.toString():o=JSON.stringify(o)),r.push(`${Cf(n,e)}=${Cf(o,e)}`)}}),r.join("&")}function us(t,e){return typeof t=="string"&&typeof e=="string"?t.localeCompare(e,void 0,{sensitivity:"accent"})===0:t===e}function Of(t){let e=`${t}`;return e.length===1?`0${e}`:e}function mr(t){if(t)return new Date(t?.replace(/-/g,"/"))}function $n(t,e=""){if(t)return`${t.getFullYear()}${e}${Of(t.getMonth()+1)}${e}${Of(t.getDate())}`}function eh(t){if(t&&t.formBuckets){let e=new Date,r=t.formBuckets||[],o=r.filter(i=>!i.startDate&&!i.endDate),n=r.filter(i=>i.startDate&&mr(i.startDate)<=e&&(!i.endDate||mr(i.endDate)>=e));if(n.length!==0){let i="01-Jan-2100 04:00:00 UTC";n.sort((u,m)=>mr(m.startDate)-mr(u.startDate)),n.sort((u,m)=>{let g=u.endDate||i,b=m.endDate||i;return mr(g)-mr(b)});let c=n[0].startDate,s=n[0].endDate;n=n.filter(u=>u.startDate===c&&u.endDate===s)}t.formBuckets=n.length>0?n:o}return t}function fs(t,e="PWO",r=["formBuckets","overlayBuckets","overlayBuckets_triggerBuckets","overlayBuckets_triggerBuckets_formBuckets"]){if(t?.overlaySetting===void 0||t?.overlaySetting===null)return t;let o=Ge(k());function n(c,s){let u,m;if(Array.isArray(c)&&c.length){let g=JSON.parse(JSON.stringify(c));typeof g[0].percent!="number"&&r.includes(s)&&(g[0].percent=1),typeof g[0].percent=="number"&&(u=`${e}_${s}`,m=g.map(b=>({percent:b.percent,value:{...b}})))}if(u&&m){let g=e,b=c.short_name||s;return re({name:u,allocations:m,force:o[`bcai_${g}_${b}`]})}return c}function i(c,s){if(c==null)return c;let u=Array.isArray(c)?[]:{},m;return Object.keys(c).forEach(g=>{let b=s?`${s}_${g}`:g;m=n(c[g],b),u[g]=typeof m=="object"?i(m,b):m}),u}return{...t,overlaySetting:i(eh(t.overlaySetting))}}function th(t){let e=k()?.toLowerCase();return e&&t?.length?t.find(r=>e.match(r.toLowerCase())):!1}function rh(t,e){let r=t.filter(n=>us(n.app,e));return r.length?r.find(n=>th(n.allowedUrlPatterns))||r.find(n=>!n.allowedUrlPatterns?.length)||{}:{}}function rt(t){if(t){let e=M("apps")||[];if(e)return rh(e,t)}return{}}function Bn(t){let e=rt(t).platforms||[],r=[];return e.forEach(o=>{r.push(o.platform.toLowerCase())}),r}function z(t,e){if(t&&e){let r=rt(t);if(r)return(r.platforms||[]).find(i=>us(i.platform,e))||{}}return{}}function Un(t){return t?fs(rt(t),t).overlaySetting||{}:{}}function gr(t){return t?rt(t).identitySetting||{}:{}}function Vo(t,e){let r=gr(t).platforms?.filter(i=>i.platform?.toLowerCase()===e),o=[],n=k();return n&&(o=r?.filter(i=>i.allowedUrlPatterns?.some(c=>n.includes(c)))),o.length||(o=r?.filter(i=>!i.allowedUrlPatterns?.length)),o}async function gt(t,e=10,r=300,o=!1){let n=e,i=r,c;do try{return await t()}catch(s){n-=1,n&&(await pe(i),i=o?i*2:i,c=s)}while(n);throw c}var Rf="event",Wo="owox",Vn=[];async function oh(t){let e=await Wt();if(e)t(e);else throw new Error($)}function Nf(t,e,r,o){t.cid=e,t.z=Date.now(),J(`https://google-analytics.bi.owox.com/${r}?${Se(t)}`,{method:"GET"},()=>o(Wo,t))}function nh(t,e,r){let o=window.GoogleAnalyticsObject?window[window.GoogleAnalyticsObject]:window.ga,i=z(e,Wo).tracking_id;if(typeof o=="function"){let c=v.setTimeout(()=>{a.error(new A(`${Wo} ready hook not fired`))},5e3);o(s=>{if(clearTimeout(c),i=i||s&&s.get("trackingId"),i||S(o.getAll(),u=>{let m=u.get("trackingId");if(m)return i=m,!1}),i){if(!t)return;let u=`${f}_${e}`,m=B([u,t.integration_product,t.conversion_product,t.conversion_type]),g=B([t.comparison_type,t.threshold_setter,t.threshold_group_count,t.comparison_population,t.comparison_group]);Vn.push({v:1,ni:1,t:Rf,tid:i,dl:k(),ec:m,ea:g,el:G(t.score)}),Array.isArray(Vn)&&gt(oh(b=>{let U=Vn;Vn={push:se=>{Nf(se,b,i,r)}},U.forEach(se=>{Nf(se,b,i,r)})}))}else a.error(new Uo(`${Wo} tracking id not found`))})}}var ds={eventHitType:Rf,name:Wo,send:nh};var ih=re({name:"kpi_sampling",allocations:[{percent:.1,value:!0}]});async function Tt(t,e,r){try{if(ih){let o=await ze();ce(`${r} ${e}`,{"evt.name":r,"evt.integration":e,appName:t,"usr.id":o.id,"view.url":N("page_url")||k(),"view.referrer":N("page_referrer_url")||xe()})}}catch(o){a.error(o)}}var ls={[as.name]:as,[cs.name]:cs,[ds.name]:ds};function ps(t,e,r){Tt(tt,t,e),ae(`${tt} ${e}: ${t}`,r)}function ah(t,e){ls[t]!==void 0&&e&&S(e,r=>{r.name&&ls[t].send(r,tt,(o,n)=>{ps(o,"score_push",n)})})}function sh(){let t=Ze(`${tt}.scores`);t&&t.length&&be(tt,h.SCORES_UPDATE,t,{onExec:()=>{ps(d,h.SCORES_UPDATE,t)}});let e=t?t[0]:null;if(e){let r={score:parseInt(e.score,10),comparison_group:e.comparison_group,threshold_group_count:e.threshold_group_count};be(tt,"score_update",E({},r),{onExec:()=>{ps(d,"score_update",r)}})}}function ch(t){let e=Ze(`${tt}.integrations`),r=[];return S(e,o=>{let n=o.platform;t[n]&&r.push(t[n].then(()=>{ah(n,o.scores)}))}),sh(),Promise.all(r)}var Lf={appName:tt,platforms:ls,sendAppScores:ch};function Ff(t){v.addListener(window,"message",e=>{if(e.origin&&e.origin.indexOf(".attn.tv")>0){let r=e.data.__attentive||{};r&&r.phone&&t(`+1${r.phone}`)}})}function Mf(t){v.addListener(window,"postscriptPopup",e=>{if(e.detail.type==="formSubmit"){let{phone:r}=e.detail.values;r&&t(r.includes("+")?r:`+${r}`)}})}function uh(t=()=>{}){v.addListener(window,"click",e=>{let r=e.target;if(r.classList.contains("amped-wrapper")&&r.shadowRoot){let o=r.shadowRoot.querySelector('input[type="tel"]');o&&(o.hasAttribute("data-listener-attached")||(v.addListener(o,"focusout",n=>{let i=n.target.value;i&&t(i)}),o.setAttribute("data-listener-attached","true")))}})}function $f(t){let e=document.getElementById("continue_button"),r=document.querySelectorAll("input[type=tel]");e&&r&&v.addListener(e,"click",()=>{if(r[0]){let o=r[0].value;t(o)}})}function Bf(){return w(window,"Shopify.checkout.phone")}function Uf(){let t=w(window,"_learnq");if(t&&typeof t.identify=="function")return t.identify().$phone}function fh(t){let e=t.match("\\+")?t:`+1${t}`;return e=e.replace(/^(\+)|\D/g,"$1"),e}function dh(t){return new RegExp(/^\+\d{10,14}$/g).test(t)}function hr(t){let e=fh(t);return dh(e)?qt(e):void 0}function ge(t){let e=hr(t);e&&Ne(Sn,e)}function lh(t,e=()=>{}){t.value&&e(t.value)}var Df='input[type="tel"], input[autocomplete~="tel"], input[type="text"][id*="phone" i], input[type="text"][name*="phone" i]';function Vf(t=()=>{}){let e=Oo(Df);S(e,r=>{lh(r,t)}),v.addListener(document,"focusout",r=>{let o=r.target;if(o.matches(Df)){let n=o.value;n&&t(n)}})}function Wf(t){let e=Bf()||Uf();e&&t(e),Ff(r=>{t(r)}),Mf(r=>{t(r)}),uh(r=>{t(r)}),$f(r=>{t(r)}),Vf(r=>{t(r)})}function qf(t=()=>{}){let e=Bf()||Uf();return e?(ge(e),t()):(Ff(r=>{ge(r)}),$f(r=>{ge(r)}),Vf(r=>{ge(r),t()}),Mf(r=>{ge(r)})),e}async function yr(){try{let t=await ue(Sn)||await T(Sn);return t?dr(t):void 0}catch(t){a.error(t);return}}function ph(t){let e=document.getElementById("continue_button"),r=document.getElementById("checkout_shipping_address_first_name"),o=document.getElementById("checkout_shipping_address_last_name");e&&r&&o&&v.addListener(e,"click",()=>{t(r.value,o.value)})}function Gf(){ph((t,e)=>{Ne(Qi,qt(t)),Ne(ea,qt(e))})}async function jf(){try{let t=await ue(Qi);return t?dr(t):void 0}catch(t){a.error(t);return}}async function Hf(){try{let t=await ue(ea);return t?dr(t):void 0}catch(t){a.error(t);return}}function mh(t){if(t)return t.replace(/['.,/#!$%^&*;:{}=\-_`~()]/g,"")}function Wn(t){let e=mh(t);return e?qt(e):void 0}function gh(t,e){let r=t[e];if(r){let{first_name:o,last_name:n}=r;if(n){let i={fn:o,ln:n};return o&&(i.fln=`${o} ${n}`),E({},i)}}}function zf(){let t=[],e=Ce()&&w(window,"Shopify.checkout");return e&&["billing_address","credit_card","shipping_address"].forEach(r=>{let o=gh(e,r);o&&t.push(o)}),t.length?t:void 0}function ms(t,e){let r=document.createElement(t);return Object.keys(e).forEach(n=>{r[n]=e[n]}),r}function gs(t){if(!t||!crypto||!crypto.subtle||typeof crypto.subtle.digest!="function")return Promise.resolve(void 0);let e=new TextEncoder().encode(t);return crypto.subtle.digest("SHA-256",e).then(r=>Array.from(new Uint8Array(r))).then(r=>r.map(o=>o.toString(16).padStart(2,"0")).join(""))}function qn(t){let e=Object.keys(t).map(r=>gs(t[r]).then(o=>{t[r]=o}));return Promise.all(e).then(()=>E({},t))}var hh="facebook_ads";async function hs(){try{let t=await yr(),e={em:await me(),ph:t&&t.replace(/\D/g,""),fn:await jf(),ln:await Hf()};return E({},e)}catch(t){return a.error(t),{}}}async function Jf(t,e,r,o,n){try{let i=`https://www.facebook.com/tr?id=${t}&ev=${o}&noscript=1`,c=await hs(),s=await qn(c),u=await T(lt),m=await T(Vt);return S(s,(g,b)=>{i+=`&ud[${b}]=${g}`}),S(n,(g,b)=>{i+=`&cd[${b}]=${g?.toString()}`}),r&&(i+=`&ud[external_id]=${r}`),e&&(i+=`&eid=${e}`,i+="&cdl=API_unavailable",i+="&rqm=GET",i+="&coo=false"),u&&(i+=`&fbp=${u}`),m&&(i+=`&fbc=${m}`),i}catch(i){return a.error(i),`https://www.facebook.com/tr?id=${t}&ev=${o}`}}function Zf(t,e,r){return Jf(t,void 0,void 0,e,r).then(o=>{let n=ms("img",{width:1,height:1,src:o});n.style.display="none",document&&document.body&&typeof document.body.append=="function"&&document.body.append(n)})}function Gn(t,e,r,o,n,i){return Jf(t,e,r,o,n).then(c=>{c+="&",c+=Se({dl:k(),rl:document.referrer}),F(()=>{J(c,{method:"GET"},i,s=>{throw s})},s=>a.error(new Error(`${hh} api call failed with message ${s.message}`)),9,300,!0)})}var Ht="measure";function jn(){return window.ShopifyAnalytics&&window.ShopifyAnalytics.lib&&window.ShopifyAnalytics.lib.config&&window.ShopifyAnalytics.lib.config["Facebook Pixel"]&&window.ShopifyAnalytics.lib.config["Facebook Pixel"].conversionsAPIEnabled}var Kf=0;function Yf(){return Kf+=1,Kf}function ys(){(function(t,e,r,o,n,i,c){t.fbq||(n=t.fbq=function(){n.callMethod?n.callMethod.apply(n,arguments):n.queue.push(arguments)},t._fbq||(t._fbq=n),n.push=n,n.loaded=!0,n.version="2.0",n.queue=[],i=e.createElement(r),i.async=!0,i.src=o,c=e.getElementsByTagName(r)[0],c.parentNode.insertBefore(i,c))})(window,document,"script","https://connect.facebook.net/en_US/fbevents.js")}function vs(t){return e=>{e.message===$?a.error(new A(t)):a.error(e)}}function Hn(t,e){y()||(ys(),window.fbq("init",t,e))}var qo="facebook_ads",Qf="trackCustom";function ed(t,e){window.fbq("init",t,e)}function td(t){if(typeof window.fbq!="function"||typeof window.fbq.getState!="function")throw new Error($);if(typeof window.fbq.getState().then=="function")window.fbq.getState().then(({pixels:e})=>{e&&e.length>0&&t(e)});else if(window.fbq.getState().pixels&&window.fbq.getState().pixels.length>0)t(window.fbq.getState().pixels);else throw new Error($)}function zn(){return M("facebookAccounts")||[]}function rd(t){return t===void 0?jn():t}function od(t,e){t.forEach(r=>{let o=r.pixelId,n=r.advancedMatching;if(o){let i=rd(n)?e:{};y()||ed(o,i)}})}function yh(t,e,r){let o=zn();o.length&&od(o,e),r()}function vh(t,e,r){ys();let o=zn();function n(){td(i=>{i.forEach(c=>{rd()&&ed(c.id,e)})})}F(()=>{if(typeof window.fbq!="function")throw new Error($);o.length?od(o,e):n(),r()},vs(`${qo} globals not found`))}function nd(t,e,r){return function(){typeof t=="function"&&t(qo,{eventName:e,eventObject:r})}}function _h(t,e,r,o){let n=nd(o,e,r),i=zn();i.length&&i.forEach(c=>{let s=c.pixelId;Gn(s,void 0,void 0,e,r,n)})}function wh(t,e,r,o){let n=nd(o,e,r);td(()=>{window.fbq(Qf,e,r),n()})}function Eh(t,e){zn().forEach(o=>{let n=o.pixelId;n&&Zf(n,t,e)})}function bh(t,e,r,o){return n=>(Eh(t,e),typeof o=="function"&&o(`${qo}`,{eventName:t,eventObject:e},"score_push_img_pixel"),r(n))}function Sh(t){return`${f}_${t}`}function Ph(t,e,r){let o;return t===Ht?o=B([f,r],"_"):o=B([e,r]),o}function xh(t,e){return{app_name:t,integration_product:e.integration_product,conversion_product:e.conversion_product,conversion_type:e.conversion_type,comparison_population:e.comparison_population,comparison_group:e.comparison_group,comparison_type:e.comparison_type,threshold_setter:e.threshold_setter,threshold_group_count:e.threshold_group_count,score:G(e.score),event_date:$n(new Date,"-"),eventDate:$n(new Date)}}function id(t,e){let r=Sh(t);return{eventName:Ph(t,r,e.integration_product),eventObject:xh(r,e)}}function Th(t,e,r){if(!t)return;let o=id(e,t);_h(e,o.eventName,o.eventObject,r)}function Ah(t,e,r){if(!t)return;let o=id(e,t),n=o.eventName,i=o.eventObject;F(()=>wh(e,n,i,r),bh(n,E({},i,{eventHitId:Yf()}),vs(`${qo} globals not found`),r),80,150)}function Ih(t,e,r){y()?Th(t,e,r):Ah(t,e,r)}async function Xf(t,e){try{let r=await hs();y()?yh(t,r,e):vh(t,r,e)}catch(r){a.error(r)}}var zt={eventHitType:Qf,name:qo,identify:Xf,setup:Xf,send:Ih};var _s={[zt.name]:zt};function kh(t,e,r="score_push"){Tt(Ht,t,r),ae(`${Ht} ${r}: ${t}`,e)}function Ch(t,e){_s[t]!==void 0&&e&&e.length>0?(K(xo,"scored",30),S(e,r=>{r.name&&_s[t].send(r,Ht,kh)})):K(xo,"enabled",30)}function Oh(t){let e=le("blackcrow_promising_user")||"";return t==="enabled"||t===void 0&&e.toLowerCase()==="active"||t===void 0&&k().toLowerCase().indexOf("blackcrow_promising_user%3dactive")>0}async function Nh(t){try{let e=Ze(`${Ht}.integrations`),r=await T(xo),o=[];return r==="scored"?K(xo,"scored",30):Oh(r)&&S(e,n=>{let i=n.platform;t[i]&&o.push(t[i].then(()=>{Ch(i,n.scores)}))}),Promise.all(o)}catch(e){return a.error(e),Promise.resolve([])}}var ad={appName:Ht,platforms:_s,sendAppScores:Nh};var q="pwo",sd="amped",Jn="attentive",Zn="justuno",Kn="klaviyo",Yn="postscript",cd="recart",ud="sendlane",fd="wisepops",dd="yotpo",ld="smart_id",Jt={DELAY:"delay",SESSION_VIEW_COUNT:"page_view",EXIT_INTENT:"exit_intent"};var vr=class{static getPlatformName(){return Jn}isIdentified(){return le("utm_source")==="attentive"}setup(){}isInitialized(){return!0}static getInstance(){return new vr}};function ws(){if(!window.klaviyo){window._klOnsite=window._klOnsite||[];try{window.klaviyo=new Proxy({},{get(t,e){return e==="push"?function(){let r;(r=window._klOnsite).push.apply(r,arguments)}:function(){for(var r=arguments.length,o=new Array(r),n=0;n<r;n++)o[n]=arguments[n];let i=typeof o[o.length-1]=="function"?o.pop():void 0;return new Promise(s=>{window._klOnsite.push([e].concat(o,[function(u){i&&i(u),s(u)}]))})}}})}catch{window.klaviyo=window.klaviyo||[],window.klaviyo.push=function(){let e;(e=window._klOnsite).push.apply(e,arguments)}}}}function Xn(){return A("Klaviyo globals not found.")}function Go(t){let e=window?.klaviyo?.push||window?._learnq?.push||window?._klOnsite?.push;if(typeof e=="function")return e(t);throw Xn()}function Qn(){return!!(window._klOnsite?._loaded||window._learnq?._loaded)}function ei(t,e={}){return t&&E(e,{$email:t}),e}function Es(){return window?.klaviyo?.identify||window?._learnq?.identify}function jo(t){let e=Es();return typeof e=="function"?e(t):Go(["identify",t])}function pd(){if(typeof window?.klaviyo?.isIdentified=="function")return window.klaviyo.isIdentified();if(typeof window?._learnq?.isIdentified=="function")return window._learnq.isIdentified();throw Xn()}function bs(){return window?.klaviyo?.openForm}function md(t){let e=bs();if(typeof e=="function")return e(t);throw Xn()}async function gd(){if(typeof window?.klaviyo?.account=="function")return window.klaviyo.account();if(typeof window?._learnq?.account=="function")return window._learnq.account();throw Xn()}function hd(t,e,r=500){let o,n=new v.SafeAsyncInterval(async()=>{try{let i=await T(t);if(o===void 0)o=i;else if(o&&i!==o)try{await e(i)}catch(c){a.error(c),n.stop()}finally{o=i}}catch{}},r);return n.start(),n}function ti(t,e,r=new Error("Request timed out")){let o=new Promise((n,i)=>{v.setTimeout(()=>{i(r)},e)});return Promise.race([t,o])}var _r=class extends Error{constructor(r){super(r);this.status="warn"}};function Ho(t,...e){return new Promise((r,o)=>{t(...e,n=>r(n),n=>o(n))})}function ri(t,e){return Ho(J,t,e)}var Te=class{constructor(){this.applicationName=q?.toUpperCase();this.hasSetupCompletedSuccessfully=!1}static getPlatformName(){return Kn}setupEmailListenerCallback(){te(()=>{Dn(e=>{let r=No(e);r&&jo(ei(r))})})}async sendIdentityIfUnidentified(){try{if(await this.isIdentified()===!1){let r=await me();r?jo(ei(r)):this.setupEmailListenerCallback()}}catch(e){a.error(e)}}handlePostSetup(){if(Cn()==="confirmation"){let e=hd(xn,async()=>{try{let r=await Gr();r&&(await oe("kl_purchase",{kl_cid:r}),e.stop())}catch(r){a.error(r)}});return me().then(r=>{let o=r||Ln();o&&jo(ei(o))}).catch(r=>a.error(r))}return this.sendIdentityIfUnidentified()}static isKlaviyoLoaded(){return Qn()&&typeof Es()=="function"}setup(){return Te.isKlaviyoLoaded()||ws(),new Promise((e,r)=>F(()=>{if(!Te.isKlaviyoLoaded())throw new Error(`${Te.getPlatformName()} globals not found`);this.hasSetupCompletedSuccessfully=!0,this.handlePostSetup().catch(o=>{a.error(o)}).finally(e)},()=>{let o=A(`[${this.applicationName}] ${Te.getPlatformName()} globals not found.`);a.error(o),r(o)},100))}isInitialized(){return this.hasSetupCompletedSuccessfully}setIdentifiedByKlaviyoInSession(){Q(ta,!0)}async isIdentified(){if(!this.isInitialized())throw new Error(`[${this.applicationName}] Cannot call isIdentified as ${Te.getPlatformName()} was not initialized.`);if(await j(ta))return!0;if(le("_kx"))return this.setIdentifiedByKlaviyoInSession(),!0;let r=`[${this.applicationName}] ${Te.getPlatformName()}.isIdentified() Promise did not resolve.`,o=await ti(gt(async()=>{let n=await pd();if(typeof n!="boolean")throw new Error(`[${this.applicationName}] Cannot call isIdentified as ${Te.getPlatformName()}.isIdentified() is not returning a boolean.`);return n}),4e3,new _r(r));return o===!0&&this.setIdentifiedByKlaviyoInSession(),o}async addAttributesToUserProfile(e){jo(E({},{$email:await me(),$phone:await yr()},e)),e.blackcrow_identified&&(Go(["track","Black Crow Identified"]),await this.callServerEvent(e).catch(r=>a.error(r)))}async callServerEvent(e){let r=await gd(),o=await yr(),n=await me(),i={method:"POST",headers:{accept:"application/json",revision:"2023-12-15","content-type":"application/json"},body:JSON.stringify({data:{type:"event",attributes:{properties:{},time:new Date().toISOString(),metric:{data:{type:"metric",attributes:{name:"Black Crow Identified"}}},profile:{data:{type:"profile",attributes:E({email:n,phone_number:o},{properties:{...e}})}}}}})};return ri(`https://a.klaviyo.com/client/events/?company_id=${r}`,i)}static getInstance(){return new Te}};var Zt=class{constructor(){this.applicationName=q?.toUpperCase();this.initialized=!1}static getPlatformName(){return sd}setup(){return this.initialized||(V("platform",h.PWO_CLOSE,e=>{e.rendered_form_id===window.__bcai_amped_trigger&&delete window.__bcai_amped_trigger}),this.initialized=!0),Promise.resolve()}isInitialized(){return this.initialized}triggerOverlay(e){let r=Number(e);if(Number.isNaN(r))throw new Error(`[${this.applicationName}] Cannot trigger overlay for ${Zt.getPlatformName()} due to an invalid formId: ${e}`);window.__bcai_amped_trigger=r}static getInstance(){return new Zt}};function he(t,e){a.push({trigger:t,data:e})}function Pe(t,e,r){let o={};return r&&(o.em=lr(r)),e&&(o.ph=hr(e)),E({},t,o)}var Rh=new Map([["OPEN",h.PWO_IMPR],["CLOSE",h.PWO_CLOSE],["EMAIL_LEAD",h.PWO_EMAIL_LEAD],["LEAD",h.PWO_SMS_LEAD]]);function yd(t){return Rh.get(t)}var Kt=class{constructor(){this.windowListenerRegistered=!1;this.applicationName=q?.toUpperCase();this.hasSetupCompletedSuccessfully=!1;this.observedEvents={}}static getPlatformName(){return Jn}setup(){return this.observedEvents={},this.windowListenerRegistered||(this.windowListenerRegistered=!0,v.addListener(window,"message",e=>{if(e.origin&&e.origin.indexOf(".attn.tv")!==-1){let r=e.data.__attentive||{};if(r&&yd(r.action)){let{action:o,creativeId:n,phone:i,email:c}=r,s=this.observedEvents[n];if(s?.includes(o))return;this.observedEvents[n]=s?[...s,o]:[o];let u=yd(o);u===h.PWO_EMAIL_LEAD&&c&&Y(c),u===h.PWO_SMS_LEAD&&i&&ge(i),u&&he(u,Pe({rendered_form_id:n},i,c))}}})),new Promise((e,r)=>F(()=>{if(typeof window.__attentive?.trigger!="function")throw new Error(`${Kt.getPlatformName()} globals not found`);e()},()=>{let o=A(`[${this.applicationName}] ${Kt.getPlatformName()} globals not found.`);a.error(o),r(o)},100)).then(()=>{this.hasSetupCompletedSuccessfully=!0})}triggerOverlay(e){if(!this.isInitialized())throw new Error(`[${this.applicationName}] Cannot trigger overlay ${e} as ${Kt.getPlatformName()} was not initialized.`);if(!window?.__attentive)throw new Error(`[${this.applicationName}] Cannot trigger overlay ${e} as ${Kt.getPlatformName()} global is missing.`);delete this.observedEvents[e],window.__attentive.trigger(null,null,null,e)}getOverlayNode(){let e=document.querySelectorAll(Kt.DEFAULT_OVERLAY_SELECTOR);if(e.length!==0){if(e.length>1)throw new Error(`[${this.applicationName}] Expected exactly one matching Attentive overlay container but found ${e?.length}.`);return e[0]}}isInitialized(){return this.hasSetupCompletedSuccessfully}static getInstance(){return new Kt}},Hr=Kt;Hr.DEFAULT_OVERLAY_SELECTOR="[id=attentive_overlay]";function zo(t,e){if(typeof e!="function")return;let r=XMLHttpRequest.prototype.open;XMLHttpRequest.prototype.open=function(...o){try{o[1]?.match(t)&&e&&v.addListener(this,"load",()=>{this.responseType===""||this.responseType==="text"?e(this.responseText):this.responseType==="json"&&e(JSON.stringify(this.response))})}catch{a.error(new Oe(`XHR Sniffer Error For URL: ${t}`))}return r.apply(this,o)}}function oi(t,e){let r=XMLHttpRequest.prototype.open;XMLHttpRequest.prototype.open=function(...o){try{o[1]?.match(t)&&e(o)}catch{a.error(new Oe(`XHR Intercept Error For URL: ${t}`))}return r.apply(this,o)}}var ot=class{constructor(){this.applicationName=q?.toUpperCase();this.observedEvents={};this.hasSetupCompletedSuccessfully=!1}static getPlatformName(){return Zn}hasEventBeenObserved(e,r){if(r===h.PWO_IMPR&&e.length===0){if(ot.xhrImpressionCount<=ot.loadImpressionCount)return!0;a.error(A(`[${this.applicationName}] ${ot.getPlatformName()} - Impression event not observed from load ju_windowevent.`))}return this.observedEvents[e]?.includes(r)}addToObservedEvents(e,r){if(e){let o=this.observedEvents[e];this.observedEvents[e]=o?[...o,r]:[r]}}handleEvent(e,r,o,n){this.hasEventBeenObserved(e,r)||(this.addToObservedEvents(e,r),he(r,Pe({rendered_form_id:e},o,n)))}getJustunoApp(){if(!window.juapp){let e=(...r)=>{let o=window?.juapp?.q||[];window.juapp&&(window.juapp.q=o),o.push(r)};window.juapp=e}return window.juapp}setup(){return this.observedEvents={},window.ju_windowevent=(e,r)=>{e==="load"&&(ot.loadImpressionCount+=1,this.handleEvent(r,h.PWO_IMPR)),e==="unload"&&this.handleEvent(r,h.PWO_CLOSE)},oi("(justuno.com|jst.ai)/api/analytics/impression",()=>{ot.xhrImpressionCount+=1,this.handleEvent("",h.PWO_IMPR)}),this.getJustunoApp()("trackFunc","engagement",(e,r,o,n,i,c)=>{let s=c.find(u=>u.name==="phone_number"&&u.value.length>0)?.value;s?(ge(s),this.handleEvent(n,h.PWO_SMS_LEAD,s,e)):e&&(Y(e),this.handleEvent(n,h.PWO_EMAIL_LEAD,void 0,e))}),new Promise((e,r)=>F(()=>{throw window.ju_loadiframe&&typeof window.ju_loadiframe=="function"&&window.ju_initialized&&(this.hasSetupCompletedSuccessfully=!0,e()),new Error(`${ot.getPlatformName()} globals not found`)},()=>{let o=A(`[${this.applicationName}] ${ot.getPlatformName()} globals not found.`);a.error(o),r(o)},100))}isInitialized(){return this.hasSetupCompletedSuccessfully}triggerOverlay(e){if(!this.isInitialized()||!window.ju_loadiframe)throw new Error(`[${this.applicationName}] Cannot call triggerOverlay as ${ot.getPlatformName()} was not initialized.`);delete this.observedEvents[e],window.ju_loadiframe({campaign_id:e??""})}static getInstance(){return new ot}},wr=ot;wr.loadImpressionCount=0,wr.xhrImpressionCount=0;function Lh(t){let e=t.type,r=t?.metaData,o=null;switch(e){case"open":o=h.PWO_IMPR;break;case"submit":r?.$email&&(o=h.PWO_EMAIL_LEAD,Y(r.$email));break;case"stepSubmit":r?.$phone_number&&(o=h.PWO_SMS_LEAD,ge(r.$phone_number));break;case"close":o=h.PWO_CLOSE;break;default:break}return o}var Dh=["open","embedOpen","close","redirectedToUrl","submit","stepSubmit"],nt=class{constructor(){this.applicationName=q?.toUpperCase();this.hasSetupCompletedSuccessfully=!1;this.observedEvents={}}hasEventBeenObserved(e,r){return r&&this.observedEvents[e]?.includes(r)}addToObservedEvents(e,r){let o=this.observedEvents[e];this.observedEvents[e]=o?[...o,r]:[r]}handleEvent(e){let r=e?.formId,o=Lh(e);this.hasEventBeenObserved(r,o)||(this.addToObservedEvents(r,o),he(o,Pe({rendered_form_id:r},e?.metaData?.$phone_number,e?.metaData?.$email)),o===h.PWO_EMAIL_LEAD&&Go(["track","Welcome Form Submit"]))}setup(){return this.observedEvents={},v.addListener(window,"klaviyoForms",e=>{e.detail&&Dh.includes(e.detail.type)&&this.handleEvent(e.detail)}),new Promise((e,r)=>F(()=>{if(!Qn()||typeof bs()!="function")throw new Error(`${nt.getPlatformName()} globals not found`);this.hasSetupCompletedSuccessfully=!0,e()},()=>{let o=A(`[${this.applicationName}] ${nt.getPlatformName()} globals not found.`);a.error(o),r(o)},100))}isInitialized(){return this.hasSetupCompletedSuccessfully}triggerOverlay(e){if(!this.isInitialized())throw new Error(`[${this.applicationName}] Cannot call triggerOverlay as ${nt.getPlatformName()} was not initialized.`);delete this.observedEvents[e],md(e)}getOverlayNode(e=""){if(e==="")return;let r=document.querySelectorAll(`form[data-testid=klaviyo-form-${e}]`);if(r.length===0)return;if(r.length>1)throw new Error(`[${this.applicationName}] Expected exactly one matching ${nt.getPlatformName()} form but found ${r?.length}. Form ID: ${e}`);let o=r[0];function n(i){return i instanceof HTMLBodyElement}for(;o&&!n(o.parentElement);)o=o?.parentNode||void 0;return o}static getPlatformName(){return Kn}static getInstance(){return new nt}};async function $e(t,e=2e3,r=100){let o=Date.now()+e,n=t();for(;!n&&Date.now()<o;)await pe(r),n=t();return n}var ht=class{constructor(){this.applicationName=q?.toUpperCase();this.observedEvents={};this.hasSetupCompletedSuccessfully=!1}static getPlatformName(){return Yn}hasEventBeenObserved(e,r){return this.observedEvents[e]?.includes(r)}addToObservedEvents(e,r){if(e){let o=this.observedEvents[e];this.observedEvents[e]=o?[...o,r]:[r]}}handleEvent(e,r,o,n){this.hasEventBeenObserved(e,r)||(this.addToObservedEvents(e,r),he(r,Pe({rendered_form_id:e},o,n)))}async setup(){if(this.observedEvents={},!await $e(()=>typeof window.postscript?.popups?.open=="function",5*60*1e3)){let r=A(`[${this.applicationName}] ${ht.getPlatformName()} globals not found.`);throw a.error(r),r}v.addListener(window,"postscriptPopup",r=>{if(r.detail.type==="formSubmit"){let{values:o,popupId:n}=r.detail;o?.email&&o.email.length&&(Y(o.email),this.handleEvent(n.toString(),h.PWO_EMAIL_LEAD,o.phone,o.email)),o?.phone&&o.phone.length&&(ge(o.phone),this.handleEvent(n.toString(),h.PWO_SMS_LEAD,o.phone,o.email))}}),this.hasSetupCompletedSuccessfully=!0}isInitialized(){return this.hasSetupCompletedSuccessfully}triggerOverlay(e){if(!this.isInitialized())throw new Error(`[${this.applicationName}] Cannot call triggerOverlay as ${ht.getPlatformName()} was not initialized.`);let r=Number(e);if(Number.isNaN(r))throw new Error(`[${this.applicationName}] Cannot trigger overlay for ${ht.getPlatformName()} due to an invalid formId: ${e}`);delete this.observedEvents[e],window.postscript?.popups?.open(r,{activePopupBehavior:"ALWAYS_DISMISS",respectPopupStatus:!1})}static getInstance(){return new ht}};function Ss(t){try{t instanceof Error&&t.stack&&(t.stack=ou(t.stack))}catch{}}function vd(t){return typeof t=="string"?t:t instanceof Request?t.url??"":""}function Jo(t,e){if(typeof e!="function")return;let r=window.fetch;window.fetch=(...o)=>r.apply(this,o).then(n=>{try{vd(o[0]).match(t)&&e(n.clone())}catch(i){a.error(new Oe(`Fetch Sniffer for "${t}" failing with "${i?.message}" possibly due to unexpected ${o}.`))}return n}).catch(n=>{throw Ss(n),n})}function zr(t,e,r){let o=window.fetch;window.fetch=function(...n){try{if(vd(n[0]).match(t)){if(r)return o.apply(this,n).then(v.setTimeout(()=>e(n),500)).catch(i=>{throw Ss(i),i});e(n)}}catch{a.error(new Oe(`Fetch Intercept Error For URL: ${t}`))}return o.apply(this,n).catch(i=>{throw Ss(i),i})}}var yt=class{constructor(){this.applicationName=q?.toUpperCase();this.observedEvents={};this.hasSetupCompletedSuccessfully=!1}static getPlatformName(){return cd}hasEventBeenObserved(e,r){return this.observedEvents[e]?.includes(r)}addToObservedEvents(e,r){if(e){let o=this.observedEvents[e];this.observedEvents[e]=o?[...o,r]:[r]}}handleEvent(e,r,o,n){this.hasEventBeenObserved(e,r)||(this.addToObservedEvents(e,r),he(r,Pe({rendered_form_id:e},o,n)))}async setup(){if(this.observedEvents={},!await $e(()=>window?._recart?.isReady(),6e3)){let r=A(`[${this.applicationName}] ${yt.getPlatformName()} globals not found.`);throw a.error(r),r}zr(/https:\/\/api.recart.com\/tracking\/v1\/.*\/optin-context\/.*/gm,r=>{try{let o=r[1]?.body;if(!o)return;let n=JSON.parse(o);n?.optinToolId&&(this.optinToolId=n.optinToolId,this.handleEvent(n.optinToolId,h.PWO_IMPR)),n?.email&&this.optinToolId&&(Y(n.email),this.handleEvent(this.optinToolId,h.PWO_EMAIL_LEAD,n.phoneNumber,n.email)),n?.phoneNumber&&this.optinToolId&&(ge(n.phoneNumber),this.handleEvent(this.optinToolId,h.PWO_SMS_LEAD,n.phoneNumber,n.email))}catch(o){a.error(A(`[${this.applicationName}] ${yt.getPlatformName()} could not process impressions event. ${o?.message}`))}},!1),this.hasSetupCompletedSuccessfully=!0}isInitialized(){return this.hasSetupCompletedSuccessfully}triggerOverlay(e){if(!this.isInitialized()||!window?._recart?.showOptinTool)throw new Error(`[${this.applicationName}] Cannot call triggerOverlay as ${yt.getPlatformName()} was not initialized.`);delete this.observedEvents[e],window._recart.showOptinTool(e)}static getInstance(){return new yt}};var Ke=class{constructor(){this.applicationName=q?.toUpperCase();this.observedEvents={};this.hasSetupCompletedSuccessfully=!1}static getPlatformName(){return ud}hasEventBeenObserved(e,r){return this.observedEvents[e]?.includes(r)}addToObservedEvents(e,r){if(e){let o=this.observedEvents[e];this.observedEvents[e]=o?[...o,r]:[r]}}handleEvent(e,r,o,n){this.hasEventBeenObserved(e,r)||(this.addToObservedEvents(e,r),he(r,Pe({rendered_form_id:e},o,n)))}static async loadSendlane(){return window._Sendlane?Promise.resolve():(window._Sendlane=window._Sendlane||[],new Promise((e,r)=>{try{let o=document.createElement("script");o.src="https://sendlane.com/scripts/pusher.js",o.async=!0,o.onload=()=>{e()},document.getElementsByTagName("head")[0]?.appendChild(o)}catch(o){r(o)}}))}static isSendlaneLoaded(){return typeof window._Sendlane?.push=="function"&&window._Sendlane?.baseUrl}async setup(){try{window.addEventListener("sendlaneForms",r=>{try{if(!(r instanceof CustomEvent))throw new Error("Invalid Sendlane event");switch(r.detail.type){case"open":this.handleEvent(r.detail.form_key,h.PWO_IMPR);break;case"close":this.handleEvent(r.detail.form_key,h.PWO_CLOSE);break;case"submit":let{email:o,phone:n,isSubmitSuccess:i}=r.detail.metaData;i&&o&&No(o)&&(Y(o),this.handleEvent(r.detail.form_key,h.PWO_EMAIL_LEAD,void 0,o)),i&&n&&this.handleEvent(r.detail.form_key,h.PWO_SMS_LEAD,n);break}}catch(o){a.error(o)}}),this.observedEvents={};let e=A(`[${this.applicationName}] ${Ke.getPlatformName()} globals not found.`);if(window._Sendlane||await ti(Ke.loadSendlane(),5e3,e),Ke.isSendlaneLoaded())this.hasSetupCompletedSuccessfully=!0;else throw e}catch(e){throw a.error(e),e}}isInitialized(){return this.hasSetupCompletedSuccessfully}triggerOverlay(e){if(!this.isInitialized())throw new Error(`[${this.applicationName}] Cannot call triggerOverlay as ${Ke.getPlatformName()} was not initialized.`);delete this.observedEvents[e],window._Sendlane?.push({form_key:e}),$e(()=>window._Sendlane?.openForm).then(()=>{window._Sendlane?.openForm?window._Sendlane.openForm(e):a.error(`${Ke.getPlatformName()} failed to trigger since openForm was not found.`)})}static getInstance(){return new Ke}};var Fh=new Map([["before-popup-display",h.PWO_IMPR],["before-form-submit",h.PWO_EMAIL_LEAD],["after-popup-close",h.PWO_CLOSE]]),It=class{constructor(){this.applicationName=q?.toUpperCase();this.observedEvents={};this.hasSetupCompletedSuccessfully=!1}static getPlatformName(){return fd}hasEventBeenObserved(e,r){return this.observedEvents[e]?.includes(r)}addToObservedEvents(e,r){if(e){let o=this.observedEvents[e];this.observedEvents[e]=o?[...o,r]:[r]}}handleEvent(e,r,o,n){this.hasEventBeenObserved(e,r)||(this.addToObservedEvents(e,r),he(r,Pe({rendered_form_id:e},o,n)))}addWisepopsEventListeners(){Fh.forEach((e,r)=>{window?.wisepops&&(e===h.PWO_EMAIL_LEAD?window.wisepops("listen",r,o=>{let n=o?.target?.elements.email?.value;n&&Y(n),this.handleEvent(o?.detail?.popup?.id?.toString(),e,void 0,n)}):window.wisepops("listen",r,o=>{this.handleEvent(o?.detail?.popup?.id?.toString(),e)}))})}async setup(){if(this.observedEvents={},!await $e(()=>{if(typeof window?.wisepops=="function")return window?.wisepops},5e3)){let r=A(`[${this.applicationName}] ${It.getPlatformName()} globals not found.`);throw a.error(r),r}this.addWisepopsEventListeners(),this.hasSetupCompletedSuccessfully=!0}isInitialized(){return this.hasSetupCompletedSuccessfully}triggerOverlay(e){if(!this.isInitialized()||!window?.wisepops)throw new Error(`[${this.applicationName}] Cannot call triggerOverlay as ${It.getPlatformName()} was not initialized.`);delete this.observedEvents[e],window.wisepops("event",`trigger-${e}`)}static getInstance(){return new It}};var kt=class{constructor(){this.applicationName=q.toUpperCase();this.hasSetupCompletedSuccessfully=!1;this.observedEvents={}}static getPlatformName(){return dd}hasEventBeenObserved(e,r){return this.observedEvents[e]?.includes(r)}addToObservedEvents(e,r){if(e){let o=this.observedEvents[e];this.observedEvents[e]=o?[...o,r]:[r]}}handleEvent(e,r,o,n){this.hasEventBeenObserved(e,r)||(this.addToObservedEvents(e,r),he(r,Pe({rendered_form_id:e},o,n)))}setup(){return zr(/.*\/forms-impressions.*/gm,e=>{try{let r=e[1]?.body;if(!r)return;let{tool_id:o}=JSON.parse(r);o&&this.handleEvent(o,h.PWO_IMPR)}catch(r){a.error(A(`[${this.applicationName}] ${kt.getPlatformName()} could not process impressions event. ${r?.message}`))}},!1),te(()=>{v.addListener(document,"smsbump-custom-form-event",e=>{let{form_id:r,format_phone:o,phone:n,email:i,event:c}=e?.detail;c==="form_submit"&&(i&&(Y(i),this.handleEvent(r,h.PWO_EMAIL_LEAD,o||n,i)),(o||n)&&(ge(o||n),this.handleEvent(r,h.PWO_SMS_LEAD,o||n,i)))})}),this.hasSetupCompletedSuccessfully=!0,Promise.resolve()}createTriggeringElement(){this.blackCrowFormTriggeringElement=document.createElement("div"),this.blackCrowFormTriggeringElement.style.width="0",this.blackCrowFormTriggeringElement.style.height="0",this.blackCrowFormTriggeringElement.style.opacity="0",this.blackCrowFormTriggeringElement.style.pointerEvents="none",document.body.appendChild(this.blackCrowFormTriggeringElement)}triggerOverlay(e){if(this.blackCrowFormTriggeringElement||this.createTriggeringElement(),!this.blackCrowFormTriggeringElement||!this.isInitialized())throw new Error(`[${this.applicationName}] Cannot call triggerOverlay as ${kt.getPlatformName()} was not initialized.`);this.blackCrowFormTriggeringElement.id=`bcai_${e}`;let r=new MouseEvent("mousedown",{view:window,bubbles:!0,cancelable:!0});delete this.observedEvents[e],this.blackCrowFormTriggeringElement.dispatchEvent(r)}getTriggerElement(){if(!(!this.blackCrowFormTriggeringElement||!this.isInitialized()))return this.blackCrowFormTriggeringElement}isInitialized(){return this.hasSetupCompletedSuccessfully}static getInstance(){return new kt}};var it=class{constructor(){this.applicationName=q?.toUpperCase();this.hasSetupCompletedSuccessfully=!1}static getPlatformName(){return Yn}static isPostscriptLoaded(){return typeof window?.postscript?.getSubscriberId=="function"}setup(){return new Promise((e,r)=>F(()=>{if(!it.isPostscriptLoaded())throw new Error(`${it.getPlatformName()} globals not found`);this.hasSetupCompletedSuccessfully=!0,e()},()=>{let o=A(`[${this.applicationName}] ${it.getPlatformName()} globals not found.`);a.error(o),r(o)},100))}isInitialized(){return this.hasSetupCompletedSuccessfully}isIdentified(){if(!this.isInitialized())throw new Error(`[${this.applicationName}] Cannot call isIdentified as ${it.getPlatformName()} was not initialized.`);return!!window?.postscript?.getSubscriberId?.()}static getInstance(){return new it}};var Yt=class{constructor(){this.applicationName=q?.toUpperCase()}static getPlatformName(){return ld}async isIdentified(){try{let e=await j(Ur);return!!(e?.email_collected||e?.sms_collected)}catch(e){return a.error(new Error(`[${this.applicationName}] Error checking if user is identified by ${Yt.getPlatformName()}: ${e}`)),!1}}setup(){}isInitialized(){return!0}static getInstance(){return new Yt}};var Jr=class{static getOverlayPlatformClassByName(e){return new Map([[Hr.getPlatformName(),Hr],[Zt.getPlatformName(),Zt],[wr.getPlatformName(),wr],[nt.getPlatformName(),nt],[ht.getPlatformName(),ht],[yt.getPlatformName(),yt],[Ke.getPlatformName(),Ke],[It.getPlatformName(),It],[kt.getPlatformName(),kt]]).get(e.toLowerCase())?.getInstance()}constructor(e){if(!e)throw new Error("[PWO] No configured overlay renderer");let r=Jr.getOverlayPlatformClassByName(e);if(!r)throw new Error(`[PWO] Unrecognized overlay renderer: ${e}`);this.overlayPlatform=r,this.platformName=e}setup(){return this.overlayPlatform.isInitialized()?Promise.resolve():this.overlayPlatform.setup()}triggerOverlay(e){return this.overlayPlatform.triggerOverlay(e)}getOverlayNode(e){if(typeof this.overlayPlatform.getOverlayNode=="function")return this.overlayPlatform.getOverlayNode(e)}get name(){return this.platformName}},Zr=class{static getOverlayPlatformClassByName(e){return new Map([[Zn,Te],[vr.getPlatformName(),vr],[Te.getPlatformName(),Te],[it.getPlatformName(),it],[Yt.getPlatformName(),Yt]]).get(e.toLowerCase())}constructor(e){if(!Array.isArray(e)||!e.length)throw new Error("[PWO] No configured identity platforms");if(this.identifierPlatforms=e.map(r=>{let o=Zr.getOverlayPlatformClassByName(r?.toLowerCase());return o||a.error(new Error(`[PWO] Unrecognized identity platform: ${r}`)),o}).filter((r,o,n)=>!!r&&o===n.indexOf(r)).map(r=>r.getInstance()),!this.identifierPlatforms.length)throw new Error("[PWO] No configured identity platforms")}setup(){return Promise.all(this.identifierPlatforms.map(e=>e.isInitialized()?Promise.resolve():e.setup()))}isUserIdentified(){let e=this.identifierPlatforms.map(async r=>{try{return r.isIdentified()}catch{return!0}});return Promise.all(e).then(r=>r.some(o=>o===!0),()=>!0)}addAttributesToUserProfile(e){this.identifierPlatforms.forEach(r=>{typeof r.addAttributesToUserProfile=="function"&&r.addAttributesToUserProfile(e)})}};var Mh={subtree:!0,childList:!0};function _d(t,e){t.style.setProperty("z-index",e,"important")}function wd(t,e="relative"){t.style.setProperty("position",e)}async function Ed(t,e,r){try{if(!t||!e||!r)return;let o=r.getOverlayNode(e);if(o){let n=window.getComputedStyle(o).position;(!n||n==="static")&&wd(o),_d(o,t);return}await new Promise((n,i)=>{let c=new MutationObserver(()=>{try{let s=r.getOverlayNode(e);if(s){let u=window.getComputedStyle(s).position;(!u||u==="static")&&wd(s),_d(s,t),c.disconnect(),n()}}catch(s){c.disconnect(),i(s)}});c.observe(document.body,Mh)})}catch(o){a.error(o)}}function bd(t,e,r){if(e&&r){let o=t?.filter(({zIndex:i})=>i).map(i=>i.zIndex).sort((i,c)=>parseInt(c,10)-parseInt(i,10))[0];return o&&Number.isNaN(parseInt(o,10))?Promise.resolve():Ed(o||"2147483647",e,r)}return Promise.resolve()}var W;(function(t){t.assertEqual=n=>n;function e(n){}t.assertIs=e;function r(n){throw new Error}t.assertNever=r,t.arrayToEnum=n=>{let i={};for(let c of n)i[c]=c;return i},t.getValidEnumValues=n=>{let i=t.objectKeys(n).filter(s=>typeof n[n[s]]!="number"),c={};for(let s of i)c[s]=n[s];return t.objectValues(c)},t.objectValues=n=>t.objectKeys(n).map(function(i){return n[i]}),t.objectKeys=typeof Object.keys=="function"?n=>Object.keys(n):n=>{let i=[];for(let c in n)Object.prototype.hasOwnProperty.call(n,c)&&i.push(c);return i},t.find=(n,i)=>{for(let c of n)if(i(c))return c},t.isInteger=typeof Number.isInteger=="function"?n=>Number.isInteger(n):n=>typeof n=="number"&&isFinite(n)&&Math.floor(n)===n;function o(n,i=" | "){return n.map(c=>typeof c=="string"?`'${c}'`:c).join(i)}t.joinValues=o,t.jsonStringifyReplacer=(n,i)=>typeof i=="bigint"?i.toString():i})(W||(W={}));var xs;(function(t){t.mergeShapes=(e,r)=>({...e,...r})})(xs||(xs={}));var P=W.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Xt=t=>{switch(typeof t){case"undefined":return P.undefined;case"string":return P.string;case"number":return isNaN(t)?P.nan:P.number;case"boolean":return P.boolean;case"function":return P.function;case"bigint":return P.bigint;case"symbol":return P.symbol;case"object":return Array.isArray(t)?P.array:t===null?P.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?P.promise:typeof Map<"u"&&t instanceof Map?P.map:typeof Set<"u"&&t instanceof Set?P.set:typeof Date<"u"&&t instanceof Date?P.date:P.object;default:return P.unknown}},_=W.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),$h=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:"),Ue=class extends Error{constructor(e){super(),this.issues=[],this.addIssue=o=>{this.issues=[...this.issues,o]},this.addIssues=(o=[])=>{this.issues=[...this.issues,...o]};let r=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,r):this.__proto__=r,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){let r=e||function(i){return i.message},o={_errors:[]},n=i=>{for(let c of i.issues)if(c.code==="invalid_union")c.unionErrors.map(n);else if(c.code==="invalid_return_type")n(c.returnTypeError);else if(c.code==="invalid_arguments")n(c.argumentsError);else if(c.path.length===0)o._errors.push(r(c));else{let s=o,u=0;for(;u<c.path.length;){let m=c.path[u];u===c.path.length-1?(s[m]=s[m]||{_errors:[]},s[m]._errors.push(r(c))):s[m]=s[m]||{_errors:[]},s=s[m],u++}}};return n(this),o}toString(){return this.message}get message(){return JSON.stringify(this.issues,W.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=r=>r.message){let r={},o=[];for(let n of this.issues)n.path.length>0?(r[n.path[0]]=r[n.path[0]]||[],r[n.path[0]].push(e(n))):o.push(e(n));return{formErrors:o,fieldErrors:r}}get formErrors(){return this.flatten()}};Ue.create=t=>new Ue(t);var Zo=(t,e)=>{let r;switch(t.code){case _.invalid_type:t.received===P.undefined?r="Required":r=`Expected ${t.expected}, received ${t.received}`;break;case _.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(t.expected,W.jsonStringifyReplacer)}`;break;case _.unrecognized_keys:r=`Unrecognized key(s) in object: ${W.joinValues(t.keys,", ")}`;break;case _.invalid_union:r="Invalid input";break;case _.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${W.joinValues(t.options)}`;break;case _.invalid_enum_value:r=`Invalid enum value. Expected ${W.joinValues(t.options)}, received '${t.received}'`;break;case _.invalid_arguments:r="Invalid function arguments";break;case _.invalid_return_type:r="Invalid function return type";break;case _.invalid_date:r="Invalid date";break;case _.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(r=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(r=`${r} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?r=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?r=`Invalid input: must end with "${t.validation.endsWith}"`:W.assertNever(t.validation):t.validation!=="regex"?r=`Invalid ${t.validation}`:r="Invalid";break;case _.too_small:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:r="Invalid input";break;case _.too_big:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?r=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:r="Invalid input";break;case _.custom:r="Invalid input";break;case _.invalid_intersection_types:r="Intersection results could not be merged";break;case _.not_multiple_of:r=`Number must be a multiple of ${t.multipleOf}`;break;case _.not_finite:r="Number must be finite";break;default:r=e.defaultError,W.assertNever(t)}return{message:r}},xd=Zo;function Bh(t){xd=t}function ii(){return xd}var ai=t=>{let{data:e,path:r,errorMaps:o,issueData:n}=t,i=[...r,...n.path||[]],c={...n,path:i},s="",u=o.filter(m=>!!m).slice().reverse();for(let m of u)s=m(c,{data:e,defaultError:s}).message;return{...n,path:i,message:n.message||s}},Uh=[];function x(t,e){let r=ai({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,ii(),Zo].filter(o=>!!o)});t.common.issues.push(r)}var de=class{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,r){let o=[];for(let n of r){if(n.status==="aborted")return R;n.status==="dirty"&&e.dirty(),o.push(n.value)}return{status:e.value,value:o}}static async mergeObjectAsync(e,r){let o=[];for(let n of r)o.push({key:await n.key,value:await n.value});return de.mergeObjectSync(e,o)}static mergeObjectSync(e,r){let o={};for(let n of r){let{key:i,value:c}=n;if(i.status==="aborted"||c.status==="aborted")return R;i.status==="dirty"&&e.dirty(),c.status==="dirty"&&e.dirty(),i.value!=="__proto__"&&(typeof c.value<"u"||n.alwaysSet)&&(o[i.value]=c.value)}return{status:e.value,value:o}}},R=Object.freeze({status:"aborted"}),Td=t=>({status:"dirty",value:t}),Ae=t=>({status:"valid",value:t}),Ts=t=>t.status==="aborted",As=t=>t.status==="dirty",Ko=t=>t.status==="valid",si=t=>typeof Promise<"u"&&t instanceof Promise,I;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e?.message})(I||(I={}));var Ye=class{constructor(e,r,o,n){this._cachedPath=[],this.parent=e,this.data=r,this._path=o,this._key=n}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}},Sd=(t,e)=>{if(Ko(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let r=new Ue(t.common.issues);return this._error=r,this._error}}};function L(t){if(!t)return{};let{errorMap:e,invalid_type_error:r,required_error:o,description:n}=t;if(e&&(r||o))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:n}:{errorMap:(c,s)=>c.code!=="invalid_type"?{message:s.defaultError}:typeof s.data>"u"?{message:o??s.defaultError}:{message:r??s.defaultError},description:n}}var D=class{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return Xt(e.data)}_getOrReturnCtx(e,r){return r||{common:e.parent.common,data:e.data,parsedType:Xt(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new de,ctx:{common:e.parent.common,data:e.data,parsedType:Xt(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){let r=this._parse(e);if(si(r))throw new Error("Synchronous parse encountered promise.");return r}_parseAsync(e){let r=this._parse(e);return Promise.resolve(r)}parse(e,r){let o=this.safeParse(e,r);if(o.success)return o.data;throw o.error}safeParse(e,r){var o;let n={common:{issues:[],async:(o=r?.async)!==null&&o!==void 0?o:!1,contextualErrorMap:r?.errorMap},path:r?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Xt(e)},i=this._parseSync({data:e,path:n.path,parent:n});return Sd(n,i)}async parseAsync(e,r){let o=await this.safeParseAsync(e,r);if(o.success)return o.data;throw o.error}async safeParseAsync(e,r){let o={common:{issues:[],contextualErrorMap:r?.errorMap,async:!0},path:r?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Xt(e)},n=this._parse({data:e,path:o.path,parent:o}),i=await(si(n)?n:Promise.resolve(n));return Sd(o,i)}refine(e,r){let o=n=>typeof r=="string"||typeof r>"u"?{message:r}:typeof r=="function"?r(n):r;return this._refinement((n,i)=>{let c=e(n),s=()=>i.addIssue({code:_.custom,...o(n)});return typeof Promise<"u"&&c instanceof Promise?c.then(u=>u?!0:(s(),!1)):c?!0:(s(),!1)})}refinement(e,r){return this._refinement((o,n)=>e(o)?!0:(n.addIssue(typeof r=="function"?r(o,n):r),!1))}_refinement(e){return new We({schema:this,typeName:O.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return at.create(this,this._def)}nullable(){return Rt.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Ve.create(this,this._def)}promise(){return tr.create(this,this._def)}or(e){return Pr.create([this,e],this._def)}and(e){return xr.create(this,e,this._def)}transform(e){return new We({...L(this._def),schema:this,typeName:O.ZodEffects,effect:{type:"transform",transform:e}})}default(e){let r=typeof e=="function"?e:()=>e;return new Cr({...L(this._def),innerType:this,defaultValue:r,typeName:O.ZodDefault})}brand(){return new ci({typeName:O.ZodBranded,type:this,...L(this._def)})}catch(e){let r=typeof e=="function"?e:()=>e;return new to({...L(this._def),innerType:this,catchValue:r,typeName:O.ZodCatch})}describe(e){let r=this.constructor;return new r({...this._def,description:e})}pipe(e){return Or.create(this,e)}readonly(){return oo.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}},Vh=/^c[^\s-]{8,}$/i,Wh=/^[a-z][a-z0-9]*$/,qh=/^[0-9A-HJKMNP-TV-Z]{26}$/,Gh=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,jh=/^(?!\.)(?!.*\.\.)([A-Z0-9_+-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,Hh="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$",Ps,zh=/^(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))$/,Jh=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,Zh=t=>t.precision?t.offset?new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${t.precision}}(([+-]\\d{2}(:?\\d{2})?)|Z)$`):new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${t.precision}}Z$`):t.precision===0?t.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}Z$"):t.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?Z$");function Kh(t,e){return!!((e==="v4"||!e)&&zh.test(t)||(e==="v6"||!e)&&Jh.test(t))}var Be=class extends D{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==P.string){let i=this._getOrReturnCtx(e);return x(i,{code:_.invalid_type,expected:P.string,received:i.parsedType}),R}let o=new de,n;for(let i of this._def.checks)if(i.kind==="min")e.data.length<i.value&&(n=this._getOrReturnCtx(e,n),x(n,{code:_.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),o.dirty());else if(i.kind==="max")e.data.length>i.value&&(n=this._getOrReturnCtx(e,n),x(n,{code:_.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),o.dirty());else if(i.kind==="length"){let c=e.data.length>i.value,s=e.data.length<i.value;(c||s)&&(n=this._getOrReturnCtx(e,n),c?x(n,{code:_.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):s&&x(n,{code:_.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),o.dirty())}else if(i.kind==="email")jh.test(e.data)||(n=this._getOrReturnCtx(e,n),x(n,{validation:"email",code:_.invalid_string,message:i.message}),o.dirty());else if(i.kind==="emoji")Ps||(Ps=new RegExp(Hh,"u")),Ps.test(e.data)||(n=this._getOrReturnCtx(e,n),x(n,{validation:"emoji",code:_.invalid_string,message:i.message}),o.dirty());else if(i.kind==="uuid")Gh.test(e.data)||(n=this._getOrReturnCtx(e,n),x(n,{validation:"uuid",code:_.invalid_string,message:i.message}),o.dirty());else if(i.kind==="cuid")Vh.test(e.data)||(n=this._getOrReturnCtx(e,n),x(n,{validation:"cuid",code:_.invalid_string,message:i.message}),o.dirty());else if(i.kind==="cuid2")Wh.test(e.data)||(n=this._getOrReturnCtx(e,n),x(n,{validation:"cuid2",code:_.invalid_string,message:i.message}),o.dirty());else if(i.kind==="ulid")qh.test(e.data)||(n=this._getOrReturnCtx(e,n),x(n,{validation:"ulid",code:_.invalid_string,message:i.message}),o.dirty());else if(i.kind==="url")try{new URL(e.data)}catch{n=this._getOrReturnCtx(e,n),x(n,{validation:"url",code:_.invalid_string,message:i.message}),o.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(e.data)||(n=this._getOrReturnCtx(e,n),x(n,{validation:"regex",code:_.invalid_string,message:i.message}),o.dirty())):i.kind==="trim"?e.data=e.data.trim():i.kind==="includes"?e.data.includes(i.value,i.position)||(n=this._getOrReturnCtx(e,n),x(n,{code:_.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),o.dirty()):i.kind==="toLowerCase"?e.data=e.data.toLowerCase():i.kind==="toUpperCase"?e.data=e.data.toUpperCase():i.kind==="startsWith"?e.data.startsWith(i.value)||(n=this._getOrReturnCtx(e,n),x(n,{code:_.invalid_string,validation:{startsWith:i.value},message:i.message}),o.dirty()):i.kind==="endsWith"?e.data.endsWith(i.value)||(n=this._getOrReturnCtx(e,n),x(n,{code:_.invalid_string,validation:{endsWith:i.value},message:i.message}),o.dirty()):i.kind==="datetime"?Zh(i).test(e.data)||(n=this._getOrReturnCtx(e,n),x(n,{code:_.invalid_string,validation:"datetime",message:i.message}),o.dirty()):i.kind==="ip"?Kh(e.data,i.version)||(n=this._getOrReturnCtx(e,n),x(n,{validation:"ip",code:_.invalid_string,message:i.message}),o.dirty()):W.assertNever(i);return{status:o.value,value:e.data}}_regex(e,r,o){return this.refinement(n=>e.test(n),{validation:r,code:_.invalid_string,...I.errToObj(o)})}_addCheck(e){return new Be({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...I.errToObj(e)})}url(e){return this._addCheck({kind:"url",...I.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...I.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...I.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...I.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...I.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...I.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...I.errToObj(e)})}datetime(e){var r;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof e?.precision>"u"?null:e?.precision,offset:(r=e?.offset)!==null&&r!==void 0?r:!1,...I.errToObj(e?.message)})}regex(e,r){return this._addCheck({kind:"regex",regex:e,...I.errToObj(r)})}includes(e,r){return this._addCheck({kind:"includes",value:e,position:r?.position,...I.errToObj(r?.message)})}startsWith(e,r){return this._addCheck({kind:"startsWith",value:e,...I.errToObj(r)})}endsWith(e,r){return this._addCheck({kind:"endsWith",value:e,...I.errToObj(r)})}min(e,r){return this._addCheck({kind:"min",value:e,...I.errToObj(r)})}max(e,r){return this._addCheck({kind:"max",value:e,...I.errToObj(r)})}length(e,r){return this._addCheck({kind:"length",value:e,...I.errToObj(r)})}nonempty(e){return this.min(1,I.errToObj(e))}trim(){return new Be({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Be({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Be({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get minLength(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxLength(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}};Be.create=t=>{var e;return new Be({checks:[],typeName:O.ZodString,coerce:(e=t?.coerce)!==null&&e!==void 0?e:!1,...L(t)})};function Yh(t,e){let r=(t.toString().split(".")[1]||"").length,o=(e.toString().split(".")[1]||"").length,n=r>o?r:o,i=parseInt(t.toFixed(n).replace(".","")),c=parseInt(e.toFixed(n).replace(".",""));return i%c/Math.pow(10,n)}var vt=class extends D{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==P.number){let i=this._getOrReturnCtx(e);return x(i,{code:_.invalid_type,expected:P.number,received:i.parsedType}),R}let o,n=new de;for(let i of this._def.checks)i.kind==="int"?W.isInteger(e.data)||(o=this._getOrReturnCtx(e,o),x(o,{code:_.invalid_type,expected:"integer",received:"float",message:i.message}),n.dirty()):i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(o=this._getOrReturnCtx(e,o),x(o,{code:_.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),n.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(o=this._getOrReturnCtx(e,o),x(o,{code:_.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),n.dirty()):i.kind==="multipleOf"?Yh(e.data,i.value)!==0&&(o=this._getOrReturnCtx(e,o),x(o,{code:_.not_multiple_of,multipleOf:i.value,message:i.message}),n.dirty()):i.kind==="finite"?Number.isFinite(e.data)||(o=this._getOrReturnCtx(e,o),x(o,{code:_.not_finite,message:i.message}),n.dirty()):W.assertNever(i);return{status:n.value,value:e.data}}gte(e,r){return this.setLimit("min",e,!0,I.toString(r))}gt(e,r){return this.setLimit("min",e,!1,I.toString(r))}lte(e,r){return this.setLimit("max",e,!0,I.toString(r))}lt(e,r){return this.setLimit("max",e,!1,I.toString(r))}setLimit(e,r,o,n){return new vt({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:o,message:I.toString(n)}]})}_addCheck(e){return new vt({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:I.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:I.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:I.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:I.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:I.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:I.toString(r)})}finite(e){return this._addCheck({kind:"finite",message:I.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:I.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:I.toString(e)})}get minValue(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&W.isInteger(e.value))}get isFinite(){let e=null,r=null;for(let o of this._def.checks){if(o.kind==="finite"||o.kind==="int"||o.kind==="multipleOf")return!0;o.kind==="min"?(r===null||o.value>r)&&(r=o.value):o.kind==="max"&&(e===null||o.value<e)&&(e=o.value)}return Number.isFinite(r)&&Number.isFinite(e)}};vt.create=t=>new vt({checks:[],typeName:O.ZodNumber,coerce:t?.coerce||!1,...L(t)});var _t=class extends D{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==P.bigint){let i=this._getOrReturnCtx(e);return x(i,{code:_.invalid_type,expected:P.bigint,received:i.parsedType}),R}let o,n=new de;for(let i of this._def.checks)i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(o=this._getOrReturnCtx(e,o),x(o,{code:_.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),n.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(o=this._getOrReturnCtx(e,o),x(o,{code:_.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),n.dirty()):i.kind==="multipleOf"?e.data%i.value!==BigInt(0)&&(o=this._getOrReturnCtx(e,o),x(o,{code:_.not_multiple_of,multipleOf:i.value,message:i.message}),n.dirty()):W.assertNever(i);return{status:n.value,value:e.data}}gte(e,r){return this.setLimit("min",e,!0,I.toString(r))}gt(e,r){return this.setLimit("min",e,!1,I.toString(r))}lte(e,r){return this.setLimit("max",e,!0,I.toString(r))}lt(e,r){return this.setLimit("max",e,!1,I.toString(r))}setLimit(e,r,o,n){return new _t({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:o,message:I.toString(n)}]})}_addCheck(e){return new _t({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:I.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:I.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:I.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:I.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:I.toString(r)})}get minValue(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}};_t.create=t=>{var e;return new _t({checks:[],typeName:O.ZodBigInt,coerce:(e=t?.coerce)!==null&&e!==void 0?e:!1,...L(t)})};var Er=class extends D{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==P.boolean){let o=this._getOrReturnCtx(e);return x(o,{code:_.invalid_type,expected:P.boolean,received:o.parsedType}),R}return Ae(e.data)}};Er.create=t=>new Er({typeName:O.ZodBoolean,coerce:t?.coerce||!1,...L(t)});var Ot=class extends D{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==P.date){let i=this._getOrReturnCtx(e);return x(i,{code:_.invalid_type,expected:P.date,received:i.parsedType}),R}if(isNaN(e.data.getTime())){let i=this._getOrReturnCtx(e);return x(i,{code:_.invalid_date}),R}let o=new de,n;for(let i of this._def.checks)i.kind==="min"?e.data.getTime()<i.value&&(n=this._getOrReturnCtx(e,n),x(n,{code:_.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),o.dirty()):i.kind==="max"?e.data.getTime()>i.value&&(n=this._getOrReturnCtx(e,n),x(n,{code:_.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),o.dirty()):W.assertNever(i);return{status:o.value,value:new Date(e.data.getTime())}}_addCheck(e){return new Ot({...this._def,checks:[...this._def.checks,e]})}min(e,r){return this._addCheck({kind:"min",value:e.getTime(),message:I.toString(r)})}max(e,r){return this._addCheck({kind:"max",value:e.getTime(),message:I.toString(r)})}get minDate(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e!=null?new Date(e):null}};Ot.create=t=>new Ot({checks:[],coerce:t?.coerce||!1,typeName:O.ZodDate,...L(t)});var Yr=class extends D{_parse(e){if(this._getType(e)!==P.symbol){let o=this._getOrReturnCtx(e);return x(o,{code:_.invalid_type,expected:P.symbol,received:o.parsedType}),R}return Ae(e.data)}};Yr.create=t=>new Yr({typeName:O.ZodSymbol,...L(t)});var br=class extends D{_parse(e){if(this._getType(e)!==P.undefined){let o=this._getOrReturnCtx(e);return x(o,{code:_.invalid_type,expected:P.undefined,received:o.parsedType}),R}return Ae(e.data)}};br.create=t=>new br({typeName:O.ZodUndefined,...L(t)});var Sr=class extends D{_parse(e){if(this._getType(e)!==P.null){let o=this._getOrReturnCtx(e);return x(o,{code:_.invalid_type,expected:P.null,received:o.parsedType}),R}return Ae(e.data)}};Sr.create=t=>new Sr({typeName:O.ZodNull,...L(t)});var er=class extends D{constructor(){super(...arguments),this._any=!0}_parse(e){return Ae(e.data)}};er.create=t=>new er({typeName:O.ZodAny,...L(t)});var Ct=class extends D{constructor(){super(...arguments),this._unknown=!0}_parse(e){return Ae(e.data)}};Ct.create=t=>new Ct({typeName:O.ZodUnknown,...L(t)});var st=class extends D{_parse(e){let r=this._getOrReturnCtx(e);return x(r,{code:_.invalid_type,expected:P.never,received:r.parsedType}),R}};st.create=t=>new st({typeName:O.ZodNever,...L(t)});var Xr=class extends D{_parse(e){if(this._getType(e)!==P.undefined){let o=this._getOrReturnCtx(e);return x(o,{code:_.invalid_type,expected:P.void,received:o.parsedType}),R}return Ae(e.data)}};Xr.create=t=>new Xr({typeName:O.ZodVoid,...L(t)});var Ve=class extends D{_parse(e){let{ctx:r,status:o}=this._processInputParams(e),n=this._def;if(r.parsedType!==P.array)return x(r,{code:_.invalid_type,expected:P.array,received:r.parsedType}),R;if(n.exactLength!==null){let c=r.data.length>n.exactLength.value,s=r.data.length<n.exactLength.value;(c||s)&&(x(r,{code:c?_.too_big:_.too_small,minimum:s?n.exactLength.value:void 0,maximum:c?n.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:n.exactLength.message}),o.dirty())}if(n.minLength!==null&&r.data.length<n.minLength.value&&(x(r,{code:_.too_small,minimum:n.minLength.value,type:"array",inclusive:!0,exact:!1,message:n.minLength.message}),o.dirty()),n.maxLength!==null&&r.data.length>n.maxLength.value&&(x(r,{code:_.too_big,maximum:n.maxLength.value,type:"array",inclusive:!0,exact:!1,message:n.maxLength.message}),o.dirty()),r.common.async)return Promise.all([...r.data].map((c,s)=>n.type._parseAsync(new Ye(r,c,r.path,s)))).then(c=>de.mergeArray(o,c));let i=[...r.data].map((c,s)=>n.type._parseSync(new Ye(r,c,r.path,s)));return de.mergeArray(o,i)}get element(){return this._def.type}min(e,r){return new Ve({...this._def,minLength:{value:e,message:I.toString(r)}})}max(e,r){return new Ve({...this._def,maxLength:{value:e,message:I.toString(r)}})}length(e,r){return new Ve({...this._def,exactLength:{value:e,message:I.toString(r)}})}nonempty(e){return this.min(1,e)}};Ve.create=(t,e)=>new Ve({type:t,minLength:null,maxLength:null,exactLength:null,typeName:O.ZodArray,...L(e)});function Kr(t){if(t instanceof Z){let e={};for(let r in t.shape){let o=t.shape[r];e[r]=at.create(Kr(o))}return new Z({...t._def,shape:()=>e})}else return t instanceof Ve?new Ve({...t._def,type:Kr(t.element)}):t instanceof at?at.create(Kr(t.unwrap())):t instanceof Rt?Rt.create(Kr(t.unwrap())):t instanceof Xe?Xe.create(t.items.map(e=>Kr(e))):t}var Z=class extends D{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;let e=this._def.shape(),r=W.objectKeys(e);return this._cached={shape:e,keys:r}}_parse(e){if(this._getType(e)!==P.object){let m=this._getOrReturnCtx(e);return x(m,{code:_.invalid_type,expected:P.object,received:m.parsedType}),R}let{status:o,ctx:n}=this._processInputParams(e),{shape:i,keys:c}=this._getCached(),s=[];if(!(this._def.catchall instanceof st&&this._def.unknownKeys==="strip"))for(let m in n.data)c.includes(m)||s.push(m);let u=[];for(let m of c){let g=i[m],b=n.data[m];u.push({key:{status:"valid",value:m},value:g._parse(new Ye(n,b,n.path,m)),alwaysSet:m in n.data})}if(this._def.catchall instanceof st){let m=this._def.unknownKeys;if(m==="passthrough")for(let g of s)u.push({key:{status:"valid",value:g},value:{status:"valid",value:n.data[g]}});else if(m==="strict")s.length>0&&(x(n,{code:_.unrecognized_keys,keys:s}),o.dirty());else if(m!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{let m=this._def.catchall;for(let g of s){let b=n.data[g];u.push({key:{status:"valid",value:g},value:m._parse(new Ye(n,b,n.path,g)),alwaysSet:g in n.data})}}return n.common.async?Promise.resolve().then(async()=>{let m=[];for(let g of u){let b=await g.key;m.push({key:b,value:await g.value,alwaysSet:g.alwaysSet})}return m}).then(m=>de.mergeObjectSync(o,m)):de.mergeObjectSync(o,u)}get shape(){return this._def.shape()}strict(e){return I.errToObj,new Z({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(r,o)=>{var n,i,c,s;let u=(c=(i=(n=this._def).errorMap)===null||i===void 0?void 0:i.call(n,r,o).message)!==null&&c!==void 0?c:o.defaultError;return r.code==="unrecognized_keys"?{message:(s=I.errToObj(e).message)!==null&&s!==void 0?s:u}:{message:u}}}:{}})}strip(){return new Z({...this._def,unknownKeys:"strip"})}passthrough(){return new Z({...this._def,unknownKeys:"passthrough"})}extend(e){return new Z({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new Z({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:O.ZodObject})}setKey(e,r){return this.augment({[e]:r})}catchall(e){return new Z({...this._def,catchall:e})}pick(e){let r={};return W.objectKeys(e).forEach(o=>{e[o]&&this.shape[o]&&(r[o]=this.shape[o])}),new Z({...this._def,shape:()=>r})}omit(e){let r={};return W.objectKeys(this.shape).forEach(o=>{e[o]||(r[o]=this.shape[o])}),new Z({...this._def,shape:()=>r})}deepPartial(){return Kr(this)}partial(e){let r={};return W.objectKeys(this.shape).forEach(o=>{let n=this.shape[o];e&&!e[o]?r[o]=n:r[o]=n.optional()}),new Z({...this._def,shape:()=>r})}required(e){let r={};return W.objectKeys(this.shape).forEach(o=>{if(e&&!e[o])r[o]=this.shape[o];else{let i=this.shape[o];for(;i instanceof at;)i=i._def.innerType;r[o]=i}}),new Z({...this._def,shape:()=>r})}keyof(){return Ad(W.objectKeys(this.shape))}};Z.create=(t,e)=>new Z({shape:()=>t,unknownKeys:"strip",catchall:st.create(),typeName:O.ZodObject,...L(e)});Z.strictCreate=(t,e)=>new Z({shape:()=>t,unknownKeys:"strict",catchall:st.create(),typeName:O.ZodObject,...L(e)});Z.lazycreate=(t,e)=>new Z({shape:t,unknownKeys:"strip",catchall:st.create(),typeName:O.ZodObject,...L(e)});var Pr=class extends D{_parse(e){let{ctx:r}=this._processInputParams(e),o=this._def.options;function n(i){for(let s of i)if(s.result.status==="valid")return s.result;for(let s of i)if(s.result.status==="dirty")return r.common.issues.push(...s.ctx.common.issues),s.result;let c=i.map(s=>new Ue(s.ctx.common.issues));return x(r,{code:_.invalid_union,unionErrors:c}),R}if(r.common.async)return Promise.all(o.map(async i=>{let c={...r,common:{...r.common,issues:[]},parent:null};return{result:await i._parseAsync({data:r.data,path:r.path,parent:c}),ctx:c}})).then(n);{let i,c=[];for(let u of o){let m={...r,common:{...r.common,issues:[]},parent:null},g=u._parseSync({data:r.data,path:r.path,parent:m});if(g.status==="valid")return g;g.status==="dirty"&&!i&&(i={result:g,ctx:m}),m.common.issues.length&&c.push(m.common.issues)}if(i)return r.common.issues.push(...i.ctx.common.issues),i.result;let s=c.map(u=>new Ue(u));return x(r,{code:_.invalid_union,unionErrors:s}),R}}get options(){return this._def.options}};Pr.create=(t,e)=>new Pr({options:t,typeName:O.ZodUnion,...L(e)});var ni=t=>t instanceof Ar?ni(t.schema):t instanceof We?ni(t.innerType()):t instanceof Ir?[t.value]:t instanceof wt?t.options:t instanceof kr?Object.keys(t.enum):t instanceof Cr?ni(t._def.innerType):t instanceof br?[void 0]:t instanceof Sr?[null]:null,Qr=class extends D{_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==P.object)return x(r,{code:_.invalid_type,expected:P.object,received:r.parsedType}),R;let o=this.discriminator,n=r.data[o],i=this.optionsMap.get(n);return i?r.common.async?i._parseAsync({data:r.data,path:r.path,parent:r}):i._parseSync({data:r.data,path:r.path,parent:r}):(x(r,{code:_.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[o]}),R)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,r,o){let n=new Map;for(let i of r){let c=ni(i.shape[e]);if(!c)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(let s of c){if(n.has(s))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(s)}`);n.set(s,i)}}return new Qr({typeName:O.ZodDiscriminatedUnion,discriminator:e,options:r,optionsMap:n,...L(o)})}};function Is(t,e){let r=Xt(t),o=Xt(e);if(t===e)return{valid:!0,data:t};if(r===P.object&&o===P.object){let n=W.objectKeys(e),i=W.objectKeys(t).filter(s=>n.indexOf(s)!==-1),c={...t,...e};for(let s of i){let u=Is(t[s],e[s]);if(!u.valid)return{valid:!1};c[s]=u.data}return{valid:!0,data:c}}else if(r===P.array&&o===P.array){if(t.length!==e.length)return{valid:!1};let n=[];for(let i=0;i<t.length;i++){let c=t[i],s=e[i],u=Is(c,s);if(!u.valid)return{valid:!1};n.push(u.data)}return{valid:!0,data:n}}else return r===P.date&&o===P.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}var xr=class extends D{_parse(e){let{status:r,ctx:o}=this._processInputParams(e),n=(i,c)=>{if(Ts(i)||Ts(c))return R;let s=Is(i.value,c.value);return s.valid?((As(i)||As(c))&&r.dirty(),{status:r.value,value:s.data}):(x(o,{code:_.invalid_intersection_types}),R)};return o.common.async?Promise.all([this._def.left._parseAsync({data:o.data,path:o.path,parent:o}),this._def.right._parseAsync({data:o.data,path:o.path,parent:o})]).then(([i,c])=>n(i,c)):n(this._def.left._parseSync({data:o.data,path:o.path,parent:o}),this._def.right._parseSync({data:o.data,path:o.path,parent:o}))}};xr.create=(t,e,r)=>new xr({left:t,right:e,typeName:O.ZodIntersection,...L(r)});var Xe=class extends D{_parse(e){let{status:r,ctx:o}=this._processInputParams(e);if(o.parsedType!==P.array)return x(o,{code:_.invalid_type,expected:P.array,received:o.parsedType}),R;if(o.data.length<this._def.items.length)return x(o,{code:_.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),R;!this._def.rest&&o.data.length>this._def.items.length&&(x(o,{code:_.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),r.dirty());let i=[...o.data].map((c,s)=>{let u=this._def.items[s]||this._def.rest;return u?u._parse(new Ye(o,c,o.path,s)):null}).filter(c=>!!c);return o.common.async?Promise.all(i).then(c=>de.mergeArray(r,c)):de.mergeArray(r,i)}get items(){return this._def.items}rest(e){return new Xe({...this._def,rest:e})}};Xe.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Xe({items:t,typeName:O.ZodTuple,rest:null,...L(e)})};var Tr=class extends D{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:r,ctx:o}=this._processInputParams(e);if(o.parsedType!==P.object)return x(o,{code:_.invalid_type,expected:P.object,received:o.parsedType}),R;let n=[],i=this._def.keyType,c=this._def.valueType;for(let s in o.data)n.push({key:i._parse(new Ye(o,s,o.path,s)),value:c._parse(new Ye(o,o.data[s],o.path,s))});return o.common.async?de.mergeObjectAsync(r,n):de.mergeObjectSync(r,n)}get element(){return this._def.valueType}static create(e,r,o){return r instanceof D?new Tr({keyType:e,valueType:r,typeName:O.ZodRecord,...L(o)}):new Tr({keyType:Be.create(),valueType:e,typeName:O.ZodRecord,...L(r)})}},eo=class extends D{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:r,ctx:o}=this._processInputParams(e);if(o.parsedType!==P.map)return x(o,{code:_.invalid_type,expected:P.map,received:o.parsedType}),R;let n=this._def.keyType,i=this._def.valueType,c=[...o.data.entries()].map(([s,u],m)=>({key:n._parse(new Ye(o,s,o.path,[m,"key"])),value:i._parse(new Ye(o,u,o.path,[m,"value"]))}));if(o.common.async){let s=new Map;return Promise.resolve().then(async()=>{for(let u of c){let m=await u.key,g=await u.value;if(m.status==="aborted"||g.status==="aborted")return R;(m.status==="dirty"||g.status==="dirty")&&r.dirty(),s.set(m.value,g.value)}return{status:r.value,value:s}})}else{let s=new Map;for(let u of c){let m=u.key,g=u.value;if(m.status==="aborted"||g.status==="aborted")return R;(m.status==="dirty"||g.status==="dirty")&&r.dirty(),s.set(m.value,g.value)}return{status:r.value,value:s}}}};eo.create=(t,e,r)=>new eo({valueType:e,keyType:t,typeName:O.ZodMap,...L(r)});var Nt=class extends D{_parse(e){let{status:r,ctx:o}=this._processInputParams(e);if(o.parsedType!==P.set)return x(o,{code:_.invalid_type,expected:P.set,received:o.parsedType}),R;let n=this._def;n.minSize!==null&&o.data.size<n.minSize.value&&(x(o,{code:_.too_small,minimum:n.minSize.value,type:"set",inclusive:!0,exact:!1,message:n.minSize.message}),r.dirty()),n.maxSize!==null&&o.data.size>n.maxSize.value&&(x(o,{code:_.too_big,maximum:n.maxSize.value,type:"set",inclusive:!0,exact:!1,message:n.maxSize.message}),r.dirty());let i=this._def.valueType;function c(u){let m=new Set;for(let g of u){if(g.status==="aborted")return R;g.status==="dirty"&&r.dirty(),m.add(g.value)}return{status:r.value,value:m}}let s=[...o.data.values()].map((u,m)=>i._parse(new Ye(o,u,o.path,m)));return o.common.async?Promise.all(s).then(u=>c(u)):c(s)}min(e,r){return new Nt({...this._def,minSize:{value:e,message:I.toString(r)}})}max(e,r){return new Nt({...this._def,maxSize:{value:e,message:I.toString(r)}})}size(e,r){return this.min(e,r).max(e,r)}nonempty(e){return this.min(1,e)}};Nt.create=(t,e)=>new Nt({valueType:t,minSize:null,maxSize:null,typeName:O.ZodSet,...L(e)});var Qt=class extends D{constructor(){super(...arguments),this.validate=this.implement}_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==P.function)return x(r,{code:_.invalid_type,expected:P.function,received:r.parsedType}),R;function o(s,u){return ai({data:s,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,ii(),Zo].filter(m=>!!m),issueData:{code:_.invalid_arguments,argumentsError:u}})}function n(s,u){return ai({data:s,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,ii(),Zo].filter(m=>!!m),issueData:{code:_.invalid_return_type,returnTypeError:u}})}let i={errorMap:r.common.contextualErrorMap},c=r.data;if(this._def.returns instanceof tr){let s=this;return Ae(async function(...u){let m=new Ue([]),g=await s._def.args.parseAsync(u,i).catch(se=>{throw m.addIssue(o(u,se)),m}),b=await Reflect.apply(c,this,g);return await s._def.returns._def.type.parseAsync(b,i).catch(se=>{throw m.addIssue(n(b,se)),m})})}else{let s=this;return Ae(function(...u){let m=s._def.args.safeParse(u,i);if(!m.success)throw new Ue([o(u,m.error)]);let g=Reflect.apply(c,this,m.data),b=s._def.returns.safeParse(g,i);if(!b.success)throw new Ue([n(g,b.error)]);return b.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new Qt({...this._def,args:Xe.create(e).rest(Ct.create())})}returns(e){return new Qt({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,r,o){return new Qt({args:e||Xe.create([]).rest(Ct.create()),returns:r||Ct.create(),typeName:O.ZodFunction,...L(o)})}},Ar=class extends D{get schema(){return this._def.getter()}_parse(e){let{ctx:r}=this._processInputParams(e);return this._def.getter()._parse({data:r.data,path:r.path,parent:r})}};Ar.create=(t,e)=>new Ar({getter:t,typeName:O.ZodLazy,...L(e)});var Ir=class extends D{_parse(e){if(e.data!==this._def.value){let r=this._getOrReturnCtx(e);return x(r,{received:r.data,code:_.invalid_literal,expected:this._def.value}),R}return{status:"valid",value:e.data}}get value(){return this._def.value}};Ir.create=(t,e)=>new Ir({value:t,typeName:O.ZodLiteral,...L(e)});function Ad(t,e){return new wt({values:t,typeName:O.ZodEnum,...L(e)})}var wt=class extends D{_parse(e){if(typeof e.data!="string"){let r=this._getOrReturnCtx(e),o=this._def.values;return x(r,{expected:W.joinValues(o),received:r.parsedType,code:_.invalid_type}),R}if(this._def.values.indexOf(e.data)===-1){let r=this._getOrReturnCtx(e),o=this._def.values;return x(r,{received:r.data,code:_.invalid_enum_value,options:o}),R}return Ae(e.data)}get options(){return this._def.values}get enum(){let e={};for(let r of this._def.values)e[r]=r;return e}get Values(){let e={};for(let r of this._def.values)e[r]=r;return e}get Enum(){let e={};for(let r of this._def.values)e[r]=r;return e}extract(e){return wt.create(e)}exclude(e){return wt.create(this.options.filter(r=>!e.includes(r)))}};wt.create=Ad;var kr=class extends D{_parse(e){let r=W.getValidEnumValues(this._def.values),o=this._getOrReturnCtx(e);if(o.parsedType!==P.string&&o.parsedType!==P.number){let n=W.objectValues(r);return x(o,{expected:W.joinValues(n),received:o.parsedType,code:_.invalid_type}),R}if(r.indexOf(e.data)===-1){let n=W.objectValues(r);return x(o,{received:o.data,code:_.invalid_enum_value,options:n}),R}return Ae(e.data)}get enum(){return this._def.values}};kr.create=(t,e)=>new kr({values:t,typeName:O.ZodNativeEnum,...L(e)});var tr=class extends D{unwrap(){return this._def.type}_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==P.promise&&r.common.async===!1)return x(r,{code:_.invalid_type,expected:P.promise,received:r.parsedType}),R;let o=r.parsedType===P.promise?r.data:Promise.resolve(r.data);return Ae(o.then(n=>this._def.type.parseAsync(n,{path:r.path,errorMap:r.common.contextualErrorMap})))}};tr.create=(t,e)=>new tr({type:t,typeName:O.ZodPromise,...L(e)});var We=class extends D{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===O.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){let{status:r,ctx:o}=this._processInputParams(e),n=this._def.effect||null,i={addIssue:c=>{x(o,c),c.fatal?r.abort():r.dirty()},get path(){return o.path}};if(i.addIssue=i.addIssue.bind(i),n.type==="preprocess"){let c=n.transform(o.data,i);return o.common.issues.length?{status:"dirty",value:o.data}:o.common.async?Promise.resolve(c).then(s=>this._def.schema._parseAsync({data:s,path:o.path,parent:o})):this._def.schema._parseSync({data:c,path:o.path,parent:o})}if(n.type==="refinement"){let c=s=>{let u=n.refinement(s,i);if(o.common.async)return Promise.resolve(u);if(u instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return s};if(o.common.async===!1){let s=this._def.schema._parseSync({data:o.data,path:o.path,parent:o});return s.status==="aborted"?R:(s.status==="dirty"&&r.dirty(),c(s.value),{status:r.value,value:s.value})}else return this._def.schema._parseAsync({data:o.data,path:o.path,parent:o}).then(s=>s.status==="aborted"?R:(s.status==="dirty"&&r.dirty(),c(s.value).then(()=>({status:r.value,value:s.value}))))}if(n.type==="transform")if(o.common.async===!1){let c=this._def.schema._parseSync({data:o.data,path:o.path,parent:o});if(!Ko(c))return c;let s=n.transform(c.value,i);if(s instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:r.value,value:s}}else return this._def.schema._parseAsync({data:o.data,path:o.path,parent:o}).then(c=>Ko(c)?Promise.resolve(n.transform(c.value,i)).then(s=>({status:r.value,value:s})):c);W.assertNever(n)}};We.create=(t,e,r)=>new We({schema:t,typeName:O.ZodEffects,effect:e,...L(r)});We.createWithPreprocess=(t,e,r)=>new We({schema:e,effect:{type:"preprocess",transform:t},typeName:O.ZodEffects,...L(r)});var at=class extends D{_parse(e){return this._getType(e)===P.undefined?Ae(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};at.create=(t,e)=>new at({innerType:t,typeName:O.ZodOptional,...L(e)});var Rt=class extends D{_parse(e){return this._getType(e)===P.null?Ae(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};Rt.create=(t,e)=>new Rt({innerType:t,typeName:O.ZodNullable,...L(e)});var Cr=class extends D{_parse(e){let{ctx:r}=this._processInputParams(e),o=r.data;return r.parsedType===P.undefined&&(o=this._def.defaultValue()),this._def.innerType._parse({data:o,path:r.path,parent:r})}removeDefault(){return this._def.innerType}};Cr.create=(t,e)=>new Cr({innerType:t,typeName:O.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...L(e)});var to=class extends D{_parse(e){let{ctx:r}=this._processInputParams(e),o={...r,common:{...r.common,issues:[]}},n=this._def.innerType._parse({data:o.data,path:o.path,parent:{...o}});return si(n)?n.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new Ue(o.common.issues)},input:o.data})})):{status:"valid",value:n.status==="valid"?n.value:this._def.catchValue({get error(){return new Ue(o.common.issues)},input:o.data})}}removeCatch(){return this._def.innerType}};to.create=(t,e)=>new to({innerType:t,typeName:O.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...L(e)});var ro=class extends D{_parse(e){if(this._getType(e)!==P.nan){let o=this._getOrReturnCtx(e);return x(o,{code:_.invalid_type,expected:P.nan,received:o.parsedType}),R}return{status:"valid",value:e.data}}};ro.create=t=>new ro({typeName:O.ZodNaN,...L(t)});var Xh=Symbol("zod_brand"),ci=class extends D{_parse(e){let{ctx:r}=this._processInputParams(e),o=r.data;return this._def.type._parse({data:o,path:r.path,parent:r})}unwrap(){return this._def.type}},Or=class extends D{_parse(e){let{status:r,ctx:o}=this._processInputParams(e);if(o.common.async)return(async()=>{let i=await this._def.in._parseAsync({data:o.data,path:o.path,parent:o});return i.status==="aborted"?R:i.status==="dirty"?(r.dirty(),Td(i.value)):this._def.out._parseAsync({data:i.value,path:o.path,parent:o})})();{let n=this._def.in._parseSync({data:o.data,path:o.path,parent:o});return n.status==="aborted"?R:n.status==="dirty"?(r.dirty(),{status:"dirty",value:n.value}):this._def.out._parseSync({data:n.value,path:o.path,parent:o})}}static create(e,r){return new Or({in:e,out:r,typeName:O.ZodPipeline})}},oo=class extends D{_parse(e){let r=this._def.innerType._parse(e);return Ko(r)&&(r.value=Object.freeze(r.value)),r}};oo.create=(t,e)=>new oo({innerType:t,typeName:O.ZodReadonly,...L(e)});var Id=(t,e={},r)=>t?er.create().superRefine((o,n)=>{var i,c;if(!t(o)){let s=typeof e=="function"?e(o):typeof e=="string"?{message:e}:e,u=(c=(i=s.fatal)!==null&&i!==void 0?i:r)!==null&&c!==void 0?c:!0,m=typeof s=="string"?{message:s}:s;n.addIssue({code:"custom",...m,fatal:u})}}):er.create(),Qh={object:Z.lazycreate},O;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(O||(O={}));var ey=(t,e={message:`Input not instance of ${t.name}`})=>Id(r=>r instanceof t,e),kd=Be.create,Cd=vt.create,ty=ro.create,ry=_t.create,Od=Er.create,oy=Ot.create,ny=Yr.create,iy=br.create,ay=Sr.create,sy=er.create,cy=Ct.create,uy=st.create,fy=Xr.create,dy=Ve.create,ly=Z.create,py=Z.strictCreate,my=Pr.create,gy=Qr.create,hy=xr.create,yy=Xe.create,vy=Tr.create,_y=eo.create,wy=Nt.create,Ey=Qt.create,by=Ar.create,Sy=Ir.create,Py=wt.create,xy=kr.create,Ty=tr.create,Pd=We.create,Ay=at.create,Iy=Rt.create,ky=We.createWithPreprocess,Cy=Or.create,Oy=()=>kd().optional(),Ny=()=>Cd().optional(),Ry=()=>Od().optional(),Ly={string:t=>Be.create({...t,coerce:!0}),number:t=>vt.create({...t,coerce:!0}),boolean:t=>Er.create({...t,coerce:!0}),bigint:t=>_t.create({...t,coerce:!0}),date:t=>Ot.create({...t,coerce:!0})},Dy=R,C=Object.freeze({__proto__:null,defaultErrorMap:Zo,setErrorMap:Bh,getErrorMap:ii,makeIssue:ai,EMPTY_PATH:Uh,addIssueToContext:x,ParseStatus:de,INVALID:R,DIRTY:Td,OK:Ae,isAborted:Ts,isDirty:As,isValid:Ko,isAsync:si,get util(){return W},get objectUtil(){return xs},ZodParsedType:P,getParsedType:Xt,ZodType:D,ZodString:Be,ZodNumber:vt,ZodBigInt:_t,ZodBoolean:Er,ZodDate:Ot,ZodSymbol:Yr,ZodUndefined:br,ZodNull:Sr,ZodAny:er,ZodUnknown:Ct,ZodNever:st,ZodVoid:Xr,ZodArray:Ve,ZodObject:Z,ZodUnion:Pr,ZodDiscriminatedUnion:Qr,ZodIntersection:xr,ZodTuple:Xe,ZodRecord:Tr,ZodMap:eo,ZodSet:Nt,ZodFunction:Qt,ZodLazy:Ar,ZodLiteral:Ir,ZodEnum:wt,ZodNativeEnum:kr,ZodPromise:tr,ZodEffects:We,ZodTransformer:We,ZodOptional:at,ZodNullable:Rt,ZodDefault:Cr,ZodCatch:to,ZodNaN:ro,BRAND:Xh,ZodBranded:ci,ZodPipeline:Or,ZodReadonly:oo,custom:Id,Schema:D,ZodSchema:D,late:Qh,get ZodFirstPartyTypeKind(){return O},coerce:Ly,any:sy,array:dy,bigint:ry,boolean:Od,date:oy,discriminatedUnion:gy,effect:Pd,enum:Py,function:Ey,instanceof:ey,intersection:hy,lazy:by,literal:Sy,map:_y,nan:ty,nativeEnum:xy,never:uy,null:ay,nullable:Iy,number:Cd,object:ly,oboolean:Ry,onumber:Ny,optional:Ay,ostring:Oy,pipeline:Cy,preprocess:ky,promise:Ty,record:vy,set:wy,strictObject:py,string:kd,symbol:ny,transformer:Pd,tuple:yy,undefined:iy,union:my,unknown:cy,void:fy,NEVER:Dy,ZodIssueCode:_,quotelessJson:$h,ZodError:Ue});var Fy=["delay","page_view","exit_intent","none"],Nd=C.object({desktop:C.string(),mobile:C.string(),profile:C.string()}).partial(),Rd=C.object({name:C.string(),percent:C.number().lte(1).default(1),formConfig:Nd}).partial(),My=C.object({triggerType:C.enum(Fy),triggerCount:C.number().int(),scoreThreshold:C.number(),formConfig:Nd}).partial(),$y=C.object({name:C.string(),scoreName:C.string(),percent:C.number().lte(1).default(1),showOverlayOnATC:C.boolean(),showSecondOverlayOnExitIntent:C.boolean(),formBuckets:Rd,maxTotalOverlays:C.number().int().gte(0),triggers:C.array(My)}).partial(),By=$y.required({name:!0}),Uy=C.object({name:C.string(),percent:C.number().lte(1).default(1),triggerBuckets:By}).partial(),Vy=Uy.required({name:!0}),Wy=C.object({zIndex:C.string()}).partial(),qy=C.object({renderer:C.string().toLowerCase(),identifyPlatforms:C.array(C.string()),ignoredPagePaths:C.array(C.string()),overlayClosedCookieDuration:C.number(),version:C.coerce.number(),excludedQueryParams:C.array(C.object({name:C.string(),value:C.string()})),styleSettings:C.array(Wy),blockOverlayOnCssSelectors:C.array(C.string()),formBuckets:Rd,overlayBuckets:Vy}).partial(),Ld=qy.required({renderer:!0});var no=class{constructor(e){this.setting=Ld.parse(e)}static safeFromConfigJSON(){try{return this.isDisabled()?void 0:new no(Un(q))}catch(e){a.error(new Error(`[PWO] Error parsing overlay setting: ${e}`));return}}static fromConfigJSON(){return new no(Un(q))}static isDisabled(){return Object.keys(Un(q))?.length===0}get rendererName(){return this.setting.renderer}get identifyPlatforms(){return this.setting.identifyPlatforms}get ignoredPagePaths(){return this.setting.ignoredPagePaths}get overlayClosedCookieDuration(){return this.setting.overlayClosedCookieDuration}get version(){return this.setting.version}get excludedQueryParams(){return this.setting.excludedQueryParams}get blockOverlayOnCssSelectors(){return this.setting.blockOverlayOnCssSelectors}get styleSettings(){return this.setting.styleSettings}get formBuckets(){return this.setting.formBuckets}get overlayBuckets(){return this.setting.overlayBuckets}get triggerBuckets(){return this.setting.overlayBuckets?.triggerBuckets}get maxTotalOverlays(){return this.setting.overlayBuckets?.triggerBuckets?.maxTotalOverlays}get showSecondOverlayOnExitIntent(){return this.setting.overlayBuckets?.triggerBuckets?.showSecondOverlayOnExitIntent}get showOverlayOnATC(){return this.triggerBuckets?.showOverlayOnATC}hasExcludedUrlParams(){return!!this.setting.excludedQueryParams?.some(({name:e,value:r})=>le(e,void 0)?.toLowerCase()===r.toLowerCase())}get scoreName(){return this.triggerBuckets?.scoreName}get defaultFormConfig(){return this.setting.formBuckets?.formConfig}get triggerBucketFormConfig(){return this.setting.overlayBuckets?.triggerBuckets?.formBuckets?.formConfig}hasValidOverlayBucketFormConfig(){return this.triggerBucketFormConfig!==void 0&&Object.keys(this.triggerBucketFormConfig).length>0}extractRelevantFormConfig(){let e=this.defaultFormConfig;return this.hasValidOverlayBucketFormConfig()&&(e=this.triggerBucketFormConfig),{formId:fr(ye()).deviceType==="mobile"?e?.mobile:e?.desktop,profile:e?.profile}}get identifierNames(){return this.identifyPlatforms||[this.rendererName]}},io=no;async function Gy(){try{return Number(await T(Yi))||0}catch(t){return a.error(t),0}}async function ct(){try{return Number(await T(Xi))||0}catch(t){return a.error(t),0}}async function Dd(){try{let t=await Gy();K(Yi,t+1,1051200);let e=await ct();e<1&&be("platform",h.SESSION),K(Xi,e+1,30)}catch(t){a.error(t)}}function jy(t){te(()=>{v.addListener(document?.documentElement,"mouseleave",t)})}function Hy(t){let e=Rn(),r=Mu();if(r>0){let o=v.setInterval(()=>{let n=e-Rn();n<0&&(n=0,e=Rn()),(n/r>.3||n>4500)&&(clearInterval(o),t())},150)}}function zy(t){if(y())return;let e=r=>{r.state?.exiting&&(v.removeListener(window,"popstate",e),t())};te(async()=>{try{let r=await ct();window.history.state||(window.history.replaceState({exiting:r===1},"",window.location.href),r===1&&window.history.pushState({exiting:!1},"",window.location.href)),v.addListener(window,"popstate",e)}catch(r){a.error(r)}})}function Jy(t){Hy(t),zy(t)}function Fd(t){fr(ye()).deviceType!=="mobile"?jy(t):Jy(t)}function ui(t){let e=Ze(`${tt}.scores`)??[];return t?e.find(({name:r})=>r===t)?.score:void 0}var Lt=class{constructor(e){this.name=e}set(e,r){K(this.name,e,r)}get(){return dt(this.name)}reset(){K(this.name,"",-1)}};var ks=class{constructor(){this.SEPARATOR="|";this.overlayHistoryCookie=new Lt(fu)}get(){let e=this.overlayHistoryCookie.get();return e?e.split(this.SEPARATOR):[]}push(e){let r=this.get();r.push(e),this.overlayHistoryCookie.set(r.join(this.SEPARATOR),30)}count(e){return this.get().filter(r=>r===e).length}totalCount(){return this.get().length}},rr=class{constructor(){this.overlayClosedCookieDuration=30;this.openedOverlayEventData=[];this.history=new ks}static overlayWasClosed(){return!!rr.overlayClosedCookie.get()}static piiWasSubmitted(){return!!rr.piiSubmittedCookie.get()}static setPIISubmitCookie(){rr.piiSubmittedCookie.set("true",1051200)}closeOverlay(){this.openOverlayTriggerType=void 0}setOverlayClosedCookie(){this.isOverlayOpenedByATC()||rr.overlayClosedCookie.set("true",this.overlayClosedCookieDuration)}closeOverlayAndSetCookie(){this.closeOverlay(),this.setOverlayClosedCookie()}isOverlayOpen(){return!!this.openOverlayTriggerType}piiWasSubmitted(){return rr.piiWasSubmitted()}submitPII(){rr.setPIISubmitCookie()}setOverlayClosedDuration(e=30){this.overlayClosedCookieDuration=e}totalOverlaysOpenedCount(){return this.history.totalCount()}overlayOpenedEvent(e){e&&this.openedOverlayEventData.push(e)}handleOpenAttemptOutcome(e){let r=e?.resolved_form_id;if(r){if(!this.openedOverlayEventData.length){a.error(new _r(`[PWO] Impression failed to render for formId: ${r}`));return}if(this.openedOverlayEventData.every(n=>!n.rendered_form_id||`${n.rendered_form_id}`?.trim()==="")){ce("[PWO] All rendered form Ids undefined. Could be justuno overlay.");return}if(this.openedOverlayEventData.find(n=>`${n.rendered_form_id}`===r))ce("[PWO] Impression rendered successfully.");else{let n=this.openedOverlayEventData.map(i=>!i.rendered_form_id||`${i.rendered_form_id}`==""?"<missing_id>":i.rendered_form_id);a.error(new _r(`[PWO] Impression failed to render for formId: ${r} and external impression rendered form ids: ${n}`))}}}openAttemptEvent(e){this.openedOverlayEventData=[],v.setTimeout(()=>this.handleOpenAttemptOutcome(e),5e3)}openStandardOverlay(){this.openOverlayTriggerType="s",this.history.push("s")}standardOverlaysOpenedCount(){return this.history.count("s")}isOverlayOpenedByStandard(){return this.openOverlayTriggerType==="s"}openAtcOverlay(){this.openOverlayTriggerType="a",this.history.push("a")}atcOverlaysOpenedCount(){return this.history.count("a")}isOverlayOpenedByATC(){return this.openOverlayTriggerType==="a"}openExitOverlay(){this.openOverlayTriggerType="e",this.history.push("e")}exitOverlaysOpenedCount(){return this.history.count("e")}isOverlayOpenedByExitTrigger(){return this.openOverlayTriggerType==="e"}},ut=rr;ut.overlayClosedCookie=new Lt(uu),ut.piiSubmittedCookie=new Lt(du);function Zy(t){if(!t)return!1;let e=t.getBoundingClientRect(),r=getComputedStyle(t);return r.display!=="none"&&r.visibility!=="hidden"&&e.top>=0&&e.left>=0&&e.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&e.right<=(window.innerWidth||document.documentElement.clientWidth)}function Ky(t){return[...document.querySelectorAll(t)].some(r=>Zy(r))}function Md(t=[]){return t.some(Ky)}var Et=class{constructor(e){this.overlayLimitTracker=e}static alreadyExcludedByChannel(){return!!Et.pwoExcludedByChannelNameCookie.get()}static shouldBeExcludedByChannel(){let e=io.safeFromConfigJSON();return!!(e&&e.hasExcludedUrlParams())}static doExcludeByChannel(){Et.pwoExcludedByChannelNameCookie.set(!0,void 0)}static meetsExitOverlayConditions(){let e=ut.piiWasSubmitted(),r=Et.isExcludedByChannel();return!(e||r)}static isEligibleForATCTrigger(e,r){return e.overlay_eligible?!r.channel_excluded&&!r.identified&&!r.pii_submitted:!1}static isExcludedByChannel(){return this.alreadyExcludedByChannel()?!0:this.shouldBeExcludedByChannel()?(this.doExcludeByChannel(),!0):!1}static isOverlayClearedToDisplay(){let e=io.safeFromConfigJSON();return!Md(e?.blockOverlayOnCssSelectors)}isEligibleForExitOverlay(){return Et.meetsExitOverlayConditions()&&this.overlayLimitTracker.canOpenExitOverlay()&&Et.isOverlayClearedToDisplay()}shouldTriggerATCOverlay(e,r){return Et.isEligibleForATCTrigger(e,r)&&this.overlayLimitTracker.canOpenAtcOverlay()&&Et.isOverlayClearedToDisplay()}isEligibleForStandardOverlay(e){return e.isUserIdentified().then(o=>!o&&this.overlayLimitTracker.canOpenStandardOverlay()&&Et.isOverlayClearedToDisplay())}},ao=Et;ao.pwoExcludedByChannelNameCookie=new Lt(lu);var fi=class{constructor(e){this.maxTotalOverlays=1/0;this.maxStandardOverlays=1;this.maxATCOverlays=1;this.maxExitOverlays=1;this.interactionTracker=e}setMaxTotalOverlays(e=1/0){this.maxTotalOverlays=e}totalOverlayLimitReached(){return this.interactionTracker.totalOverlaysOpenedCount()>=this.maxTotalOverlays}standardOverlayLimitReached(){return this.interactionTracker.standardOverlaysOpenedCount()>=this.maxStandardOverlays}canOpenStandardOverlay(){return!this.interactionTracker.isOverlayOpen()&&!this.interactionTracker.piiWasSubmitted()&&!this.standardOverlayLimitReached()&&!this.totalOverlayLimitReached()}atcOverlayLimitReached(){return this.interactionTracker.atcOverlaysOpenedCount()>=this.maxATCOverlays}canOpenAtcOverlay(){return!this.interactionTracker.isOverlayOpen()&&!this.atcOverlayLimitReached()&&!this.totalOverlayLimitReached()}exitOverlayLimitReached(){return this.interactionTracker.exitOverlaysOpenedCount()>=this.maxExitOverlays}canOpenExitOverlay(){return!this.interactionTracker.isOverlayOpen()&&!this.exitOverlayLimitReached()&&!this.totalOverlayLimitReached()}};var Yy={["s"]:"openStandardOverlay",["a"]:"openAtcOverlay",["e"]:"openExitOverlay"},Xy={["s"]:"isOverlayOpenedByStandard",["a"]:"isOverlayOpenedByATC",["e"]:"isOverlayOpenedByExitTrigger"},ft=class{constructor(){this._overlayTracker=new ut,this._overlayLimitTracker=new fi(this._overlayTracker),this._overlayEligibility=new ao(this._overlayLimitTracker)}static overlayWasClosed(){return ut.overlayWasClosed()}static piiWasSubmitted(){return ut.piiWasSubmitted()}static setPIISubmitCookie(){ut.setPIISubmitCookie()}setOverlayOpen(e){this._overlayTracker[Yy[e]]()}isOverlayOpen(){return this._overlayTracker.isOverlayOpen()}closeOverlay(e=!1){e&&this._overlayTracker.setOverlayClosedCookie(),this._overlayTracker.closeOverlay()}wasOverlayOpenedBy(e){return this._overlayTracker[Xy[e]]()}submitPII(){this._overlayTracker.submitPII()}overlayOpenedEvent(e){this._overlayTracker.overlayOpenedEvent(e)}openAttemptEvent(e){this._overlayTracker.openAttemptEvent(e)}setOverlayClosedDuration(e){this._overlayTracker.setOverlayClosedDuration(e)}setMaxTotalOverlays(e){this._overlayLimitTracker.setMaxTotalOverlays(e)}static isExcludedByChannel(){return ao.isExcludedByChannel()}isEligibleForATCOverlay(e,r){return this._overlayEligibility.shouldTriggerATCOverlay(e,r)}isEligibleForExitOverlay(){return this._overlayEligibility.isEligibleForExitOverlay()}isEligibleForStandardOverlay(e){return this._overlayEligibility.isEligibleForStandardOverlay(e)}};var Nr=class{constructor(e,r,o){this.isIdentified=e,this._eventData=r,this.pwoSettings=o}static async createPWOEventData(e,r){let o=E({},{session_page_views:await ct()});return new Nr(e,o,r)}buildOverlayBucketParams(){let e=this.pwoSettings?.overlayBuckets,r=this.pwoSettings?.extractRelevantFormConfig(),o=ui(this.pwoSettings?.scoreName);return e===void 0?void 0:{resolved_trigger_config:{...e},resolved_form_id:r?.formId,resolved_form_profile:r?.profile,resolved_score:o,version:this.pwoSettings?.version}}buildEligibilityParams(){return{closed_overlay:!!ft.overlayWasClosed(),identified:this.isIdentified,pii_submitted:!!ft.piiWasSubmitted(),channel_excluded:ft.isExcludedByChannel()}}get eventData(){return E({},this.buildOverlayBucketParams(),this.buildEligibilityParams(),this._eventData)}extendEventData(e){E(this._eventData,e)}get bucketName(){return this.buildOverlayBucketParams()?.resolved_trigger_config?.name}get showOverlayOnATC(){return this.buildOverlayBucketParams()?.resolved_trigger_config?.triggerBuckets?.showOverlayOnATC}};var Dt=class{constructor(e){this.response=e}get delay(){return this.trigger_type!==Jt.SESSION_VIEW_COUNT?this.response.trigger_count:0}get minimum_page_views(){return this.trigger_type===Jt.SESSION_VIEW_COUNT?this.response.trigger_count:0}get form_id(){return this.response.form_id}get form_profile(){return this.response.form_profile}get overlay_eligible(){return this.response.overlay_eligible}get trigger_type(){return this.response.trigger_type}get trigger_count(){return this.response.trigger_count}_equals(e){return this.form_id===e.form_id&&this.form_profile===e.form_profile&&this.overlay_eligible===e.overlay_eligible&&this.trigger_type===e.trigger_type&&this.trigger_count===e.trigger_count}};var so=class{constructor(e=0,r=0,o){this.delay=e,this.minimumPageViews=r,this.triggerFn=o,V("platform",h.ADD_TO_CART,()=>{this.triggerOverlay()})}async triggerOverlay(){try{let e=await ct();if(this.minimumPageViews&&this.minimumPageViews>e)return;this.delay>0&&await pe(this.delay*1e3),this.triggerFn()}catch(e){a.error(new Error(`[PWO] Error delaying overlay: ${e}`))}}static buildTrigger(e,r,o,n,i){if(!e.showOverlayOnATC)return;let c=new Dt(r),s=async()=>{try{if(!o.isEligibleForATCOverlay(c,n.eventData))return;o.setOverlayOpen("a"),i(c)}catch(u){a.error("[PWO] Error triggering overlay",u)}};return new so(c.delay,1,s)}};var co=class{constructor(e=0,r=0,o){this.delay=e,this.minimumPageViews=r,this.triggerFn=o,Fd(()=>this.triggerOverlay())}async triggerOverlay(){try{let e=await ct();if(this.minimumPageViews&&this.minimumPageViews>e)return;this.delay>0&&await pe(this.delay*1e3),this.triggerFn()}catch(e){a.error(new Error(`[PWO] Error delaying overlay: ${e}`))}}static buildTrigger(e,r,o,n,i){if(!e.showSecondOverlayOnExitIntent&&r?.trigger_type!==Jt.EXIT_INTENT)return;let c=new Dt(r),s=new Dt(E({},r,{trigger_type:Jt.EXIT_INTENT})),u=async()=>{try{if(!o.isEligibleForExitOverlay()||n.eventData.identified)return;o.setOverlayOpen("e"),i(s)}catch(m){a.error("[PWO] Error triggering overlay",m)}};return new co(c.delay,1,u)}};var uo=class{constructor(e=0,r=0,o){this.delay=e,this.minimumPageViews=r,this.triggerFn=o,this.triggerOverlay()}async triggerOverlay(){try{let e=await ct();if(this.minimumPageViews&&this.minimumPageViews>e)return;this.delay>0&&await pe(this.delay*1e3),this.triggerFn()}catch(e){a.error(new Error(`[PWO] Error delaying overlay: ${e}`))}}static buildTrigger(e,r,o,n){let i=new Dt(e);if(i.trigger_type===Jt.EXIT_INTENT||!i.trigger_type)return;let c=async()=>{try{if(!await r.isEligibleForStandardOverlay(o))return;r.setOverlayOpen("s"),n(i)}catch(s){a.error("[PWO] Error triggering overlay",s)}};return new uo(i.delay,i.minimum_page_views,c)}};var Rr=class{constructor(e){this.triggers=[];this.triggers=e}get triggerList(){return this.triggers}static buildTriggerManager(e,r,o,n,i,c){if(!r.overlay_eligible)return new Rr([]);let s=[uo.buildTrigger(r,o,n,c),so.buildTrigger(e,r,o,i,c),co.buildTrigger(e,r,o,i,c)].filter(u=>u!==void 0);return new Rr(s)}};function $d(){let t=gu()?.filter(o=>o?.name==="request: view")||[];if(t.length===0)return{};let e=t[t.length-1],r=JSON.parse(e?.data?.body||"{}");return E({},{page_id:r?.page_id})}var Qy={subtree:!0,childList:!0,attributes:!0};function Cs(t){let e=t.getAttribute("tabindex");return t.removeAttribute("tabindex"),()=>{t.setAttribute("tabindex",e||"0")}}function ev(t){if(!(!t||window.themeCore===void 0))return pe(1e3).then(()=>{window.themeCore?.utils?.removeTrapFocus()}),()=>{window.themeCore?.EventBus?.emit("cart:drawer:open")}}var Os=class{constructor(e){this.isRunning=!0;this.focusTrap=e;let r=this.getActiveElement();if(r){this.handleActiveElement(r);return}this._promise=new Promise((o,n)=>{this.resolve=o,this.observer=new MutationObserver(()=>{try{r=this.getActiveElement(),r&&(this.handleActiveElement(r),o())}catch(i){this.observer?.disconnect(),this.isRunning=!1,n(i)}}),this.observer.observe(document.querySelector(e.baseElement),Qy)})}getActiveElement(){return this.focusTrap.activeElements.reduce((e,r)=>{if(e)return e;let o=document.querySelector(r.selector);return o?{element:o,callback:r.callback}:void 0},void 0)}handleActiveElement(e){this.cleanup=e.callback(e.element),this.observer?.disconnect(),this.isRunning=!1}get isActive(){return this.isRunning}get promise(){return this._promise}cancel(){if(!this.isRunning){this.cleanup?.();return}this.isRunning=!1,this.observer?.disconnect(),this.resolve?.()}};function Bd(t=[{baseElement:"[id=sidebar-cart]",activeElements:[{selector:"[id=sidebar-cart][aria-hidden=false]",callback:Cs}]},{baseElement:"#CartDrawer",activeElements:[{selector:"#CartDrawer.drawer--is-open",callback:Cs},{selector:"#CartDrawer.is-transitioning[tabIndex]",callback:Cs},{selector:"#CartDrawer.is-active",callback:ev}]}]){try{if(t.length===0)return;let e=t.find(({baseElement:r})=>document.querySelectorAll(r).length>0);return e?new Os(e):void 0}catch(e){a.error(e)}}var Qe,Yo,Mt,Ft,tv,Ud,Re=new ft;async function rv(){Qe=await Nr.createPWOEventData(!1,Ft)}async function ov(){try{Re.closeOverlay(),await rv()}catch(t){a.error(t)}}function nv(t){a.push({trigger:h.PWO_OPEN_ATTEMPT}),Yo.triggerOverlay(t.form_id),Mt.addAttributesToUserProfile({blackcrow_exposed_population_bucket:Qe?.bucketName,bcai_trigger:t.trigger_type,profile:t.form_profile})}function iv(t){let e=t?.apps?.pwo;if(e){Qe?.extendEventData({resolved_form_id:e.form_id,resolved_form_profile:e.form_profile,trigger_type:e.trigger_type,trigger_count:e.trigger_count,pwo_response_overlay_eligible:e.overlay_eligible});let r=Qe?.bucketName;Mt.addAttributesToUserProfile(E({},{blackcrow_all_population_bucket:r,blackcrow_eligible_population_bucket:e?.overlay_eligible?r:void 0})),tv=Rr.buildTriggerManager(Ft,e,Re,Mt,Qe,nv)}else a.error(new Error(`[${q.toUpperCase()}] missing "pwo" in response: ${JSON.stringify(t)}`))}function av(t,e){return oe(t,E({},e,$d()),r=>{iv(r)})}async function sv(t){try{if(t.renderer&&t.isIdentified&&ma()){await t.renderer;let e=await t.isIdentified;Qe=await Nr.createPWOEventData(e,Ft);let r=Qe.eventData;await av(H.PWO_DECISION,r)}}catch(e){a.error(e)}}function li(t,e=!1){let r=Re.isOverlayOpen(),o=typeof t?.rendered_form_id=="number"?`${t?.rendered_form_id}`:t?.rendered_form_id?.trim(),n=r&&(o===t.resolved_form_id||e&&!o);return E(t,{bcai_triggered:n,overlay_triggered_by_atc:n&&Re.wasOverlayOpenedBy("a"),overlay_triggered_by_seu:n&&Re.wasOverlayOpenedBy("e")})}function cv(){V("platform",h.VIEW_RESPONSE,()=>{ma()&&(V("platform",h.PWO_CLOSE,t=>{let e=li(E({},t,Qe?.eventData));oe(H.PWO_CLOSE,e),e.bcai_triggered&&(Re.closeOverlay(!0),Ud?.cancel())}),V("platform",h.PWO_EMAIL_LEAD,t=>{Re.submitPII();let e=li(E({},t,Qe?.eventData));oe(H.PWO_EMAIL_LEAD,e),e.bcai_triggered&&Mt.addAttributesToUserProfile({blackcrow_identified:!0})}),V("platform",h.PWO_SMS_LEAD,t=>{Re.submitPII();let e=li(E({},t,Qe?.eventData));oe(H.PWO_SMS_LEAD,e),e.bcai_triggered&&Mt.addAttributesToUserProfile({blackcrow_identified:!0})}),V("platform",h.PWO_IMPR,t=>{let e=li(E({},t,Qe?.eventData),!0);Re.overlayOpenedEvent(e),oe(H.PWO_IMPR,e),e.bcai_triggered&&(Ud=Bd()),e.bcai_triggered&&e.overlay_triggered_by_atc&&bd(Ft.styleSettings,e?.rendered_form_id,Yo)}),V("platform",h.PWO_OPEN_ATTEMPT,t=>{let e=E({},t,Qe?.eventData);Re.openAttemptEvent(e),oe(H.PWO_OPEN_ATTEMPT,E(e,{bcai_triggered:!0,overlay_triggered_by_atc:Re.wasOverlayOpenedBy("a"),overlay_triggered_by_seu:Re.wasOverlayOpenedBy("e")}))}))})}function uv(){let t={isIdentified:void 0,renderer:void 0};try{if(io.isDisabled()||y())return t;ft.isExcludedByChannel(),Ft=io.fromConfigJSON(),Yo||(Yo=new Jr(Ft.rendererName)),Mt||(Mt=new Zr(Ft.identifierNames)),Re.setOverlayClosedDuration(Ft.overlayClosedCookieDuration),Re.setMaxTotalOverlays(Ft.maxTotalOverlays),t.isIdentified=Mt.setup().then(()=>Mt.isUserIdentified()).catch(()=>!0),t.renderer=Yo.setup(),cv()}catch(e){a.error(e)}return t}var Vd={appName:q,init:uv,sendAppScores:sv,cleanup:ov};var Ns="cordial";function fv(t,e,r){let o=`${f}`,n=B([o,t.integration_product]),i=w(window,"crdl");if(typeof i=="function"){let c={app_name:e,integration_product:t.integration_product,conversion_product:t.conversion_product,conversion_type:t.conversion_type,comparison_population:t.comparison_population,comparison_group:t.comparison_group,comparison_type:t.comparison_type,threshold_setter:t.threshold_setter,threshold_group_count:t.threshold_group_count,score:G(t.score)};i("event",n,c),typeof r=="function"&&r(Ns,n)}else throw new Error($)}var Rs={name:Ns,send:X(Ns,fv)};var Xo=window.GoogleAnalyticsObject||"ga";window[Xo]=window[Xo]||function(){(window[Xo].q=window[Xo].q||[]).push(arguments)};var mM=window[Xo];window.dataLayer=window.dataLayer||[];function dv(){return typeof window.gtag=="function"?window.gtag.toString()!=="function () { }":!1}var bt=dv()?window.gtag:function(){window.dataLayer.push(arguments)};function Wd(t,e){let r=document.createElement("script");r.src=`https://www.googletagmanager.com/gtag/js?id=${t}`,r.async=!0,document.getElementsByTagName("head")[0].appendChild(r),bt("js",new Date),bt("config",t,e)}function qd(t,e,r=!1){bt("event",t,{send_to:e,non_interaction:r})}async function Qo(){try{return(await T("_ga"))?.split(".")?.slice(-2).join(".")}catch(t){a.error(t);return}}async function Ls(t,e){try{if(y()){let o=z(t,e).tracking_id,n=await Qo();return o!=null&&o.startsWith("UA-")&&n!==void 0}if(Array.isArray(window.dataLayer)){let r=!1;return S(window.dataLayer,o=>{o[0]==="config"&&o[1]&&o[1].indexOf("UA-")===0&&(r=!0)}),r}return!1}catch(r){a.error(r);return}}async function Ds(t,e){try{if(y()){let o=z(t,e).tracking_id,n=await Qo();return o!=null&&o.startsWith("G-")&&n!==void 0}if(Array.isArray(window.dataLayer)){let r=!1;return S(window.dataLayer,o=>{o[0]==="config"&&o[1]&&o[1].indexOf("G-")===0&&(r=!0)}),r}return!1}catch(r){a.error(r);return}}function fo(t,e={}){!y()&&t&&Wd(t,e)}async function pi(t,e,r,o=!1){try{let n=await ee(r),i=Vo(t,e),c=n.length?n[0].value:void 0;i.forEach(s=>{let u=s.pixelId,m=s.loadPixel===!0;u&&c&&m&&(fo(u,{user_id:c,send_page_view:!1}),o&&qd("page_view_blackcrow",u))})}catch(n){a.error(n)}}var mi="event",Ie="google_analytics",lv="https://www.google-analytics.com/collect",pv="https://www.google-analytics.com/g/collect";function Gd(){return!!M("config.google_analytics.gtag_externally_configured")}function mv(){return!!M("config.google_analytics.gtm_format")}function gv(t,e){let r=z(t,Ie);if(Gd()){e();return}let o=r?.tracking_id;fo(o,{send_page_view:!1}),e()}async function hv(t,e,r,o,n){try{let i=new URL(lv);i.search=Se({v:1,t:mi,tid:t,cid:await Qo(),ec:e,ea:r,el:o,ua:ye(),dl:k(),dt:document.title,ni:1}),J(i.toString(),{method:"GET",mode:"cors"},n)}catch(i){a.error(new Error(`${Ie} api call failed with ${i}`))}}async function yv(t,{onSuccess:e,eventPrefix:r,integrationProduct:o,conversionProduct:n,conversionType:i,comparisonType:c,thresholdSetter:s,thresholdGroupCount:u,comparisonPopulation:m,score:g}){try{let b=new URL(pv);b.search=Se({v:2,tid:t,en:mi,cid:await Qo(),dl:k(),dt:document.title,ep:{app_name:r,integration_product:o,conversion_product:n,comparison_population:m,comparison_type:c,conversion_type:i,threshold_setter:s,threshold_group_count:u,non_interaction:!0},epn:{score:g}}),J(b.toString(),{method:"POST",mode:"cors"},e)}catch(b){a.error(new Error(`${Ie} api call failed with ${b}`))}}function jd(t,e,r,o,n,i,c,s,u){let m={};return m.category=B([t,e,r,o]),m.action=B([n,i,c,s]),m.label=u,m}async function vv(t,{onSuccess:e,eventPrefix:r,integrationProduct:o,conversionProduct:n,conversionType:i,comparisonType:c,thresholdSetter:s,thresholdGroupCount:u,comparisonPopulation:m,score:g}){try{let $r=function(){typeof e=="function"&&e(Ie,{eventCategory:Bt,eventAction:ar,eventLabel:_o})};var b=$r;let U=z(t,Ie);if(U.pageBlocked)return;let se=window.GoogleAnalyticsObject?window[window.GoogleAnalyticsObject]:window.ga,$t=jd(r,o,n,i,c,s,u,m,g),Bt=$t.category,ar=$t.action,_o=$t.label,qi=await Ls(t,Ie),wo=await Ds(),Eo;if(Gd()&&(Eo={send_to:U.tracking_id}),mv()){let bo=B([r,o],"_");window.dataLayer.push({event:bo,non_interaction:!0,app_name:r,integration_product:o,conversion_product:n,conversion_type:i,comparison_population:m,comparison_type:c,threshold_setter:s,threshold_group_count:u,score:g,...Eo}),$r();return}if(wo||Eo){let bo=B([r,o],"_");bt("event",bo,{non_interaction:!0,app_name:r,integration_product:o,conversion_product:n,conversion_type:i,comparison_population:m,comparison_type:c,threshold_setter:s,threshold_group_count:u,score:g,...Eo}),$r()}else if(qi)bt("event",ar,{event_category:Bt,event_label:_o,non_interaction:!0}),$r();else if(typeof se=="function"){let bo=v.setTimeout(()=>{a.error(new A(`${Ie} ready hook not fired`))},5e3);se(tu=>{if(clearTimeout(bo),!(tu&&tu.get("trackingId"))){let gn=U.tracking_id;gn||S(se.getAll(),Jp=>{let ru=Jp.get("trackingId");if(ru)return gn=ru,!1}),gn?se("create",gn,"auto"):a.error(new Uo(`${Ie} tracking id not found`))}se("send",{hitType:mi,eventCategory:Bt,eventAction:ar,eventLabel:_o,nonInteraction:!0}),$r()})}else throw new Error($)}catch(U){a.error(U)}}async function _v(t,{onSuccess:e,eventPrefix:r,integrationProduct:o,conversionProduct:n,conversionType:i,comparisonType:c,thresholdSetter:s,thresholdGroupCount:u,comparisonPopulation:m,score:g}){try{let ar=function(){typeof e=="function"&&e(Ie,{eventCategory:se,eventAction:$t,eventLabel:Bt})};var b=ar;let U=jd(r,o,n,i,c,s,u,m,g),se=U.category,$t=U.action,Bt=U.label,_o=await Ls(t,Ie);if(await Ds(t,Ie)){let wo=z(t,Ie).tracking_id;yv(wo,{onSuccess:ar,eventPrefix:r,integrationProduct:o,conversionProduct:n,conversionType:i,comparisonType:c,thresholdSetter:s,thresholdGroupCount:u,comparisonPopulation:m,score:g})}else if(_o){let wo=z(t,Ie).tracking_id;hv(wo,se,$t,Bt,ar)}else throw new Error($)}catch(U){a.error(U)}}function wv(t,e,r){let o=`${f}_${e}`;function n(c){c.message===$?a.error(new A(`${Ie} globals not found`),{appName:e}):a.error(c)}if(!t)return;let i=y()?_v:vv;F(()=>i(e,{onSuccess:r,eventPrefix:o,integrationProduct:t.integration_product,conversionProduct:t.conversion_product,conversionType:t.conversion_type,comparisonType:t.comparison_type,thresholdSetter:t.threshold_setter,thresholdGroupCount:t.threshold_group_count,comparisonPopulation:t.comparison_population,score:G(t.score)}),n)}var Fs={eventHitType:mi,name:Ie,setup:gv,send:wv};var lo="google_ads",Ev="www.googleadservices.com",bv="_gcl_au";function gi(t){return z(t,lo)?.conversion_id}function Hd(t){return gi(t)?.split("-").splice(-1).join()}async function Sv(){try{return(await T(bv))?.split(".").splice(-2).join(".")}catch(t){a.error(t);return}}async function zd(t){try{let e=k(),r=xe(),o=Vr(),n=Date.now(),i=await Sv(),c={data:`event=${t};non_interaction=true`,fst:n,random:n,auid:i,url:e,ref:r,tiba:o,hn:Ev,rfmt:3,fmt:4,async:1,cv:11,guid:"ON"};return Se(c)}catch(e){return a.error(e),Se({})}}var Pv="event",xv="https://googleads.g.doubleclick.net/pagead/viewthroughconversion";function Tv(t,e){let r=gi(t);fo(r),e()}function Av(){if(Array.isArray(window.dataLayer)){let t=!1;return S(window.dataLayer,e=>{e[0]==="config"&&e[1]&&e[1].indexOf("AW-")===0&&(t=!0)}),t}return!1}async function Iv(t,e,r){try{let o=Hd(e),n=await zd(t);Br(`${xv}/${o}/?${n}`),r()}catch(o){a.error(new Error(`${lo} api call failed with ${o}`))}}function kv(t,e,r){if(Av())bt("event",t,{send_to:gi(e),non_interaction:!0}),r();else throw new Error($)}function Cv(t,e,r){let o=`${f}_${e}`,n=B([o,t.integration_product,t.conversion_product,t.conversion_type,t.comparison_type,t.threshold_setter,t.threshold_group_count,t.comparison_population,`score_${G(t.score)}`]);function i(){typeof r=="function"&&r(lo,{event:n})}y()?Iv(n,e,i):kv(n,e,i)}var Ms={eventHitType:Pv,name:lo,setup:Tv,send:X(lo,Cv)};var $s="heap";function Ov(t,e,r){let o=w(window,"heap");if(o&&typeof o.addUserProperties=="function"){let i={[B([f,t.comparison_group,t.threshold_group_count])]:t.score};o.addUserProperties(i),typeof r=="function"&&r($s,i)}else throw new Error($)}var Bs={name:$s,send:X($s,Ov)};var en="klaviyo";function Nv(t,e){if(!y()){let r=z(t,en).api_key,o=window._learnq?window._learnq.identify:null;if(r&&typeof o!="function"){let n=document.createElement("script");n.src=`https://static.klaviyo.com/onsite/js/klaviyo.js?company_id=${r}`,n.async=!0,document.getElementsByTagName("head")[0].appendChild(n)}}e()}async function Jd(t,e,r,o){try{let c=function(){typeof o=="function"&&o(en,e)},u=function(){let m=G(r.score),g={[e]:m};return s&&E(g,{$email:s}),g};var n=c,i=u;let s=await me();if(y()){let m=z(t,en).api_key;m&&J(`https://a.klaviyo.com/api/onsite/identify?c=${m}`,{body:JSON.stringify({token:m,properties:u()}),method:"POST",mode:"cors",credentials:"omit"},c())}else window._learnq||(window._learnq=[],a.error(new A(`${en} globals not found`))),window._learnq.push(["identify",u()]),c()}catch(c){a.error(c)}}var Zd={},Us={};function Rv(t){let e=Zd[t];return()=>{Jd(e.appName,e.eventName,e.scoreObj,e.onSuccess)}}function Lv(t,e,r){if(!t)return;let o=B([`${f}`,"score",t.threshold_group_count,t.comparison_group]);t.name!==void 0&&(Zd[t.name]={appName:e,eventName:o,scoreObj:t,onSuccess:r},Us[t.name]===void 0&&(Us[t.name]=Rv(t.name)),v.addListener(window,"beforeunload",Us[t.name])),v.setTimeout(()=>Jd(e,o,t,r),5e3)}var Vs={name:en,setup:Nv,send:Lv};var Dv="event",hi="microsoft_ads";function Fv(t,{onSuccess:e,eventCategory:r,eventAction:o,eventLabel:n,eventValue:i}){function c(){typeof e=="function"&&e(hi,{event_category:r,event_action:o,event_label:n,event_value:i})}try{window.uetq=window.uetq||[],window.uetq.push("event",o,{event_category:r,event_label:n,event_value:i}),c()}catch{a.error(new A(`${hi} globals not found`),{appName:t})}}function Mv(t,e){let o=z(t,hi).tracking_id;o?function(n,i,c,s,u){var m,g,b;n[u]=n[u]||[],m=function(){var U={ti:o};U.q=n[u],n[u]=new UET(U),n[u].push("pageLoad"),e()},g=i.createElement(c),g.src=s,g.async=1,g.onload=g.onreadystatechange=function(){var U=this.readyState;U&&U!=="loaded"&&U!=="complete"||(m(),g.onload=g.onreadystatechange=null)},b=i.getElementsByTagName(c)[0],b.parentNode.insertBefore(g,b)}(window,document,"script","//bat.bing.com/bat.js","uetq"):e()}function $v(t,e,r){let o=`${f}_${e}`;if(!t)return;let n=t.integration_product,i=B([o,n,t.conversion_product,t.conversion_type]),c=B([t.comparison_type,t.threshold_setter,t.threshold_group_count,t.comparison_population,t.comparison_group]),s,u;if(n==="prospecting")u=t.raw_probability;else{s=G(t.score);let m=Number(t.score);m>=0&&(u=m)}Fv(e,{onSuccess:r,eventCategory:i,eventAction:c,eventLabel:s,eventValue:u})}var Ws={eventHitType:Dv,name:hi,setup:Mv,send:$v};var qs="oracle_responsys";function Bv(t,e,r){let o=w(window,"ORA.click");if(typeof o=="function"){let n=G(t.score);o({data:{bc_score:n,"wt.dl":99}}),typeof r=="function"&&r(qs,n)}else throw new Error($)}var Gs={name:qs,send:X(qs,Bv)};var Kd="track";var js="outbrain";function Uv(t,e,r){let o=w(window,"obApi");if(typeof o=="function"){let n=`${f}`,i=t.integration_product,c=B([n,i,t.threshold_group_count,G(t.score)]," ").replace(/[^0-9a-z\s]/gi,"");o(Kd,c),typeof r=="function"&&r(js,c)}else throw new Error($)}var Hs={name:js,send:X(js,Uv)};var Lr="pinterest",yi=`${f}`;function zs(t){return{lead_type:t.integration_product,video_title:t.conversion_product,order_id:t.conversion_type,property:t.comparison_group,promo_code:t.comparison_type,search_query:t.threshold_setter,order_quantity:G(t.threshold_group_count),value:G(t.score)}}async function Yd(t,e,r){try{let o=await T("_pin_unauth"),n=await T("_derived_epik"),i={event:yi,ed:e,tid:t,pd:{...o&&{pin_unauth:o},...n&&{derived_epik:n}}};return r&&(i.ad={loc:k(),ref:document.referrer}),i}catch(o){a.error(o);let n={event:yi,ed:e,tid:t};return r&&(n.ad={loc:k(),ref:document.referrer}),n}}async function Vv(t,e,r){try{let o=z(e,Lr).tracking_id;if(o){let n="https://ct.pinterest.com",i=zs(t),c=await Yd(o,i,!1),s=Se(c,!1);J(`${n}/user/?${s}`,{method:"GET"},r,()=>a.error(new Error(`${Lr} api call failed`)));let u=await Yd(o,i,!0),m=Se(u,!1);J(`${n}/v3/?${m}`,{method:"GET"},r,()=>a.error(new Error(`${Lr} api call failed`)))}}catch(o){a.error(o)}}async function Wv(t,e){try{let r=zs(t);if(z(e,Lr).advancedMatching){let n=await me();E(r,{em:n})}return r}catch(r){return a.error(r),zs(t)}}function qv(t,e,r){if(y())Vv(t,e,r);else{let o=w(window,"pintrk");if(typeof o!="function")throw new Error($);Wv(t,e).then(n=>{o("track",yi,n),typeof r=="function"&&r(Lr,yi)}).catch(n=>a.error(n))}}var Js={name:Lr,send:X(Lr,qv)};var Dr="snapchat",vi="_scid",_i="u_sclid",wi="u_scsid",Ys="snaptr",Ks={};function Ei(t,{getItem:e,setItem:r},o,n=Fo){return!e||!r?(a.error(new Error("Storage object is not valid")),Promise.resolve()):Promise.resolve(e(t)).then(i=>{let c=i;c||(c=n(),r(t,c)),o(c)}).catch(i=>{a.error(i)})}function Zs(t){return Ks[t]}function bi(t,e){return Ks[t]=e,Ks[t]}function Gv(t){return z(t,Dr)?.pixel_id}function Xd(t,e){let r=Gv(e),o=Ut("navigation")[0],n=Ut(Ys)[0];return{pid:r,ev:t.score,pl:k(),rf:xe(),ts:Date.now(),trackId:Fo(),u_c1:Zs(vi),u_sclid:Zs(_i),u_scsid:Zs(wi),m_dcl:o?.domContentLoadedEventEnd,m_pi:o?.domInteractive,m_pl:o?.loadEventEnd,m_pv:o?"v2":"v1",m_rd:Math.floor(yn()),m_sl:n?.startTime,v:"2.0.0",bt:"1d53c387",if:!1}}function po(t){if(typeof Promise.allSettled=="function")return Promise.allSettled(t);let e=t.map(r=>Promise.resolve(r).then(o=>({status:"fulfilled",value:o}),o=>({status:"rejected",reason:o})));return Promise.all(e)}var jv="https://tr.snapchat.com/p";function Qd(t,e){return y()?po([Ei(vi,{getItem:globalThis.browser?.cookie?.get,setItem:globalThis.browser?.cookie?.set},r=>{bi(vi,r)}),Ei(_i,{getItem:ue,setItem:Ne},r=>{bi(_i,r)}),Ei(wi,{getItem:j,setItem:Q},r=>{bi(wi,r)})]).finally(e):e()}function Hv(t,e,r){let o=Xd(t,e);J(`${jv}`,{method:"POST",mode:"cors",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:Se(o)},()=>{typeof r=="function"&&r(Dr,`${f},${t.score}`)},()=>{a.error(`Unable to send scores to ${Dr}.`)})}function zv(t,e,r){let o=w(window,Ys);if(typeof o=="function"){if(o("track",t.score),typeof r=="function"){let n=`${f}`,i=B([n,t.score]);r(Dr,i)}}else throw new Error($)}function Jv(t,e,r){return y()?Hv(t,e,r):zv(t,e,r)}var tn={name:Dr,identify:Qd,setup:Qd,send:X(Dr,Jv)};var Xs="taboola";function Zv(t,e,r){if(!t)return;window._tfa===void 0&&(window._tfa=[],a.error(new A(`${Xs} globals not found`),{appName:e}));let o=`${f}`,n=t.integration_product,i=B([o,n,t.threshold_group_count,G(t.score)],"_");window._tfa.push({notify:"event",name:i}),typeof r=="function"&&r(Xs,i)}var Qs={name:Xs,send:Zv};function Kv(){return"product"}async function ec(){try{let t={},e=await me();return e&&(e=e.toLowerCase()),t.email=e,t}catch(t){return a.error(t),{}}}function Si(t,e){let r=B([`${f}_${t}`,e]),o=Kv();return{content_id:r,content_type:o}}async function el(t){try{let e={context:{page:{referrer:document.referrer,url:k()},pixel:{code:t},userAgent:ye()}},r={},o=await T("_ttp");o&&(r.anonymous_id=o);let n=await ec(),i=await qn(n),c={...r,...i};return e.context.user=c,e}catch(e){a.error(e);return}}function tc(t,e,r,o){return el(t).then(n=>(n.event=e,n.properties=Si(o,r),n))}function tl(t){return el(t).then(e=>(e.event="EnrichAM",e))}var rn="tiktok",Yv="https://analytics.tiktok.com/api/v2/pixel";function Xv(t){let e=window.ttq;return e&&e.instances()&&Array.isArray(e.instances())?!!e.instances().find(r=>t===r.pixelCode&&r.loaded):!1}function rc(){return M("tiktokAccounts")||[]}function Qv(t,e){y()||rc().forEach(o=>{let n=o.pixelId;n&&!Xv(n)&&function(i,c,s){i.TiktokAnalyticsObject=s;var u=i[s]=i[s]||[];u.methods=["page","track","identify","instances","debug","on","off","once","ready","alias","group","enableCookie","disableCookie"],u.setAndDefer=function(g,b){g[b]=function(){g.push([b].concat(Array.prototype.slice.call(arguments,0)))}};for(var m=0;m<u.methods.length;m++)u.setAndDefer(u,u.methods[m]);u.instance=function(g){for(var b=u._i[g]||[],U=0;U<u.methods.length;U++)u.setAndDefer(b,u.methods[U]);return b},u.load=function(g,b){var U="https://analytics.tiktok.com/i18n/pixel/events.js";u._i=u._i||{},u._i[g]=[],u._i[g]._u=U,u._t=u._t||{},u._t[g]=+new Date,u._o=u._o||{},u._o[g]=b||{},b=document.createElement("script"),b.type="text/javascript",b.async=!0,b.src=U+"?sdkid="+g+"&lib="+s,g=document.getElementsByTagName("script")[0],g.parentNode.insertBefore(b,g)},u.load(n),u.page()}(window,document,"ttq")}),e()}function oc(){a.error(new Error(`${rn} api call failed`))}async function rl(t,e){try{let r=await me(),o=await yr();if(r||o){let n=t.pixelId,i=w(window,"ttq.instance");typeof i=="function"&&typeof i(n).identify=="function"&&(i(n).identify({email:r,phone_number:o}),e&&typeof e=="function"&&e())}}catch(r){a.error(r)}}function nc(t,e,r){J(Yv,{body:JSON.stringify(t),method:"POST"},e,r)}async function ol(t,e){try{let r=t.pixelId;if(r&&(await ec()).email){let n=await tl(r);nc(n,e,oc)}}catch(r){a.error(r)}}function e_(t,e){let r=y();function o(i,c){return()=>{let u=(Ze(`${t}.integrations`)||[]).find(m=>rn===m.platform);u&&u.scores&&u.scores.forEach(({score:m,integration_product:g})=>{r?tc(c,m,g,t).then(b=>{nc(b,e,oc)}):i(c).track(m,Si(t,g))}),r||e&&typeof e=="function"&&e()}}rc().forEach(i=>{let c=i.pixelId,s=w(window,"ttq.instance"),u=o(s,c);r?ol(i,u):rl(i,u)})}function nl(t,e){return function(){if(typeof t=="function"){let o=`${f}`,n=B([o,e.score]);t(rn,n)}}}function t_(t,e,r,o){let n=t.pixelId,i=w(window,"ttq.instance");if(n&&typeof i=="function")rl(t),e.score&&i(n).track(e.score,Si(r,e.integration_product)),nl(o,e)();else throw new Error($)}function r_(t,e,r,o){let n=t.pixelId;if(n)ol(t).then(()=>{let i=e.score,c=e.integration_product;i&&(o=typeof o=="function"?nl(o,e):void 0,tc(n,i,c,r).then(s=>{nc(s,o,oc)}))});else throw new Error($)}function o_(t,e,r){rc().forEach(n=>{y()?r_(n,t,e,r):t_(n,t,e,r)})}var on={name:rn,identify:e_,setup:Qv,send:X(rn,o_)};function ic({src:t,alt:e}){let r=document.createElement("img");return r.width=1,r.height=1,r.alt=e||"",r.src=t,r}var Pi="tradedesk";function n_(t,e,r){let n=z(e,Pi).pixel_id,i=G(t.score)-1,c=t.comparison_type,s=t.conversion_product,u=t.threshold_group_count;n&&!y()&&te(()=>{if(ic({src:`https://insight.adsrvr.org/track/pxl/?${n}&fmt=3&td1=blackcrow&td2=comparison_type|${c}&td3=comparison_product|${s}&td4=threshold_group_count|${u}&td5=score|${i}`}),typeof r=="function"){let m=`${f}`,g=B([m,t.score]);r(Pi,g)}else throw new Error($)})}var ac={name:Pi,send:X(Pi,n_)};var or="target";var xi={[Rs.name]:Rs,[zt.name]:zt,[Fs.name]:Fs,[Ms.name]:Ms,[Bs.name]:Bs,[Vs.name]:Vs,[Ws.name]:Ws,[Gs.name]:Gs,[Hs.name]:Hs,[Js.name]:Js,[tn.name]:tn,[Qs.name]:Qs,[on.name]:on,[ac.name]:ac};function i_(t,e,r="score_push"){Tt(or,t,r),ae(`${or} ${r}: ${t}`,e)}function a_(t,e){e&&S(e,r=>{r.name&&xi[t].send(r,or,i_)})}function s_(){let t=Bn(or),e={};return t.forEach(r=>{let o=xi[r];o!==void 0&&typeof o.setup=="function"?e[r]=new Promise(n=>o.setup(or,n)).catch(n=>{a.error(n)}):e[r]=Promise.resolve()}),e}function c_(t){let e=Ze(`${or}.integrations`),r=[];return S(e,o=>{let n=o.platform,i=o.scores,c=xi[n];t[n]&&r.push(t[n].then(()=>{c!==void 0&&typeof c.send=="function"&&a_(n,i)}))}),Promise.all(r)}var il={appName:or,init:s_,platforms:xi,sendAppScores:c_};var nr="identity";var u_=re({name:"identity_kpi_sampling",allocations:[{percent:.1,value:!0}]});function al(t,e,r){u_&&ce(`${t} platform request for ${e}`,{"platform.name":e,"event.name":r,appName:t})}function sc(){return{fb:window?.trekkie?.config?.S2S?.facebookCapiEnabled}}function Fr(t){let e=new Error(t);return e.name="InvalidResponseBodyError",e.status="warn",e.stack=ne(e.stack,1),e}var mo=/.*\/cart\/{1,2}add(\.js|\.json)?(\?.*)?$/gm;function f_(t,e){return new Promise((r,o)=>{J(t,e,r,o)}).catch(r=>a.error(r))}var sl=/.*(\/cart(\.json|\.js)|\/cart\/(change|update)(\.js|\.json)?)(\?.*)?$/gm,Ai="_bcai_cs",cl=!1;function Ti(t){try{Ne(Ai,t)}catch(e){a.error(e)}}async function dl(){try{return await ue(Ai)}catch(t){a.error(t);return}}function d_(){return window?.Shopify?.routes?.root?f_(`${window.Shopify.routes.root}cart.js`):Promise.resolve()}function ul(t){try{return JSON.parse(t)}catch(e){return a.error(new Fr(e?.message)),null}}async function fl(t){try{let e=[t];t.items?.length&&(e=t.items);let r=e.reduce((c,s)=>{let u={...c};return s?.id!==void 0&&(u[s.id]=s),u},{}),o=await dl();if(!o||!t||Object.keys(r).length===0)return;let n=(o.items??[]).map(c=>{let s={...c},u=r[s?.id];return s.quantityAdded=0,u&&(s.quantityAdded=u.quantity-s.quantity,s.quantity=u.quantity,delete r[s.id]),s});Object.keys(r).forEach(c=>{let s=r[c];n.push({...s,quantityAdded:s.quantity})});let i={...o,item_count:n.reduce((c,s)=>c+(s.quantity??0),0),total_price:(o.total_price??0)+n.reduce((c,s)=>c+s.quantityAdded*(s.price??0),0)};i.items=n.map(c=>(delete c.quantityAdded,c)),Ti(i)}catch(e){a.error(e)}}function l_(){y()||cl||(cl=!0,zo(sl,t=>{try{t=ul(t),t&&Ti(t)}catch(e){a.error(e)}}),Jo(sl,t=>{t.json().then(e=>Ti(e),e=>{a.error(new Fr(e?.message))}).catch(e=>a.error(e))}),zo(mo,t=>{try{return t=ul(t),t?fl(t):void 0}catch(e){a.error(e);return}}),Jo(mo,t=>t.json().then(fl).catch(e=>a.error(e))))}function p_(){return y()?Promise.resolve():dl().then(t=>t||d_().then(e=>(e&&Ti(e),e)))}var nn={setup:l_,getData:p_};async function go(t,e,r,o){try{let n=await ee(e),i={site_name:d,metadata:Mn(),device_info:ye(),page_url:k(),page_referrer_url:xe(),page_title:Vr(),platform_name:t,platform_event_name:r,ids:n,user_data:{fbc:await T(Vt),fbp:await T(lt),bcvid:(await ze())?.id,sh:{ct:await T("cart")||(await ue(Ai))?.token,ch:uf()}},resolved_score:await j(To),capi:sc()},c={fb_test_event_code:await T("fb_test_event_code")};vf(E(i,o,c)),al(nr,t,r)}catch(n){a.error(n)}}var ll="klaviyo",Ii;function m_(t){return t==="track"}function g_(t){return t.overrideSampling=!0,t.message=`identity: ${t.message}`,t}function h_(t){return e=>{e.message===`identity: ${$}`?a.error(new A(t)):a.error(e)}}function cc(t,e){m_(e[0])&&go(ll,t,e[1],{data:e[2]})}function y_(t){Array.isArray(window._learnq)&&window._learnq.forEach(e=>{cc(t,e)})}function v_(t){if(typeof window._learnq.push=="function"){let e=window._learnq.push;window._learnq.push=function(...r){let o=e.apply(this,r);try{let n=r[0];return cc(t,n),o}catch(n){return a.error(n),o}}}}function __(t){function e(){let r=Ii.apply(this,arguments);try{let o=arguments?Array.prototype.slice.call(arguments[0]):[];return cc(t,o),r}catch(o){return a.error(o),r}}window._learnq.push&&typeof Ii!="function"&&(Ii||(Ii=window._learnq.push),window._learnq.push=e)}function w_(t,e){window._learnq=window._learnq||[],!y()&&(window._learnq?._loaded||(y_(e),v_(e)),F(()=>{if(window._learnq?._loaded){__(e);return}throw g_(new Error($))},h_("Klaviyo platform load not detected."),500,10))}var uc={name:ll,setup:w_};var pl="google_ads";async function E_(t,e){try{await pi(t,pl,e,!1)}catch(r){a.error(r)}}var fc={name:pl,setup:E_};var ml="google_analytics";async function b_(t,e){try{await pi(t,ml,e,!0)}catch(r){a.error(r)}}var dc={name:ml,setup:b_};var sn="facebook_ads";function S_(t){return t==="track"}function gl(t,e,r,o,n){S_(e)&&go(sn,t,r,{data:o,platform_event_id:n?.eventID})}var an=[];function P_(t=[]){an=an.concat(t.filter(e=>!an.includes(e)))}function x_(){return an}function T_(){an=[]}function A_(t,e){if(!window.fbq?.alreadyIntercepted)if(typeof window.fbq?.getState=="function"){let r=window.fbq;window.fbq=(...o)=>{gl(e,...o),r(...o)},Object.keys(r).forEach(o=>{Object.defineProperty(window.fbq,o,{set:n=>{r[o]=n},get:()=>r[o]})}),window.fbq.alreadyIntercepted=!0,x_()?.forEach(([...o])=>{gl(e,...o)}),T_()}else throw new Error(`${sn} pixel not yet loaded for ${t}.`)}async function I_(t,e){try{let r=[];if(e?.length){let o=await $o(t);e.forEach(n=>{let i=n?.loadPixel===!0,c=n?.pixelId,s=r.includes(c);i&&c&&!s&&o&&(r.push(c),Hn(c,o))})}}catch(r){a.error(r)}}async function k_(t,e){try{if(y())return;let r=gr(t).platforms?.filter(o=>o.platform?.toLowerCase()===sn);await I_(e,r),await new Promise((o,n)=>{F(()=>{P_(window.fbq?.queue),A_(t,e),o()},()=>{a.error(new A(`${sn} pixel not present for ${t}.`)),n()},300)})}catch(r){a.error(r)}}var lc={name:sn,setup:k_};function C_(){return new Promise((t,e)=>F(()=>{if(window.Shopify.checkout)return t(window.Shopify.checkout);throw new A("Shopify checkout object missing")},r=>{a.error(r),e(r)},100))}function O_(){if(!window.Shopify)throw new A("Shopify global missing")}function N_(t){F(()=>{O_(),t()},r=>a.error(r),300,300)}var Mr={setup:N_,getShopifyCheckout:C_};var pc="AddPaymentInfo";function R_(t,e){return t.target.matches(`${["#continue_button",...e].filter(r=>!!r).join(",")}`)}function hl(){return ke()?.replace(/\/$/,"").split("/").pop()}function L_(t,e){ba()&&t(pc,{data:On(),platform_event_id:hl()}),Mr.setup(()=>{Cn()==="payment"&&v.addListener(document,"click",r=>{R_(r,e?.additionalSelectors??[])&&nn.getData().then(o=>{o=o||{};let n=JSON.parse(JSON.stringify(o)),i=kn();i&&(n.total_price=i),t(pc,{data:o,platform_event_id:hl()})})},!0)})}var yl={eventName:pc,setup:L_};async function D_(){let t=await fetch(`${ko()}cart.js`);if(!t.ok)throw new Error(`Failed to fetch cart: ${t.statusText}`);return await t.json()}var mc=class extends Error{constructor(){super("Root route not available"),this.status="warn"}},cn=class{static async fromAPI(){try{await gt(()=>{if(!ko())throw new mc});let e=await gt(D_,2);return new cn(e)}catch(e){throw e.status="warn",e}}constructor(e){this.cart=e}getEventDataForItem(e){let r=this.cart?.items?.find(o=>o?.id===e);return r&&(r={...r},delete r.sections,r.currency=qr(),r.total_item_count=this.cart?.item_count,r.total_price=this.cart?.total_price),r}},ki=cn;var ho="AddToCart";function F_(t){return typeof t=="number"&&t>=0}var gc=class{constructor(e){this.sendEvent=e}async sendAddToCartEvents(e){try{let r=e?.items||[e];r=r.filter(n=>n?.id&&F_(n?.quantity)?!0:(a.error(new Fr(`SHOPIFY ${ho} addToCart request did not return valid item: ${JSON.stringify(n)}`)),!1));let o=await ki.fromAPI();r.forEach(n=>{let i=o.getEventDataForItem(n.id);if(!i){a.error(new Fr("SHOPIFY updated cart did not contain the item that was added to the cart"));return}this.sendEvent(ho,{data:i})})}catch(r){a.error(r)}}interceptXhr(){zo(mo,e=>{let r=JSON.parse(e);this.sendAddToCartEvents(r)})}interceptFetch(){Jo(mo,e=>{e.json().then(r=>{this.sendAddToCartEvents(r)})})}},vl=gc;var hc=class{constructor(e){this.sendEvent=e}async logATCOnCartPage(){if(Iu())try{let e=await ki.fromAPI();if(!e?.cart?.items?.length)return;let r=e.cart.items[0],o=e.getEventDataForItem(r.id);this.sendEvent(ho,{data:o})}catch(e){a.error(e)}}},_l=hc;var M_={eventName:ho,setup(t,e={}){y()||(this._interceptor||(this._interceptor=new vl(t),this._interceptor.interceptXhr(),this._interceptor.interceptFetch()),e.logATCOnCartPage&&!this.cartPageLogger&&(this.cartPageLogger=new _l(t),this.cartPageLogger.logATCOnCartPage()))},cleanup(){delete this._interceptor,delete this.cartPageLogger}},wl=M_;var El="CompleteRegistration";function $_(t){try{return t.target.matches('form:has(input[type="email"])')}catch(e){if(e?.message.includes("is not a valid selector"))return new RegExp(/<input.*type="email".*>/).test(t.target.innerHTML)}return!1}function B_(t){y()||v.addListener(document,"submit",e=>{$_(e)&&t(El)},!0)}var bl={eventName:El,setup:B_};var U_=["button#checkout[type=submit]","button#checkout[type=submit] *","button[name=checkout]","button[name=checkout] *","input[id*=checkout][type=submit]","input[id*=checkout][type=submit] *",'[href*="/checkout"]','[href*="/checkout"] *',"button.rebuy-cart__checkout-button","button.rebuy-cart__checkout-button *","i.rebuy-button-icon","i.rebuy-button-icon *",'form[action="/cart"] [name="checkout"]','form[action="/cart"] [name="checkout"] *','form[action="/cart"] button[type="submit"]','form[action="/cart"] button[type="submit"] *','form[action="/checkout"] button','form[action="/checkout"] button *',"button.rebuy-cart__flyout-checkout-button","button.rebuy-cart__flyout-checkout-button *",".cart-drawer__action button",".cart-drawer__action button *",'button[class*="checkout"]','button[class*="checkout"] *','button[id*="checkout"]','button[id*="checkout"] *','a[class*="checkout"]','a[class*="checkout"] *','a[id*="checkout"]','a[id*="checkout"] *','a[name="checkout"]','a[name="checkout"] *',".checkout-btn",".checkout-btn *","button#simpl_buynow-button","button#simpl_buynow-button *",".c-button.rebuy-button",".c-button.rebuy-button *"],V_=["#dynamic-checkout-cart button","#dynamic-checkout-cart button *","#dynamic-checkout-cart [role=button]","#dynamic-checkout-cart [role=button] *",".additional-checkout-buttons button",".additional-checkout-buttons button *",".additional-checkout-buttons [role=button]",".additional-checkout-buttons [role=button] *"];function W_(t,e){return t.target.matches(`${[...U_,...V_,...e].filter(r=>!!r).join(",")}`)}function q_(t,e,r){if(W_(t,e?.additionalSelectors??[])&&t.isTrusted){let o=t.target.parentNode?.form;(!o||o.checkValidity())&&r()}}function G_(t,e){return new Promise(r=>{te(()=>{["click",...e?.additionalListeners?.length?e.additionalListeners:[]].forEach(o=>v.addListener(document,o,n=>q_(n,e,t),!0)),r()})}).catch(r=>a.error(r))}var Sl={setup:G_};function yc(t){let e=new Error(t);return e.name="BadRenderError",e.status="warn",e.stack=ne(e.stack,1),e}var j_=new Promise(t=>{te(t)}),H_="div.paypal-checkout-sandbox";function z_(t){return new MutationObserver(e=>{e.forEach(r=>{r.addedNodes.forEach(o=>{o instanceof Element&&o.matches(H_)&&t()})})})}async function J_(t){try{if(y())return;await j_;let e=z_(t);F(()=>{if(!(document.body instanceof Node))throw new Error;e.observe(document.body,{childList:!0})},()=>{a.error(new yc(`document.body did not render in time and had value: ${document.body}`))})}catch(e){a.error(e)}}var Pl={setup:J_};async function Z_(t){try{let e=t.filter(o=>o.status==="fulfilled").map(o=>o.value.json());return(await po(e)).filter(o=>o.status==="fulfilled"&&o.value.product).map(o=>o.value)}catch(e){let r=new Error(`Error occurred while parsing json from promise results. Error: ${e.message}`);return r.status="warn",a.error(r),Promise.resolve([])}}async function K_({items:t}){try{let e=t.filter(o=>o.url).map(o=>{let n=new URL(`https://${So()}${o.url}`);return n.pathname+=".json",ri(n.href)}),r=await po(e);return await Z_(r)}catch(e){let r=new Error(`Error occurred while fetching product info with tags. Error: ${e.message}`);return r.status="warn",a.error(r),Promise.resolve([])}}function Y_(t,e){let r={...t},{items:o}=r;return e.forEach(n=>{let i=o.find(c=>c.product_id&&n.product?.id&&c.product_id===n.product.id);i&&n.product.tags&&(i.tags=n.product.tags)}),r}async function xl(t){try{if(t?.items?.length>0){let e=await K_(t);return Y_(t,e)}}catch(e){let r=new Error(`Error occurred while including product tags. Sending event without tags. Error: ${e.message}`);r.status="warn",a.error(r)}return t}var Tl="InitiateCheckout";function X_(t,e){if(ku())return Promise.resolve();nn.setup();let r=async()=>{try{let o=await nn.getData(),n=o;e?.loadProductTags===!0&&(n=await xl(o)),t(Tl,{data:n})}catch(o){a.error(o)}};return Promise.all([Sl.setup(r,e),Pl.setup(r)])}var Al={eventName:Tl,setup:X_};var Il="PageView";function Q_(t){(!y()||Cu())&&t(Il)}var kl={eventName:Il,setup:Q_};var Ol="Purchase";function Cl(t){return["order_id","line_items","total_price_set.shop_money.currency_code","total_price_set.shop_money.amount"].every(e=>w(t,e)!==void 0)}function ew(t){if(window.cart_json){let{line_items:e,currency:r,total_price:o}=window.cart_json;return E({},t,{line_items:e,total_price_set:{shop_money:{currency_code:r,amount:o}}})}return t}function tw(t){function e(r){t(Ol,{data:{...r},platform_event_id:r.order_id||r?.order?.id})}Ea()?e(On()):V("platform",h.VIEW_RESPONSE,()=>{Mr.setup(()=>{M("page.log_purchase")&&Mr.getShopifyCheckout().then(r=>{if(Cl(r))return e(r);let o=ew(r);if(Cl(o))return e(o);throw new A("Shopify checkout required fields are missing")}).catch(r=>a.error(r))})})}var Nl={eventName:Ol,setup:tw};function Rl(t,e){return E({},{content_ids:e?.map(r=>r?.product_id).filter(r=>r),currency:t?.currency,content_type:"product_group",num_items:e?.reduce((r,o)=>r+(o?.quantity?o.quantity:0),0)})}function Ll(t){let e=t?.lineItems||[];return{content_ids:e?.map(r=>r?.variant?.product?.id).filter(r=>r),content_type:"product_group",num_items:e?.reduce((r,o)=>r+(o?.quantity?o.quantity:0),0),order_id:t?.order?.id,currency:t?.totalPrice?.currencyCode,value:t?.totalPrice?.amount,contents:e?.map(r=>({id:r?.variant?.product?.id,quantity:r?.quantity,item_price:r?.variant?.price?.amount,title:r?.title}))}}function rw(t){if(y())return Ll(t);let e=t?.line_items??[];return E(Rl(t,e),{order_id:t?.order_id,currency:t?.total_price_set?.shop_money?.currency_code,value:t?.total_price_set?.shop_money?.amount,contents:e?.map(r=>({id:r?.product_id,quantity:r?.quantity,item_price:r?.price,title:r?.title}))})}function Dl(t){function e(o){return E({},{id:o?.product_id,quantity:o.quantity,item_price:jt(o.price),title:o.product_title,description:o.product_description,category:o.product_type})}let r=t?.items??[];return E(Rl(t,r),{value:kn()||jt(t?.total_price),contents:r?.map(o=>e(o))})}function ow(t){let e={};return t?.items?.length?e=JSON.parse(JSON.stringify(t?.items[0])):t&&(e=JSON.parse(JSON.stringify(t))),{content_category:e.product_type,content_ids:e.product_id?[e.product_id]:[],content_name:e.title,content_type:"product_group",currency:e.currency||qr(),num_items:e.quantity||1,value:e.price?jt(e.price):void 0}}function nw(t){return{search_string:t?.search_string}}function iw(t){let e=y()?{...Ll(t)}:{...Dl(t)};return delete e?.num_items,e}function aw(t){return E({},{content_category:t?.type,content_ids:t?.id&&[t?.id],content_name:t?.title,content_type:"product_group",currency:t?.currency,value:jt(t?.price)})}var sw={addtocart:{eventName:"AddToCart",convert:ow},purchase:{eventName:"Purchase",convert:rw,isValid:t=>t?.total_price_set?.shop_money?.currency_code&&t?.total_price_set?.shop_money?.amount||t?.totalPrice?.currencyCode&&t?.totalPrice?.amount},addpaymentinfo:{eventName:"AddPaymentInfo",convert:iw},viewedproduct:{eventName:"ViewContent",convert:aw},pageview:{eventName:"PageView"},initiatecheckout:{eventName:"InitiateCheckout",convert:Dl},search:{eventName:"Search",convert:nw},completeregistration:{eventName:"CompleteRegistration"}};function Fl(t,{data:e}={}){let r=sw[t?.toLowerCase()];if(!r||r.isValid&&!r.isValid(e))return;let o=r.convert&&r.convert(e);return{eventName:r.eventName,data:o}}function vc(t,e){return t.filter(r=>r.eventSource==="shopify"&&r.originalEventName===e)}var wc="facebook_ads",Ml=[],un,fn,_c;function cw(t,e,r){if(_c=r.includes("facebook_ads"),y()){un=!1;return}async function o(){try{let n=Vo(e,wc);fn=await $o(t),n.forEach(i=>{let c=i?.loadPixel===!0,s=i?.pixelId,u=Ml.includes(s);c&&s&&!u&&fn&&(Ml.push(s),Hn(s,fn))})}catch(n){a.error(n)}}_c?F(()=>{let n=window?.trekkie?.config?.S2S?.facebookCapiEnabled;if(typeof n=="boolean")n?un=!1:(un=!0,o());else throw new Error("Trekkie facebookCapiEnabled not loaded.")},()=>a.error(new A("Trekkie not loaded")),100):(un=!0,o())}async function uw(t){try{if(y()){if(fn=await $o(t),!_c)return!0;let e=await j(Pn);if(typeof e=="boolean"&&!e)return!0}}catch(e){a.error(e)}return!1}async function fw(t,e,r,o="identity"){let n=await uw(r);if(un||n){let i=Fl(t,e),c=fn?.external_id;Vo(o,wc).forEach(s=>{let u=vc(s?.eventTrackers||[],t);function m(g,b){return g&&b&&i&&s.pixelId}u.forEach(g=>{let b=g?.overrideEventName||g?.originalEventName;m(g,b)&&(y()?Gn(s.pixelId,e?.platform_event_id,c,b,i?.data):F(()=>{if(typeof window.fbq=="function")window.fbq("trackSingle",s.pixelId,b,i?.data,{eventID:e?.platform_event_id});else throw new Error("FBQ not loaded")},()=>a.error(new A("FBQ not loaded")),100))})})}}var Ec={name:wc,setup:cw,sendEvent:fw};var $l={[Ec.name]:Ec},Bl,Ul,Ci,bc;function dw(t,e,r,{browserEventPlatforms:o,validatePlatforms:n}={}){Bl=t,Ul=e,Ci=r,bc=o??[],n=n??[],bc.forEach(i=>{$l[i]?.setup(Ci,e,n)})}function lw(t,e={},{browserEventPlatforms:r}={}){let o=r??bc;e.platform_event_id||(e.platform_event_id=Fo()),go(Bl,Ci,t,e),o.forEach(n=>{$l[n]?.sendEvent(t,e,Ci,Ul)})}var et={setup:dw,sendEvent:lw};function Vl(){let t=Ge(window.location.search).variant,e=t?t.split("?")[0]:null;if(e)return parseInt(e,10);let r=[...document.querySelectorAll('input[name="id"]')];if(r.length===1)return parseInt(r,10);let o=window.ShopifyAnalytics?.meta;if(o?.product?.id){let n=[...document.querySelectorAll(`input[name="id"][data-productid="${o?.product?.id}"]`)];if(n.length===1&&n[0]?.value)return parseInt(n[0].value,10)}if(o?.product?.variants&&o?.selectedVariantId){let n=parseInt(o?.selectedVariantId,10),i=o?.product?.variants.filter(s=>s.id===n);if(window.ReCharge&&window.ga&&document.querySelector('[name="properties[shipping_interval_frequency]"]')?.value){let s=window.ReCharge.products.filter(u=>typeof u.variant_to_duplicate[`${n}`]=="string");if(s.length===1)return s[0].variant_to_duplicate[`${n}`]}if(i.length)return n}return null}var Wl="ViewedProduct";function ql(t,e){let r=JSON.parse(JSON.stringify(t));if(r.variants&&r.variants.length){let n=r?.variant_id??Vl()??r.variants[0].id,i=r.variants.find(c=>c.id===n)??r.variants[0];i.name&&(r.title=i.name),r.variants=[i]}r.featured_image?.startsWith("//")&&(r.featured_image=`https:${r.featured_image}`),delete r.description,delete r.media;let o=qr();o&&(r.currency=o),e(Wl,{data:r})}function pw(t){Mr.setup(()=>{if(va()){let e=`${ke()}.js${window.location.search}`;Me(e,{},r=>ql(r,t))}})}var Gl={eventName:Wl,setup:pw,sendProductDataToPlatform:ql};async function mw(t,e){try{if(await j(ra))return;(e?.validatePlatforms||[]).includes("facebook_ads")&&F(()=>{let n=window?.trekkie?.config?.S2S?.facebookCapiEnabled;if(typeof n=="boolean")t(n?"FB_CAPI_ENABLED":"FB_CAPI_DISABLED"),Q(ra,!0),Q(Pn,n);else throw new Error("Trekkie facebookCapiEnabled not loaded.")},()=>a.error(new A("Trekkie not loaded")),100)}catch(r){a.error(r)}}var jl={setup:mw};var Hl="Search";function gw(t){if(Au()){let e=k(),r={search_string:Ge(e)?.q};t(Hl,{data:r})}}var zl={eventName:Hl,setup:gw};var Jl="ActiveOnSite";async function hw(t){try{if(await j(oa))return;t(Jl),Q(oa,!0)}catch(e){a.error(e)}}var Zl={eventName:Jl,setup:hw};var Sc="shopify";function yw(t){let e=gr(t),[r]=e?.platforms?.filter(o=>o?.platform===Sc.toUpperCase());return r}function vw(t,e){let r=yw(t),o=r?.eventTriggerSettings;et.setup(Sc,t,e,r),jl.setup(et.sendEvent,r),yl.setup(et.sendEvent,o?.AddPaymentInfo),bl.setup(et.sendEvent,o?.CompleteRegistration),wl.setup(et.sendEvent,o?.AddToCart),Al.setup(et.sendEvent,o?.InitiateCheckout),kl.setup(et.sendEvent,o?.PageView),zl.setup(et.sendEvent,o?.Search),Nl.setup(et.sendEvent,o?.Purchase),Gl.setup(et.sendEvent,o?.ViewedProduct),Zl.setup(et.sendEvent,o?.ActiveOnSite)}var Pc={name:Sc,setup:vw};var _w="shopify_webhook";async function ww(t,e){try{if(y())return;let r={method:"POST",body:JSON.stringify({attributes:{_bcai:btoa(JSON.stringify({site_name:d,ids:await ee(e),user_data:{fbp:await T(lt),fbc:await T(Vt),bcvid:(await ze())?.id}})),_bcai_aid:await T("_shopify_y")}}),mode:"cors",headers:{Accept:"application/json","Content-Type":"application/json","Access-Control-Allow-Origin":"*"}};F(()=>{let o=ko();if(!o)throw Error("Shopify Root Route Not Found");Me(`${o}cart/update.js`,r)},()=>a.error(new Oe("Cart update failed","ShopifyCart",!1,"warn")))}catch(r){a.error(r)}}var xc={name:_w,setup:ww};function Ew(){let t="https://api.blackcrow.ai/user/?";return St(d)&&(t="https://api.sandbox.blackcrow.ai/user/?"),t}function bw(t={}){return{site_name:d,ids:t}}function Tc(t){be(nr,h.IDENTIFY,E({},t),{})}function Sw(t){Q(Ur,t),Tc(t)}function Le(t=[]){let e=bw(t),o={servlet:"user",method:"POST",cache:"no-cache",body:JSON.stringify(e)};Me(Ew(),o,Sw,n=>{a.error(n)})}function Pw(t){async function e(r){try{let o=await ee(t),n=Je("e",lr(r));o.length&&n.length&&Le(o.concat(n))}catch(o){a.error(o)}}Xu(e)}var Ac={name:"email",setup:Pw};function xw(t){async function e(r){try{let o=await ee(t),n=Je("p",hr(r));o.length&&n.length&&Le(o.concat(n))}catch(o){a.error(o)}}Wf(e)}var Ic={name:"phone",setup:xw};async function dn(t,e){try{return await j(t)===e?!0:(Q(t,e),!1)}catch(r){return a.error(r),!1}}var Tw="_kx";async function Aw(t){try{let o=function(c){let s=Je("klx",c);r.length&&s.length&&Le(r.concat(s))};var e=o;let r=await ee(t),n=await Gr();o(le(Tw)),await dn("_bcai_s_keid",n)||o(n)}catch(r){a.error(r)}}var kc={name:"klaviyo",setup:Aw};async function Iw(t){try{let i=function(){let b=le(pu);return b?.trim().length>0?`fb.1.${Date.now()}.${b}`:n},s=function(b){let U=Object.entries(b).reduce((se,[$t,Bt])=>se.concat(Je($t,Bt)),[]);c.length&&U.length&&Le(c.concat(U))};var e=i,r=s;let o=await T(lt),n=await T(Vt),c=await ee(t),u=i(),[m,g]=[await dn("_bcai_s_fbc",u),await dn("_bcai_s_fbp",o)];s({...!m&&{fbc:u},...!g&&{fbp:o}})}catch(o){a.error(o)}}var Cc={name:"facebook_ads",setup:Iw};async function kw(t){try{let e=await ee(t),r=zf();r&&e.length&&r.forEach(o=>{let n=[];n=n.concat(Je("fn",Wn(o.fn))),n=n.concat(Je("ln",Wn(o.ln))),n=n.concat(Je("fln",Wn(o.fln))),n.length&&Le(e.concat(n))},[])}catch(e){a.error(e)}}var Oc={name:"name",setup:kw};async function Cw(t){try{let e=await $e(()=>[...document.querySelectorAll("iframe[srcdoc]")].find(u=>u.srcdoc?.includes("sendlane.com")),12e4);if(!e)return;let o=(await new Promise(s=>e.contentDocument?.addEventListener("submit",s,{once:!0,capture:!0}))).target;if(!o||o.constructor.name!=="HTMLFormElement")throw new Error("Sendlane form is not an HTMLFormElement");let n=await ee(t),i=o.querySelector('input[type="email"]');i&&(n=n.concat([{name:"e",value:lr(i.value)}]));let c=o.querySelector('input[type="tel"]');c&&(n=n.concat([{name:"p",value:hr(c.value)}])),Le(n)}catch(e){a.error(e)}}var Nc={name:"sendlane",setup:Cw};async function Kl(t=[]){try{let e=await j(Ur);if(e)Tc(e);else{let r=await ee(t);r.length&&Le(r)}}catch(e){a.error(e)}}var Ow={[uc.name]:uc,[lc.name]:lc,[Pc.name]:Pc,[xc.name]:xc,[fc.name]:fc,[dc.name]:dc},Nw={[Ac.name]:Ac,[Ic.name]:Ic,[kc.name]:kc,[Cc.name]:Cc,[Oc.name]:Oc,[Nc.name]:Nc};function Rw(t,e){e.forEach(r=>{let o=Nw[r];o&&typeof o.setup=="function"&&o.setup(t)})}function Rc(t,e){t.length!==0&&e&&e.forEach(r=>{let o=Ow[r];o&&typeof o.setup=="function"&&o.setup(nr,t)})}function Lw(t){return t.filter(e=>e.source==="cookie"&&e.cookieLoadUrl)}async function Dw(t){try{for(let e=0;e<t.length;e+=1)await T(t[e].value)||await Ho(Me,t[e].cookieLoadUrl,{mode:"no-cors",credentials:"include"})}catch(e){a.error(e)}}async function Fw(){try{let c=function(s){V("platform",h.VIEW_RESPONSE,()=>{let u=ui(e?.scoreName);Q(To,u),s&&s(o,i)})};var t=c;let e=gr(nr),r=e.userAttributes||[],o=e.userIdentifiers||[],n=Lw(o),i=new Set((e.platforms||[]).map(s=>s?.platform?.toLowerCase()).filter(s=>s));n.length&&await Dw(n),te(()=>{Rw(o,r)}),Kl(o),e?.scoreName?await j(To)?(Rc(o,i),c()):c(Rc):Rc(o,i)}catch(e){a.error(e)}}function Mw(){return Fw(),{}}var Yl={appName:nr,init:Mw};var $w=C.object({name:C.string().optional(),percent:C.number().min(0).max(1).default(1),enabled:C.boolean().default(!0),platforms:C.object({googleAnalytics:C.object({variantName:C.string().regex(/^\S+-\S+-\S+$/)}).optional()}).optional()}),Bw=C.object({experimentBuckets:C.array($w)}),yo=class{constructor(e){this.config=e}static fromAppSettings(){let e=rt("site_speed")?.appSetting?.siteSpeed||{},r=Bw.parse(e);return new yo(r)}get settingsBucket(){let e=this.config.experimentBuckets.map(r=>({name:r.name,percent:r.percent,value:r}));return re({name:"site_speed_enabled",allocations:e})}get enabled(){return this.settingsBucket.enabled}get googleAnalyticsVariantName(){return this.settingsBucket.platforms?.googleAnalytics?.variantName}get bucketName(){return this.settingsBucket.name}};var Oi="bcai-speed-override";function Xl(){localStorage.setItem(Oi,"force_disabled")}function Ql(){localStorage.setItem(Oi,"force_enabled")}function ep(){localStorage.removeItem(Oi)}function Lc(){return localStorage.getItem(Oi)}async function Dc(){try{let t=await navigator?.serviceWorker?.getRegistration();t&&(t.active&&t.active.postMessage({message:"clear cache"}),await t.unregister())}catch(t){a.error(t)}}var ir,pn,ap,Ni;var sp=-1,Mc=function(t){addEventListener("pageshow",function(e){e.persisted&&(sp=e.timeStamp,t(e))},!0)},cp=function(){return window.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0]},up=function(){var t=cp();return t&&t.activationStart||0},Ri=function(t,e){var r=cp(),o="navigate";return sp>=0?o="back-forward-cache":r&&(document.prerendering||up()>0?o="prerender":document.wasDiscarded?o="restore":r.type&&(o=r.type.replace(/_/g,"-"))),{name:t,value:e===void 0?-1:e,rating:"good",delta:0,entries:[],id:"v3-".concat(Date.now(),"-").concat(Math.floor(8999999999999*Math.random())+1e12),navigationType:o}},fp=function(t,e,r){try{if(PerformanceObserver.supportedEntryTypes.includes(t)){var o=new PerformanceObserver(function(n){Promise.resolve().then(function(){e(n.getEntries())})});return o.observe(Object.assign({type:t,buffered:!0},r||{})),o}}catch{}},Li=function(t,e,r,o){var n,i;return function(c){e.value>=0&&(c||o)&&((i=e.value-(n||0))||n===void 0)&&(n=e.value,e.delta=i,e.rating=function(s,u){return s>u[1]?"poor":s>u[0]?"needs-improvement":"good"}(e.value,r),t(e))}},Uw=function(t){requestAnimationFrame(function(){return requestAnimationFrame(function(){return t()})})},dp=function(t){var e=function(r){r.type!=="pagehide"&&document.visibilityState!=="hidden"||t(r)};addEventListener("visibilitychange",e,!0),addEventListener("pagehide",e,!0)},lp=function(t){var e=!1;return function(r){e||(t(r),e=!0)}},vo=-1,tp=function(){return document.visibilityState!=="hidden"||document.prerendering?1/0:0},Di=function(t){document.visibilityState==="hidden"&&vo>-1&&(vo=t.type==="visibilitychange"?t.timeStamp:0,Vw())},rp=function(){addEventListener("visibilitychange",Di,!0),addEventListener("prerenderingchange",Di,!0)},Vw=function(){removeEventListener("visibilitychange",Di,!0),removeEventListener("prerenderingchange",Di,!0)},pp=function(){return vo<0&&(vo=tp(),rp(),Mc(function(){setTimeout(function(){vo=tp(),rp()},0)})),{get firstHiddenTime(){return vo}}},mp=function(t){document.prerendering?addEventListener("prerenderingchange",function(){return t()},!0):t()};var ln={passive:!0,capture:!0},Ww=new Date,op=function(t,e){ir||(ir=e,pn=t,ap=new Date,hp(removeEventListener),gp())},gp=function(){if(pn>=0&&pn<ap-Ww){var t={entryType:"first-input",name:ir.type,target:ir.target,cancelable:ir.cancelable,startTime:ir.timeStamp,processingStart:ir.timeStamp+pn};Ni.forEach(function(e){e(t)}),Ni=[]}},qw=function(t){if(t.cancelable){var e=(t.timeStamp>1e12?new Date:performance.now())-t.timeStamp;t.type=="pointerdown"?function(r,o){var n=function(){op(r,o),c()},i=function(){c()},c=function(){removeEventListener("pointerup",n,ln),removeEventListener("pointercancel",i,ln)};addEventListener("pointerup",n,ln),addEventListener("pointercancel",i,ln)}(e,t):op(e,t)}},hp=function(t){["mousedown","keydown","touchstart","pointerdown"].forEach(function(e){return t(e,qw,ln)})},np=[100,300],yp=function(t,e){e=e||{},mp(function(){var r,o=pp(),n=Ri("FID"),i=function(u){u.startTime<o.firstHiddenTime&&(n.value=u.processingStart-u.startTime,n.entries.push(u),r(!0))},c=function(u){u.forEach(i)},s=fp("first-input",c);r=Li(t,n,np,e.reportAllChanges),s&&dp(lp(function(){c(s.takeRecords()),s.disconnect()})),s&&Mc(function(){var u;n=Ri("FID"),r=Li(t,n,np,e.reportAllChanges),Ni=[],pn=-1,ir=null,hp(addEventListener),u=i,Ni.push(u),gp()})})};var Tj=1/0;var ip=[2500,4e3],Fc={},vp=function(t,e){e=e||{},mp(function(){var r,o=pp(),n=Ri("LCP"),i=function(u){var m=u[u.length-1];m&&m.startTime<o.firstHiddenTime&&(n.value=Math.max(m.startTime-up(),0),n.entries=[m],r())},c=fp("largest-contentful-paint",i);if(c){r=Li(t,n,ip,e.reportAllChanges);var s=lp(function(){Fc[n.id]||(i(c.takeRecords()),c.disconnect(),Fc[n.id]=!0,r(!0))});["keydown","click"].forEach(function(u){addEventListener(u,function(){return setTimeout(s,0)},!0)}),dp(s),Mc(function(u){n=Ri("LCP"),r=Li(t,n,ip,e.reportAllChanges),Uw(function(){n.value=performance.now()-u.timeStamp,Fc[n.id]=!0,r(!0)})})}})};var Gw="site_speed";function jw(){return!!window?.navigator?.serviceWorker}async function Hw(){try{let o=function(){let n=Lc();return n==="force_enabled"?!0:n==="force_disabled"?!1:e.enabled};var t=o;if(y()||!jw())return;let e=yo.fromAppSettings();oe(H.SITE_SPEED_BUCKETING,{bucketing:{bucket_name:e.bucketName}});let r=ie("web_vitals_metrics");if(r.get("FID")||(yp(({name:n,navigationType:i,value:c,delta:s,rating:u})=>{oe(H.SITE_SPEED_FID_METRIC,{web_vitals:{name:n,navigation_type:i,value:c,delta:s,rating:u},bucketing:{bucket_name:e.bucketName}})}),r.set("FID",!0)),r.get("LCP")||(vp(({name:n,navigationType:i,value:c,delta:s,rating:u})=>{oe(H.SITE_SPEED_LCP_METRIC,{web_vitals:{name:n,navigation_type:i,value:c,delta:s,rating:u},bucketing:{bucket_name:e.bucketName}})}),r.set("LCP",!0)),window.blackcrowSpeed={async forceEnable(){Ql(),location.reload()},async forceDisable(){Xl(),await Dc(),location.reload()},async reset(){ep(),location.reload()},get appStatus(){let n=e.enabled?"enabled":"disabled";return Lc()??n}},e.googleAnalyticsVariantName&&bt("event","experience_impression",{exp_variant_string:e.googleAnalyticsVariantName,event_label:e.googleAnalyticsVariantName}),o()){let n=await navigator.serviceWorker.register("/sw.js",{scope:"/"}),i=n.installing??n.waiting??n.active;if(i){let{id:c}=await ze(),s=re({name:"error_sampling",allocations:[{percent:.1,value:!0}]});i.postMessage({message:"config",data:{SITE_NAME:d,VISITOR_ID:c,SAMPLE_ERRORS:!!s}})}}else await Dc()}catch(e){a.error(e)}}var _p={appName:Gw,init:Hw};var Fi={audience:Lf,measure:ad,pwo:Vd,target:il,identity:Yl,site_speed:_p};var mn={};function zw(t){let e=rt(t.appName);if(typeof t.init=="function"&&e.active)return t.init();let r=Bn(t.appName),o={};return r.forEach(n=>{o[n]=Promise.resolve()}),o}function Jw(t,e){let r=rt(t.appName);return typeof t.sendAppScores=="function"&&r.active?t.sendAppScores(e):Promise.resolve()}function wp(){S(Fi,(t,e)=>{rt(e).active&&(mn[t.appName]=t)})}function Ep(){let t={};return S(mn,e=>{t[e.appName]=zw(e)}),t}function $c(t){if(St(d))return Promise.resolve();let e=[];return S(mn,r=>{e.push(Jw(r,t[r.appName]))}),Promise.all(e)}function bp(){S(mn,t=>{typeof t.cleanup=="function"&&t.cleanup()}),mn={}}function Mi(t){V("platform",h.VIEW_RESPONSE,e=>t(e))}function Sp(t,e){return Io(t),$c(e)}function $i(t,e){Io(t),rf(t.history_id),wf(),os(),mf(),$c(e),be("platform",h.VIEW_RESPONSE,t)}var Bi=`${f}_overrides`,Pp=!1,Ui=null;function Zw(){Ui=null,Q(Bi,{})}async function xp(t){try{let e=E({},Ui||await j(Bi),t);Ui=e,Q(Bi,e),Pp&&console.log(`Your <${f}> settings will apply on the next page load. Please refresh the page.`)}catch(e){a.error(e)}}function Kw(){S(Fi,(t,e)=>{V("platform",`force_${e}`,()=>{xp({apps:{[e]:{active:!0}}})})})}function Tp(){V("platform",h.OVERRIDES,xp),V("platform",h.CLEAR_OVERRIDES,Zw),Kw()}async function Ap(){try{return Pp=!0,Ui||await j(Bi)}catch(t){return a.error(t),{}}}function Ip(){return wp(),Ep()}var qe={platforms:{attentive:{submitEvents:["EMAIL_LEAD"]},bounceExchange:{submitEvents:["input_submission","campaign_submit"]},justUno:{},klaviyo:{submitEvents:["submit"]},sleekNote:{submitEvents:["submit"]},wisePops:{submitEvents:["after-form-submit"]},generic:{}},platformIdentifiers:["kl-","klaviyo","attn","fieldcaptureform","sleeknote","justuno","bx","bounceexchange","wisepops"],platformIdentifierExceptions:["kmail"],metadataViolators:["phone","email","sentIdentifiers"],page_id:"EmailSubmit"};var{platformIdentifiers:Yw,platformIdentifierExceptions:Xw,metadataViolators:Qw}=qe,Cp=(t,{qualified:e,resolveTarget:r})=>t?e(t)?r?t:!0:t.parentElement?Cp(t.parentElement,{qualified:e,resolveTarget:r}):!1:!1,eE=t=>t.style.position==="fixed"||t.style.top==="0"||t.style.top==="0px",tE=t=>t.nodeName.toLowerCase()==="iframe",rE={form:{qualified:t=>t.nodeName.toLowerCase()==="form",resolveTarget:!0},footer:{qualified:t=>t.nodeName.toLowerCase()==="footer",resolveTarget:!1},overlay:{qualified:t=>eE(t)||tE(t),resolveTarget:!1}},Bc=(t,e)=>Cp(t,rE[e]),Op=t=>Bc(t,"form"),oE=t=>Bc(t,"footer"),nE=t=>Bc(t,"overlay"),iE=t=>{if(!t)return"unknown";try{if(nE(t))return"overlay";if(oE(t))return"footer";if(pr()==="checkout")return"checkout"}catch{a.error(new A("email location failed"))}return"unknown"},Np=()=>{let t=pr()==="checkout",e=document.querySelector('input[type="checkbox"]');return t&&e&&!e.checked},aE=(t,e)=>t.some(r=>typeof r=="string"&&r.toLowerCase().includes(e)),kp=(t,e)=>e.some(aE.bind(null,t)),Rp=t=>{let e=[...Array.from(t.classList),t.action,t.id];return kp(e,Yw)&&!kp(e,Xw)},sE=t=>{window._learnq=window._learnq||[],window._learnq.push(["identify",{$email:t}])},cE=(t,e)=>{let r={...t};return S(Object.keys(r),o=>{S(e,n=>{o.includes(n)&&(r[o]="redacted")})}),r},uE=t=>{a.push({trigger:h.VIEW,data:{page_id:qe.page_id,custom_dimensions:t}})},De=(t,e)=>{let r=t.email||t.$email,o=Na(r);Ra(o)&&(Y(o),sE(o),uE({...cE(t,Qw),location:iE(e)}),ft.setPIISubmitCookie())};var Lp=["checkout","account","login"],fE=pr(),dE=ke(),Dp=t=>{if(Lp.includes(fE)||Lp.some(r=>dE.includes(r))||Np())return;let e=t.value;e&&De({email:e},document.activeElement)},lE=()=>{let t;S(La(),e=>{if(t=Op(e),t){if(Rp(t))return;v.addListener(t,"submit",()=>{Dp(e)})}else v.addListener(e,"focusout",()=>{Dp(e)})})};function Uc(){te(()=>{v.setTimeout(lE,5e3)})}var{submitEvents:pE}=qe.platforms.attentive;function Vc(){v.addListener(window,"message",t=>{let{origin:e,data:r,target:o}=t;if(e.includes(".attn.tv")){let{__attentive:n}=r;pE.includes(n?.action)&&De(n,o.document.activeElement)}})}var mE=(t,e)=>{if(e.isWrapped)return e;function r(){try{t.apply(this,arguments)}catch{}return e.apply(this,arguments)}return r.isWrapped=!0,r},Vi=(t,e)=>mE(t,typeof e=="function"?e:()=>{});var{submitEvents:gE}=qe.platforms.bounceExchange;function Wc(){v.setTimeout(()=>{window.bouncex=window.bouncex||{},window.bouncex&&typeof window.bouncex.push=="function"&&(window.bouncex.push=Vi((...t)=>{let{email:e,source:r}=t[0][1];gE.includes(r)&&De({email:e})},window.bouncex.push))},8e3)}function qc(){v.setTimeout(()=>{window.ju_callback=Vi((t,e)=>{De({email:e})},window.ju_callback)},5e3)}var{submitEvents:hE}=qe.platforms.klaviyo;function Gc(){v.addListener(window,"klaviyoForms",t=>{let{detail:e,target:r}=t,{type:o,metaData:n}=e;hE.includes(o)&&De(n,r.document.activeElement)})}var{submitEvents:yE}=qe.platforms.sleekNote;function jc(){v.addListener(window,"sleekNote",t=>{let{data:e,target:r}=t;yE.includes(e.type)&&De(e.data,r.activeElement)})}var{submitEvents:vE}=qe.platforms.wisePops;function Hc(){v.setTimeout(()=>{vE.forEach(t=>{window[window.WisePopsObject]&&typeof window[window.WisePopsObject]=="function"&&window[window.WisePopsObject]("listen",t,e=>{let{target:r}=e,o=r.querySelector('input[type="email"]')?.value;De({email:o},r)})})},5e3)}var _E={attentive:Vc,bounce_exchange:Wc,just_uno:qc,klaviyo:Gc,sleek_note:jc,wise_pops:Hc};function zc(){let t=M("config.emailFormTracking"),e=t?.active||!1,r=t?.platforms||[];e&&e===!0&&(Uc(),r.map(o=>o.name).forEach(o=>{let n=_E[o];n&&n()}))}var Fp=!1;function wE(t){let e="cart/add",r=h.ADD_TO_CART;oi(e,()=>{a.push({trigger:r})}),zr(e,()=>{a.push({trigger:r})},t)}function EE(t){v.addListener(window,"click",e=>{let r=w(e,"target.className");(e.target.getAttribute("name")==="checkout"||t&&typeof r=="string"&&r.match(t))&&a.push({trigger:"initiate_checkout"})})}function bE(t){let e=[];return t.items.forEach(r=>{e.push({sku:r.sku,id:r.id,quantity:r.quantity})}),t.items=e,t}function SE(t){return t.items&&(t=bE(t)),{cart_json:t}}function PE(t,e,r){Me("/cart.json",{servletName:"ShopifyCart"},o=>{let n={custom_dimensions:SE(o)};r?e(r,E({},t,n)):e(E({},t,n))})}function Jc(t){Fp===!1&&(F(()=>{if(Ce()&&M("config.shopify.add_to_cart.active"))return wE(!0);throw new Error("Shopify globals not found")}),M("config.shopify.checkout.active")&&EE(M("config.shopify.checkout.class_name")),Fp=!0),Mi(()=>{Ce()&&M("config.shopify.add_to_cart.active")&&V("platform",h.ADD_TO_CART,e=>{PE(E({},e,{page_id:"AddToCart"}),t,void 0)}),V("platform",h.INITIATE_CHECKOUT,e=>t(E({},e,{page_id:"checkout"})))})}var Mp=[zc,Jc];var Wi="target",xE=[zt,tn,on];function Zc(){function t(r){let o="advanced_matching";Tt(Wi,r,o),ae(`${Wi} ${o}: ${r}`,"update")}function e(r){let o=z(Wi,r.name);!o||Object.keys(o).length===0||typeof r.identify=="function"&&r.identify(Wi,()=>t(r.name))}xE.forEach(r=>e(r))}function Kc(){function t(){Qu(Zc),qf(Zc),Gf()}(M("config.visitor.set_info")||jn())&&te(t)}var $p=!0;function TE(t){bp(),es(),ua(),Za(),Io({}),la({}),t&&Object.keys(t).length>0&&An(t)}async function Yc(t={}){try{async function e(n){try{let u=function(m={}){Za(),oe(H.VIEW,m,g=>{Sp(g,s)})};var i=u;Tp();let c=E(n,await Ap());if(la(c),be("platform",h.START,{build:"15344"}),V("platform",h.REFRESH,r),w(c,"page.ignored"))return;await Dd();let s=Ip();Mi(()=>{V("platform",h.VIEW,m=>u(m))}),Mp.forEach(m=>m(u)),await oe(H.VIEW,{},m=>{$i(m,s)},()=>{$i({},s)})}catch(c){a.error(c)}}async function r(n={}){try{let i=t.pages||[],c=k(),s=af(i,c);if(ae(`page: ${s.id} ${s.isNewPage?"\u2714":"\xD7"}`,s),s.isNewPage){let u=E(t,s.config);$p?(ua(),$p=!1):TE(n),await e(u)}Kc()}catch(i){a.error(i)}}async function o(n=0){try{await Wt(t)?await r():n<5?v.setTimeout(()=>{o(n+1)},400):(await r(),a.error(new A("vendor id not found (google id)")))}catch(i){a.error(i)}}w(t,"config.visitor.id_source")==="google"?await o():await r()}catch(e){a.error(e)}}var AE=re({name:"log_spa_refresh_sampling",allocations:[{percent:.1,value:!0}]});function Bp(t,e){AE&&ce(t,{url:e})}var Up={SPA_REFRESH_ENABLED:"config.spa.refresh.enabled",SPA_REFRESH_DELAY:"config.spa.refresh.delay"};function Xc(){if(!y()&&M(Up.SPA_REFRESH_ENABLED)){let t=M(Up.SPA_REFRESH_DELAY)||1e3;(e=>{if(e===void 0){a.error("Unable to setup SPA refresh: window.history is undefined");return}function r(i){Bp("history_intercepted_initial",i),v.setTimeout(()=>{Bp("history_intercepted_timeout",i),a.push({trigger:h.REFRESH})},t)}let o=e.pushState;e.pushState=function(){try{let c=arguments.length>=3?arguments[2]:"not passed";r(c)}catch(c){a.error(c)}return o.apply(e,arguments)};let n=e.replaceState;e.replaceState=function(){try{let c=arguments.length>=3?arguments[2]:"not passed";r(c)}catch(c){a.error(c)}return n.apply(e,arguments)}})(window.history)}}async function Vp(){let t=await $e(()=>window?.Shopify,12e4);if(t)return t.customerPrivacy||await new Promise(e=>{t.loadFeatures?t.loadFeatures([{name:"consent-tracking-api",version:"0.1"}],e):e(void 0)}),window?.Shopify?.customerPrivacy}async function IE(){let t=await T("_cmp_a");if(!t)return!1;let e=JSON.parse(decodeURIComponent(t));return!!(e?.purposes?.a&&e?.purposes?.m)}function kE(t){return new Promise(e=>IE().then(r=>{r&&(t(),e(!0))})).catch(e=>{})}function CE(t){window?.Shopify?.customerPrivacy?.userCanBeTracked?.()?t():v.addListener(document,"visitorConsentCollected",()=>{window?.Shopify?.customerPrivacy?.userCanBeTracked?.()&&t()})}function OE(t){return new Promise(e=>Vp().then(r=>{r&&(CE(t),e(!0))})).catch(e=>{})}async function Wp(t){if(y())return t(),Promise.resolve(!0);let r=(o=>{let n=!1;return()=>{n||(n=!0,o())}})(t);return Promise.race([kE(r),OE(r),new Promise(o=>pe(1e4).then(()=>{window?.Shopify?.customerPrivacy||(r(),o(!0))}))])}function qp(){let t=M("config.events");return t&&t.purchase&&t.purchase.fbEventsToIntercept&&t.purchase.fbEventsToIntercept.length>0?t.purchase.fbEventsToIntercept:null}function Gp(){let t=M("config.events");return t&&t.view&&t.view.fbEventsToIntercept&&t.view.fbEventsToIntercept.length>0?t.view.fbEventsToIntercept:null}var NE=["load","error"],RE=re({name:"log_intercepted_fb_event",allocations:[{percent:.1,value:!0}]});function jp(t,e){let r="Interepted FB event - ".concat(t.event,". Event fired - ",e.type);RE&&ce(r)}function Hp(t,e){return t.find(r=>{let o=r.event,i=(r.filters||[]).map(s=>`.*${s}`).join(),c=`facebook.com/tr/\\?id=.*&ev=${o}${i}`;return e.src.match(c)})}function LE(t,e,r){let o=Hp(e,r);o&&(jp(o,t),a.push({trigger:h.PURCHASE}))}function DE(t,e,r){let o=Hp(e,r);o&&(jp(o,t),!Ce()&&o.event==="AddToCart"&&a.push({trigger:h.ADD_TO_CART}),a.push({trigger:h.VIEW,data:{page_id:o.page_id}}))}var FE=(t,e,r,o)=>{r&&LE(e,r,t),o&&DE(e,o,t)};function Qc(){if(!y()){let t=qp(),e=Gp();if(t||e){let r=Image;Image=function(...n){let i=new r(...n);return NE.forEach(c=>v.addListener(i,c,s=>{FE(i,s,t,e)})),i}}}}var eu=class extends Error{constructor(){super(`Failed to fetch config from CDN - ${Sa()}`),this.status="warn"}},ME=8,$E=10;async function BE(){try{return await gt(Lu,ME,$E,!0)}catch{throw new eu}}async function UE(t=()=>{},e=()=>{}){try{if(Ru(),Nu())return;let r=await BE();if(await t(r),!await Ou(r))return;if(r?.config?.consentManager==="shopify"&&await new Promise(n=>{Wp(n)}),a.SITE_NAME=d,Tu(),Xa(),a.coreStarted){a.push({trigger:h.REFRESH});return}a.coreStarted=!0,Qa(),sf(r.param_transforms),Ef(),await Yc(r),Xc(),Qc(),pf(),e()}catch(r){a.error(r)}}var zp=UE;zp();})();
}catch(e){try{e.message=e.name+':'+e.message;e.name='ParseError';if(blackcrow&&blackcrow.BUILD_NUMBER==='DEV')(blackcrow.error||console.error||console.log)(e);else(blackcrow&&blackcrow.error&&blackcrow.error(e));}catch(_){}}})();
